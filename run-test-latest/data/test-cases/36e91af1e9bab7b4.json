{"uid":"36e91af1e9bab7b4","name":"Invite not registered user to organization with default project via UI","fullName":"tests.test_cases.tests_ui.test_ui_signup.TestUISignup#test_invite_not_registered_user_to_org_with_default_proj","historyId":"205044e1a315fe03fbd376342afa1037","time":{"start":1757993175370,"stop":1757993214002,"duration":38632},"description":"\n- Login with valid credentials.\n- Create new organization.\n- Create project with `default` option.\n- Invite **not registered** user to organization.\n\n### Verify that:\n\n- Newly invited user automatically is member of default project.\n","descriptionHtml":"<div style='line-height:1.6;'><ul>\n<li>Login with valid credentials.</li>\n<li>Create new organization.</li>\n<li>Create project with <span style='background-color:#D3D3D3; padding:2px 4px; border-radius:3px; font-family:monospace;'>default</span> option.</li>\n<li>Invite <strong>not registered</strong> user to organization.</li>\n</ul>\n<h3>Verify that:</h3>\n<ul>\n<li>Newly invited user automatically is member of default project.</li>\n</ul></div>","status":"failed","statusMessage":"AssertionError: [ContentTypeError] during step: Add organization via API and reload page\nMessage: 504, message='Attempt to decode JSON with unexpected mimetype: text/plain', url='https://api.dev.apolo.us/apis/admin/v1/orgs?skip_auto_add_to_clusters=false'","statusTrace":"tests/reporting_hooks/reporting.py:49: in wrapper\n    result = await func(*args, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^\ntests/test_cases/steps/ui_steps/ui_steps.py:363: in ui_add_org_api\n    status, response = await self._api_helper.add_org(\ntests/utils/api_helper.py:189: in add_org\n    status, response = await self._post(url, token=token, data=data)\n                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\ntests/utils/api_helper.py:91: in _post\n    json_data = await response.json()\n                ^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/aiohttp/client_reqrep.py:749: in json\n    raise ContentTypeError(\nE   aiohttp.client_exceptions.ContentTypeError: 504, message='Attempt to decode JSON with unexpected mimetype: text/plain', url='https://api.dev.apolo.us/apis/admin/v1/orgs?skip_auto_add_to_clusters=false'\n\nThe above exception was the direct cause of the following exception:\ntests/test_cases/tests_ui/test_ui_signup.py:138: in test_invite_not_registered_user_to_org_with_default_proj\n    await steps.ui_add_org_api(\ntests/reporting_hooks/reporting.py:58: in wrapper\n    raise AssertionError(formatted_msg) from e\nE   AssertionError: [ContentTypeError] during step: Add organization via API and reload page\nE   Message: 504, message='Attempt to decode JSON with unexpected mimetype: text/plain', url='https://api.dev.apolo.us/apis/admin/v1/orgs?skip_auto_add_to_clusters=false'","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"pytestconfig","time":{"start":1757986281310,"stop":1757986281310,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delay_worker_start","time":{"start":1757986281311,"stop":1757986311312,"duration":30001},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"base_url","time":{"start":1757986281311,"stop":1757986281311,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_output_dir","time":{"start":1757986281311,"stop":1757986281311,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop_policy","time":{"start":1757986281311,"stop":1757986281311,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_verify_url","time":{"start":1757986281311,"stop":1757986281311,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ensure_storage_directories","time":{"start":1757986311312,"stop":1757986311312,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_config","time":{"start":1757993172872,"stop":1757993172877,"duration":5},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"page_manager","time":{"start":1757993172877,"stop":1757993175367,"duration":2490},"status":"passed","steps":[],"attachments":[{"uid":"d01734a2173fca2b","name":"HTTP 200 - GET config","source":"d01734a2173fca2b.txt","type":"text/plain","size":654}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},{"name":"_function_scoped_runner","time":{"start":1757993172877,"stop":1757993172877,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"data_manager","time":{"start":1757993175367,"stop":1757993175367,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_cleanup","time":{"start":1757993175368,"stop":1757993175369,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"users_manager","time":{"start":1757993175368,"stop":1757993175368,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"api_helper","time":{"start":1757993175368,"stop":1757993175368,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"apolo_cli","time":{"start":1757993175368,"stop":1757993175368,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"add_page_manager","time":{"start":1757993175369,"stop":1757993175369,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_inject_fixtures","time":{"start":1757993175369,"stop":1757993175369,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup","time":{"start":1757993175370,"stop":1757993175370,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"\n- Login with valid credentials.\n- Create new organization.\n- Create project with `default` option.\n- Invite **not registered** user to organization.\n\n### Verify that:\n\n- Newly invited user automatically is member of default project.\n","descriptionHtml":"<div style='line-height:1.6;'><ul>\n<li>Login with valid credentials.</li>\n<li>Create new organization.</li>\n<li>Create project with <span style='background-color:#D3D3D3; padding:2px 4px; border-radius:3px; font-family:monospace;'>default</span> option.</li>\n<li>Invite <strong>not registered</strong> user to organization.</li>\n</ul>\n<h3>Verify that:</h3>\n<ul>\n<li>Newly invited user automatically is member of default project.</li>\n</ul></div>","status":"failed","statusMessage":"AssertionError: [ContentTypeError] during step: Add organization via API and reload page\nMessage: 504, message='Attempt to decode JSON with unexpected mimetype: text/plain', url='https://api.dev.apolo.us/apis/admin/v1/orgs?skip_auto_add_to_clusters=false'","statusTrace":"tests/reporting_hooks/reporting.py:49: in wrapper\n    result = await func(*args, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^\ntests/test_cases/steps/ui_steps/ui_steps.py:363: in ui_add_org_api\n    status, response = await self._api_helper.add_org(\ntests/utils/api_helper.py:189: in add_org\n    status, response = await self._post(url, token=token, data=data)\n                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\ntests/utils/api_helper.py:91: in _post\n    json_data = await response.json()\n                ^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/aiohttp/client_reqrep.py:749: in json\n    raise ContentTypeError(\nE   aiohttp.client_exceptions.ContentTypeError: 504, message='Attempt to decode JSON with unexpected mimetype: text/plain', url='https://api.dev.apolo.us/apis/admin/v1/orgs?skip_auto_add_to_clusters=false'\n\nThe above exception was the direct cause of the following exception:\ntests/test_cases/tests_ui/test_ui_signup.py:138: in test_invite_not_registered_user_to_org_with_default_proj\n    await steps.ui_add_org_api(\ntests/reporting_hooks/reporting.py:58: in wrapper\n    raise AssertionError(formatted_msg) from e\nE   AssertionError: [ContentTypeError] during step: Add organization via API and reload page\nE   Message: 504, message='Attempt to decode JSON with unexpected mimetype: text/plain', url='https://api.dev.apolo.us/apis/admin/v1/orgs?skip_auto_add_to_clusters=false'","steps":[{"name":"Login via UI","time":{"start":1757993175371,"stop":1757993181321,"duration":5950},"status":"passed","steps":[{"name":"Click login button","time":{"start":1757993175371,"stop":1757993176559,"duration":1188},"status":"passed","steps":[],"attachments":[{"uid":"945fa7d7aa8ef5ef","name":"Page URL","source":"945fa7d7aa8ef5ef.txt","type":"text/plain","size":33},{"uid":"f503e30f0daf1fa5","name":"Screenshot: Click login button (success)","source":"f503e30f0daf1fa5.png","type":"image/png","size":41621}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Enter email","time":{"start":1757993176560,"stop":1757993176699,"duration":139},"status":"passed","steps":[],"attachments":[{"uid":"837214fd48df3169","name":"Page URL","source":"837214fd48df3169.txt","type":"text/plain","size":215},{"uid":"d6ebc84ff8a1ff21","name":"Screenshot: Enter email (success)","source":"d6ebc84ff8a1ff21.png","type":"image/png","size":45829}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Enter password","time":{"start":1757993176700,"stop":1757993176851,"duration":151},"status":"passed","steps":[],"attachments":[{"uid":"b08f1f9d4b5b9740","name":"Page URL","source":"b08f1f9d4b5b9740.txt","type":"text/plain","size":215},{"uid":"58b55f45f7b86535","name":"Screenshot: Enter password (success)","source":"58b55f45f7b86535.png","type":"image/png","size":46354}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Click Continue button","time":{"start":1757993176851,"stop":1757993180115,"duration":3264},"status":"passed","steps":[],"attachments":[{"uid":"1a1e63ed31fcf9ed","name":"Page URL","source":"1a1e63ed31fcf9ed.txt","type":"text/plain","size":215},{"uid":"cdacb393451c9a1b","name":"HTTP 200 - GET config","source":"cdacb393451c9a1b.txt","type":"text/plain","size":752},{"uid":"cd521c08a0b4719e","name":"HTTP 200 - GET permissions?uri=blob:","source":"cd521c08a0b4719e.txt","type":"text/plain","size":163},{"uid":"a4366c2f9f3e244c","name":"HTTP 200 - GET regression-ceadr7jsak?include=orgs","source":"a4366c2f9f3e244c.txt","type":"text/plain","size":360},{"uid":"13877a87acb10420","name":"HTTP 200 - GET regression-ceadr7jsak?include=clusters&include=system_role","source":"13877a87acb10420.txt","type":"text/plain","size":388},{"uid":"30489728823beca4","name":"HTTP 200 - GET incoming","source":"30489728823beca4.txt","type":"text/plain","size":137},{"uid":"693317717456cd42","name":"Screenshot: Click Continue button (success)","source":"693317717456cd42.png","type":"image/png","size":159132}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":7,"hasContent":true,"attachmentStep":false},{"name":"Verify that Welcome new user page displayed","time":{"start":1757993180127,"stop":1757993181231,"duration":1104},"status":"passed","steps":[],"attachments":[{"uid":"3ea0e9639824b634","name":"Page URL","source":"3ea0e9639824b634.txt","type":"text/plain","size":44},{"uid":"b0aac37faaf8a3ef","name":"Screenshot: Verify that Welcome new user page displayed (success)","source":"b0aac37faaf8a3ef.png","type":"image/png","size":159132}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"d9df9a2471fe5cca","name":"Page URL","source":"d9df9a2471fe5cca.txt","type":"text/plain","size":33},{"uid":"31e4b7f6670d1bde","name":"Screenshot: Login via UI (success)","source":"31e4b7f6670d1bde.png","type":"image/png","size":159132}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":5,"attachmentsCount":17,"hasContent":true,"attachmentStep":false},{"name":"Add organization via API and reload page","time":{"start":1757993183717,"stop":1757993214000,"duration":30283},"status":"failed","statusMessage":"AssertionError: [ContentTypeError] during step: Add organization via API and reload page\nMessage: 504, message='Attempt to decode JSON with unexpected mimetype: text/plain', url='https://api.dev.apolo.us/apis/admin/v1/orgs?skip_auto_add_to_clusters=false'\n","statusTrace":"  File \"/home/runner/work/apolo-test-automation/apolo-test-automation/tests/reporting_hooks/reporting.py\", line 58, in wrapper\n    raise AssertionError(formatted_msg) from e\n","steps":[],"attachments":[{"uid":"bc61dd0bfd37e2d2","name":"Page URL","source":"bc61dd0bfd37e2d2.txt","type":"text/plain","size":44},{"uid":"79bb64febeeef5f0","name":"Screenshot: Add organization via API and reload page (fail)","source":"79bb64febeeef5f0.png","type":"image/png","size":159132}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"bcbde05798c3d031","name":"HTTP 200 - GET config","source":"bcbde05798c3d031.txt","type":"text/plain","size":654},{"uid":"e7f9e647cb9c2749","name":"log","source":"e7f9e647cb9c2749.txt","type":"text/plain","size":10656}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":7,"attachmentsCount":21,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"add_page_manager::finalizer","time":{"start":1757993214115,"stop":1757993214115,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_cleanup::finalizer","time":{"start":1757993214115,"stop":1757993214115,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_cleanup::finalizer","time":{"start":1757993214115,"stop":1757993219538,"duration":5423},"status":"passed","steps":[{"name":"Post-test cleanup","time":{"start":1757993214115,"stop":1757993219538,"duration":5423},"status":"passed","steps":[],"attachments":[{"uid":"22c977637f10e461","name":"Cleanup note","source":"22c977637f10e461.txt","type":"text/plain","size":29}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},{"name":"api_helper::finalizer","time":{"start":1757993219538,"stop":1757993219539,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_function_scoped_runner::0","time":{"start":1757993219540,"stop":1757993219540,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"suite","value":"UI Signup"},{"name":"parentSuite","value":"UI Tests"},{"name":"tag","value":"asyncio"},{"name":"subSuite","value":"TestUISignup"},{"name":"host","value":"runnervmf4ws1"},{"name":"thread","value":"3797-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_cases.tests_ui.test_ui_signup"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":true,"retry":true,"extra":{"categories":[],"tags":["asyncio"]},"source":"36e91af1e9bab7b4.json","parameterValues":[]}