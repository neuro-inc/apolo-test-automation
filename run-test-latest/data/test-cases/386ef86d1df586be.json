{"uid":"386ef86d1df586be","name":"User removes organization via CLI","fullName":"tests.test_cases.tests_cli.test_organization_structure_setup.TestCLIOrganizationStructureSetup#test_remove_organization_cli","historyId":"a5aed9e26487d1557b98b4ed8dc5d667","time":{"start":1757730578316,"stop":1757730599254,"duration":20938},"description":"\n- Login with valid credentials via **UI**.\n- Get Bearer auth token from Playwright local storage.\n- Login with Bearer auth token via **CLI**.\n- Create first organization via **CLI**.\n- Create second organization via **CLI**.\n\n### Verify that:\n\n- User can remove organization via **CLI**.\n","descriptionHtml":"<div style='line-height:1.6;'><ul>\n<li>Login with valid credentials via <strong>UI</strong>.</li>\n<li>Get Bearer auth token from Playwright local storage.</li>\n<li>Login with Bearer auth token via <strong>CLI</strong>.</li>\n<li>Create first organization via <strong>CLI</strong>.</li>\n<li>Create second organization via <strong>CLI</strong>.</li>\n</ul>\n<h3>Verify that:</h3>\n<ul>\n<li>User can remove organization via <strong>CLI</strong>.</li>\n</ul></div>","status":"failed","statusMessage":"AssertionError: [AssertionError] during step: Verify organization_count\nMessage: Expected 1 organizations, got 0","statusTrace":"tests/reporting_hooks/reporting.py:49: in wrapper\n    result = await func(*args, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^\ntests/test_cases/steps/cli_steps/comonent_steps_impl/admin_steps.py:22: in verify_cli_organization_count\n    assert len(organizations) == count, (\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^\nE   AssertionError: Expected 1 organizations, got 0\n\nThe above exception was the direct cause of the following exception:\ntests/test_cases/tests_cli/test_organization_structure_setup.py:94: in test_remove_organization_cli\n    await self._cli_steps.admin.verify_cli_organization_count(1)\ntests/reporting_hooks/reporting.py:58: in wrapper\n    raise AssertionError(formatted_msg) from e\nE   AssertionError: [AssertionError] during step: Verify organization_count\nE   Message: Expected 1 organizations, got 0","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"delete_output_dir","time":{"start":1757727038919,"stop":1757727038919,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"pytestconfig","time":{"start":1757727038919,"stop":1757727038919,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delay_worker_start","time":{"start":1757727038920,"stop":1757727053920,"duration":15000},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop_policy","time":{"start":1757727038920,"stop":1757727038920,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_verify_url","time":{"start":1757727038920,"stop":1757727038920,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"base_url","time":{"start":1757727038920,"stop":1757727038920,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ensure_storage_directories","time":{"start":1757727053921,"stop":1757727053921,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_config","time":{"start":1757730575653,"stop":1757730575657,"duration":4},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_function_scoped_runner","time":{"start":1757730575657,"stop":1757730575657,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"page_manager","time":{"start":1757730575657,"stop":1757730577798,"duration":2141},"status":"passed","steps":[],"attachments":[{"uid":"dbc4ba399c8b94ab","name":"HTTP 200 - GET config","source":"dbc4ba399c8b94ab.txt","type":"text/plain","size":654}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},{"name":"data_manager","time":{"start":1757730577798,"stop":1757730577798,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"users_manager","time":{"start":1757730577798,"stop":1757730577799,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"api_helper","time":{"start":1757730577799,"stop":1757730577799,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"apolo_cli","time":{"start":1757730577799,"stop":1757730577799,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_cleanup","time":{"start":1757730577799,"stop":1757730577800,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup","time":{"start":1757730577800,"stop":1757730578315,"duration":515},"status":"passed","steps":[{"name":"Verify Apolo CLI client is installed","time":{"start":1757730577800,"stop":1757730578315,"duration":515},"status":"passed","steps":[],"attachments":[{"uid":"7c013098258b0048","name":"Executed CLI command","source":"7c013098258b0048.txt","type":"text/plain","size":15},{"uid":"599f115313d3078e","name":"Executed CLI command output","source":"599f115313d3078e.txt","type":"text/plain","size":28}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"add_page_manager","time":{"start":1757730577800,"stop":1757730577800,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_inject_fixtures","time":{"start":1757730577800,"stop":1757730577800,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"\n- Login with valid credentials via **UI**.\n- Get Bearer auth token from Playwright local storage.\n- Login with Bearer auth token via **CLI**.\n- Create first organization via **CLI**.\n- Create second organization via **CLI**.\n\n### Verify that:\n\n- User can remove organization via **CLI**.\n","descriptionHtml":"<div style='line-height:1.6;'><ul>\n<li>Login with valid credentials via <strong>UI</strong>.</li>\n<li>Get Bearer auth token from Playwright local storage.</li>\n<li>Login with Bearer auth token via <strong>CLI</strong>.</li>\n<li>Create first organization via <strong>CLI</strong>.</li>\n<li>Create second organization via <strong>CLI</strong>.</li>\n</ul>\n<h3>Verify that:</h3>\n<ul>\n<li>User can remove organization via <strong>CLI</strong>.</li>\n</ul></div>","status":"failed","statusMessage":"AssertionError: [AssertionError] during step: Verify organization_count\nMessage: Expected 1 organizations, got 0","statusTrace":"tests/reporting_hooks/reporting.py:49: in wrapper\n    result = await func(*args, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^\ntests/test_cases/steps/cli_steps/comonent_steps_impl/admin_steps.py:22: in verify_cli_organization_count\n    assert len(organizations) == count, (\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^\nE   AssertionError: Expected 1 organizations, got 0\n\nThe above exception was the direct cause of the following exception:\ntests/test_cases/tests_cli/test_organization_structure_setup.py:94: in test_remove_organization_cli\n    await self._cli_steps.admin.verify_cli_organization_count(1)\ntests/reporting_hooks/reporting.py:58: in wrapper\n    raise AssertionError(formatted_msg) from e\nE   AssertionError: [AssertionError] during step: Verify organization_count\nE   Message: Expected 1 organizations, got 0","steps":[{"name":"Login via UI","time":{"start":1757730578316,"stop":1757730582935,"duration":4619},"status":"passed","steps":[{"name":"Click login button","time":{"start":1757730578316,"stop":1757730579169,"duration":853},"status":"passed","steps":[],"attachments":[{"uid":"a503d6c3468e513a","name":"Page URL","source":"a503d6c3468e513a.txt","type":"text/plain","size":33},{"uid":"2569df1110f28a22","name":"Screenshot: Click login button (success)","source":"2569df1110f28a22.png","type":"image/png","size":88578}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Enter email","time":{"start":1757730579169,"stop":1757730579407,"duration":238},"status":"passed","steps":[],"attachments":[{"uid":"9f673a9b565abee","name":"Page URL","source":"9f673a9b565abee.txt","type":"text/plain","size":33},{"uid":"bb796ce3d62ac596","name":"Screenshot: Enter email (success)","source":"bb796ce3d62ac596.png","type":"image/png","size":46809}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Enter password","time":{"start":1757730579408,"stop":1757730579554,"duration":146},"status":"passed","steps":[],"attachments":[{"uid":"cbe4179edab24083","name":"Page URL","source":"cbe4179edab24083.txt","type":"text/plain","size":215},{"uid":"13dcaf5ff448ecfc","name":"Screenshot: Enter password (success)","source":"13dcaf5ff448ecfc.png","type":"image/png","size":46690}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Click Continue button","time":{"start":1757730579554,"stop":1757730581740,"duration":2186},"status":"passed","steps":[],"attachments":[{"uid":"410cfb3a4a6ba35b","name":"Page URL","source":"410cfb3a4a6ba35b.txt","type":"text/plain","size":215},{"uid":"9ad93875f3977d17","name":"HTTP 200 - GET config","source":"9ad93875f3977d17.txt","type":"text/plain","size":752},{"uid":"cfc68fd7aeda320c","name":"HTTP 200 - GET incoming","source":"cfc68fd7aeda320c.txt","type":"text/plain","size":137},{"uid":"7851e16d96f9058f","name":"HTTP 200 - GET regression-l9gfh8gkgb?include=orgs","source":"7851e16d96f9058f.txt","type":"text/plain","size":360},{"uid":"4d30817ef9cee344","name":"HTTP 200 - GET permissions?uri=blob:","source":"4d30817ef9cee344.txt","type":"text/plain","size":163},{"uid":"f02d28d8ed582e05","name":"HTTP 200 - GET regression-l9gfh8gkgb?include=clusters&include=system_role","source":"f02d28d8ed582e05.txt","type":"text/plain","size":388},{"uid":"d04b6165566c30ea","name":"Screenshot: Click Continue button (success)","source":"d04b6165566c30ea.png","type":"image/png","size":51270}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":7,"hasContent":true,"attachmentStep":false},{"name":"Verify that Welcome new user page displayed","time":{"start":1757730581750,"stop":1757730582853,"duration":1103},"status":"passed","steps":[],"attachments":[{"uid":"b1e0f710a4ca4fb4","name":"Page URL","source":"b1e0f710a4ca4fb4.txt","type":"text/plain","size":44},{"uid":"7a055f1f9b512974","name":"Screenshot: Verify that Welcome new user page displayed (success)","source":"7a055f1f9b512974.png","type":"image/png","size":160099}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"307171b81a3544d","name":"Page URL","source":"307171b81a3544d.txt","type":"text/plain","size":33},{"uid":"c8223b80cd89cf0","name":"Screenshot: Login via UI (success)","source":"c8223b80cd89cf0.png","type":"image/png","size":160099}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":5,"attachmentsCount":17,"hasContent":true,"attachmentStep":false},{"name":"Login to apolo CLI with access token","time":{"start":1757730582935,"stop":1757730583696,"duration":761},"status":"passed","steps":[],"attachments":[{"uid":"912c3be1482a8311","name":"Executed CLI command","source":"912c3be1482a8311.txt","type":"text/plain","size":1114},{"uid":"b7806d815677a3bb","name":"Executed CLI command output","source":"b7806d815677a3bb.txt","type":"text/plain","size":184}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Verify organization_count","time":{"start":1757730583696,"stop":1757730587476,"duration":3780},"status":"passed","steps":[],"attachments":[{"uid":"8c2e53323a44f075","name":"Executed CLI command","source":"8c2e53323a44f075.txt","type":"text/plain","size":20},{"uid":"dc88bceeaf0224a","name":"Executed CLI command output","source":"dc88bceeaf0224a.txt","type":"text/plain","size":26}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Add new organization via apolo CLI","time":{"start":1757730587476,"stop":1757730598585,"duration":11109},"status":"passed","steps":[],"attachments":[{"uid":"630b60b60f2174c6","name":"Executed CLI command","source":"630b60b60f2174c6.txt","type":"text/plain","size":1114},{"uid":"3a162ab1f4c0031b","name":"Executed CLI command output","source":"3a162ab1f4c0031b.txt","type":"text/plain","size":264}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Verify organization_count","time":{"start":1757730598585,"stop":1757730599253,"duration":668},"status":"failed","statusMessage":"AssertionError: [AssertionError] during step: Verify organization_count\nMessage: Expected 1 organizations, got 0\n","statusTrace":"  File \"/home/runner/work/apolo-test-automation/apolo-test-automation/tests/reporting_hooks/reporting.py\", line 58, in wrapper\n    raise AssertionError(formatted_msg) from e\n","steps":[],"attachments":[{"uid":"ec95f3909d29944c","name":"Executed CLI command","source":"ec95f3909d29944c.txt","type":"text/plain","size":20},{"uid":"20c2f855895a4a5b","name":"Executed CLI command output","source":"20c2f855895a4a5b.txt","type":"text/plain","size":109}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"e0a9c4147ce4773e","name":"log","source":"e0a9c4147ce4773e.txt","type":"text/plain","size":30209}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":10,"attachmentsCount":26,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"add_page_manager::finalizer","time":{"start":1757730599268,"stop":1757730599268,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_cleanup::finalizer","time":{"start":1757730599269,"stop":1757730599269,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_cleanup::finalizer","time":{"start":1757730599269,"stop":1757730602920,"duration":3651},"status":"passed","steps":[{"name":"Post-test cleanup","time":{"start":1757730599269,"stop":1757730602920,"duration":3651},"status":"passed","steps":[{"name":"Delete organisation: regression-org-50qvdymuq7dc","time":{"start":1757730602562,"stop":1757730602875,"duration":313},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"api_helper::finalizer","time":{"start":1757730602921,"stop":1757730602921,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_function_scoped_runner::0","time":{"start":1757730602922,"stop":1757730602923,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"suite","value":"CLI Organization Structure Setup"},{"name":"parentSuite","value":"CLI Tests"},{"name":"tag","value":"asyncio"},{"name":"subSuite","value":"TestCLIOrganizationStructureSetup"},{"name":"host","value":"runnervmf4ws1"},{"name":"thread","value":"3577-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_cases.tests_cli.test_organization_structure_setup"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":true,"retry":true,"extra":{"categories":[],"tags":["asyncio"]},"source":"386ef86d1df586be.json","parameterValues":[]}