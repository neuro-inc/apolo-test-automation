{"uid":"1646fc4a877d0b68","name":"User switch organization via CLI","fullName":"tests.test_cases.tests_cli.test_organization_structure_setup.TestCLIOrganizationStructureSetup#test_switch_org_cli","historyId":"6d9a96c974d0ffc10b372ad7c4a9cdc5","time":{"start":1759157437998,"stop":1759157475378,"duration":37380},"description":"\n- Login with valid credentials via **UI**.\n- Get Bearer auth token from Playwright local storage.\n- Login with Bearer auth token via **CLI**.\n- Create first organization via **CLI**.\n- Create second organization via **CLI**.\n\n### Verify that:\n\n- User can switch between organizations via **CLI**.\n","descriptionHtml":"<div style='line-height:1.6;'><ul>\n<li>Login with valid credentials via <strong>UI</strong>.</li>\n<li>Get Bearer auth token from Playwright local storage.</li>\n<li>Login with Bearer auth token via <strong>CLI</strong>.</li>\n<li>Create first organization via <strong>CLI</strong>.</li>\n<li>Create second organization via <strong>CLI</strong>.</li>\n</ul>\n<h3>Verify that:</h3>\n<ul>\n<li>User can switch between organizations via <strong>CLI</strong>.</li>\n</ul></div>","status":"failed","statusMessage":"AssertionError: [AssertionError] during step: Verify config show command output\nMessage: Config show verification failed:\nExpected user name 'regression-t9a9ytd7wa', got 'regression-4a7fhuelbd'","statusTrace":"tests/reporting_hooks/reporting.py:49: in wrapper\n    result = await func(*args, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^\ntests/test_cases/steps/cli_steps/comonent_steps_impl/config_steps.py:66: in verify_cli_show_command_output\n    assert await self._apolo_cli.config.verify_config_show_output(\ntests/utils/cli/apolo_components/apolo_config.py:124: in verify_config_show_output\n    raise AssertionError(\nE   AssertionError: Config show verification failed:\nE   Expected user name 'regression-t9a9ytd7wa', got 'regression-4a7fhuelbd'\n\nThe above exception was the direct cause of the following exception:\ntests/test_cases/tests_cli/test_organization_structure_setup.py:151: in test_switch_org_cli\n    await self._cli_steps.config.verify_cli_show_command_output(\ntests/reporting_hooks/reporting.py:58: in wrapper\n    raise AssertionError(formatted_msg) from e\nE   AssertionError: [AssertionError] during step: Verify config show command output\nE   Message: Config show verification failed:\nE   Expected user name 'regression-t9a9ytd7wa', got 'regression-4a7fhuelbd'","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"base_url","time":{"start":1759153330441,"stop":1759153330442,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_verify_url","time":{"start":1759153330442,"stop":1759153330442,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop_policy","time":{"start":1759153330442,"stop":1759153330442,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delay_worker_start","time":{"start":1759153330442,"stop":1759153345443,"duration":15001},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"pytestconfig","time":{"start":1759153330442,"stop":1759153330442,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_output_dir","time":{"start":1759153330442,"stop":1759153330442,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ensure_storage_directories","time":{"start":1759153345443,"stop":1759153345443,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_config","time":{"start":1759157434686,"stop":1759157434689,"duration":3},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"page_manager","time":{"start":1759157434689,"stop":1759157437400,"duration":2711},"status":"passed","steps":[],"attachments":[{"uid":"26c45ad3276af37e","name":"HTTP 200 - GET config","source":"26c45ad3276af37e.txt","type":"text/plain","size":654}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},{"name":"_function_scoped_runner","time":{"start":1759157434689,"stop":1759157434689,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"data_manager","time":{"start":1759157437400,"stop":1759157437401,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"api_helper","time":{"start":1759157437401,"stop":1759157437401,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"users_manager","time":{"start":1759157437401,"stop":1759157437401,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"apolo_cli","time":{"start":1759157437401,"stop":1759157437402,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_cleanup","time":{"start":1759157437402,"stop":1759157437402,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"add_page_manager","time":{"start":1759157437402,"stop":1759157437403,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_inject_fixtures","time":{"start":1759157437403,"stop":1759157437403,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup","time":{"start":1759157437403,"stop":1759157437998,"duration":595},"status":"passed","steps":[{"name":"Verify Apolo CLI client is installed","time":{"start":1759157437403,"stop":1759157437998,"duration":595},"status":"passed","steps":[],"attachments":[{"uid":"98e4eb3150cbd761","name":"Executed CLI command","source":"98e4eb3150cbd761.txt","type":"text/plain","size":15},{"uid":"d2285507d293ea51","name":"Executed CLI command output","source":"d2285507d293ea51.txt","type":"text/plain","size":28}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":2,"hasContent":true,"attachmentStep":false}],"testStage":{"description":"\n- Login with valid credentials via **UI**.\n- Get Bearer auth token from Playwright local storage.\n- Login with Bearer auth token via **CLI**.\n- Create first organization via **CLI**.\n- Create second organization via **CLI**.\n\n### Verify that:\n\n- User can switch between organizations via **CLI**.\n","descriptionHtml":"<div style='line-height:1.6;'><ul>\n<li>Login with valid credentials via <strong>UI</strong>.</li>\n<li>Get Bearer auth token from Playwright local storage.</li>\n<li>Login with Bearer auth token via <strong>CLI</strong>.</li>\n<li>Create first organization via <strong>CLI</strong>.</li>\n<li>Create second organization via <strong>CLI</strong>.</li>\n</ul>\n<h3>Verify that:</h3>\n<ul>\n<li>User can switch between organizations via <strong>CLI</strong>.</li>\n</ul></div>","status":"failed","statusMessage":"AssertionError: [AssertionError] during step: Verify config show command output\nMessage: Config show verification failed:\nExpected user name 'regression-t9a9ytd7wa', got 'regression-4a7fhuelbd'","statusTrace":"tests/reporting_hooks/reporting.py:49: in wrapper\n    result = await func(*args, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^\ntests/test_cases/steps/cli_steps/comonent_steps_impl/config_steps.py:66: in verify_cli_show_command_output\n    assert await self._apolo_cli.config.verify_config_show_output(\ntests/utils/cli/apolo_components/apolo_config.py:124: in verify_config_show_output\n    raise AssertionError(\nE   AssertionError: Config show verification failed:\nE   Expected user name 'regression-t9a9ytd7wa', got 'regression-4a7fhuelbd'\n\nThe above exception was the direct cause of the following exception:\ntests/test_cases/tests_cli/test_organization_structure_setup.py:151: in test_switch_org_cli\n    await self._cli_steps.config.verify_cli_show_command_output(\ntests/reporting_hooks/reporting.py:58: in wrapper\n    raise AssertionError(formatted_msg) from e\nE   AssertionError: [AssertionError] during step: Verify config show command output\nE   Message: Config show verification failed:\nE   Expected user name 'regression-t9a9ytd7wa', got 'regression-4a7fhuelbd'","steps":[{"name":"Login via UI","time":{"start":1759157437999,"stop":1759157445236,"duration":7237},"status":"passed","steps":[{"name":"Click login button","time":{"start":1759157437999,"stop":1759157439272,"duration":1273},"status":"passed","steps":[],"attachments":[{"uid":"eb73fb977f5c4475","name":"Page URL","source":"eb73fb977f5c4475.txt","type":"text/plain","size":33},{"uid":"d795f9fee9266671","name":"Screenshot: Click login button (success)","source":"d795f9fee9266671.png","type":"image/png","size":41586}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Enter email","time":{"start":1759157439272,"stop":1759157439603,"duration":331},"status":"passed","steps":[],"attachments":[{"uid":"a4f2b0068476eae","name":"Page URL","source":"a4f2b0068476eae.txt","type":"text/plain","size":215},{"uid":"9b055758a3c31356","name":"Screenshot: Enter email (success)","source":"9b055758a3c31356.png","type":"image/png","size":46318}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Enter password","time":{"start":1759157439603,"stop":1759157439937,"duration":334},"status":"passed","steps":[],"attachments":[{"uid":"5aefdee7c80cfa0f","name":"Page URL","source":"5aefdee7c80cfa0f.txt","type":"text/plain","size":215},{"uid":"80c01ea73f02ca4a","name":"Screenshot: Enter password (success)","source":"80c01ea73f02ca4a.png","type":"image/png","size":46460}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Click Continue button","time":{"start":1759157439937,"stop":1759157444020,"duration":4083},"status":"passed","steps":[],"attachments":[{"uid":"b9877ba4e908194c","name":"Page URL","source":"b9877ba4e908194c.txt","type":"text/plain","size":215},{"uid":"351110a629a6578c","name":"HTTP 200 - GET config","source":"351110a629a6578c.txt","type":"text/plain","size":752},{"uid":"458b810da1dc62af","name":"HTTP 200 - GET regression-t9a9ytd7wa?include=clusters&include=system_role","source":"458b810da1dc62af.txt","type":"text/plain","size":388},{"uid":"6c5fdd660d72dedc","name":"HTTP 200 - GET permissions?uri=blob:","source":"6c5fdd660d72dedc.txt","type":"text/plain","size":163},{"uid":"bb075ce4704325d5","name":"HTTP 200 - GET incoming","source":"bb075ce4704325d5.txt","type":"text/plain","size":137},{"uid":"810869c813ff6f94","name":"HTTP 200 - GET regression-t9a9ytd7wa?include=orgs","source":"810869c813ff6f94.txt","type":"text/plain","size":360},{"uid":"4fffd0b81cb3c847","name":"Screenshot: Click Continue button (success)","source":"4fffd0b81cb3c847.png","type":"image/png","size":160706}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":7,"hasContent":true,"attachmentStep":false},{"name":"Verify that Welcome new user page displayed","time":{"start":1759157444031,"stop":1759157445142,"duration":1111},"status":"passed","steps":[],"attachments":[{"uid":"599f188e17dfe672","name":"Page URL","source":"599f188e17dfe672.txt","type":"text/plain","size":44},{"uid":"94bcebf6ac02ce96","name":"Screenshot: Verify that Welcome new user page displayed (success)","source":"94bcebf6ac02ce96.png","type":"image/png","size":160706}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"e53a54dc9b6d8c66","name":"Page URL","source":"e53a54dc9b6d8c66.txt","type":"text/plain","size":33},{"uid":"8b3a37eb06d8b3a6","name":"Screenshot: Login via UI (success)","source":"8b3a37eb06d8b3a6.png","type":"image/png","size":160706}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":5,"attachmentsCount":17,"hasContent":true,"attachmentStep":false},{"name":"Login to apolo CLI with access token","time":{"start":1759157445236,"stop":1759157446178,"duration":942},"status":"passed","steps":[],"attachments":[{"uid":"6f8ddda25644f427","name":"Executed CLI command","source":"6f8ddda25644f427.txt","type":"text/plain","size":1114},{"uid":"f26bd98a149fc8ed","name":"Executed CLI command output","source":"f26bd98a149fc8ed.txt","type":"text/plain","size":184}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Add new organization via apolo CLI","time":{"start":1759157446178,"stop":1759157460174,"duration":13996},"status":"passed","steps":[],"attachments":[{"uid":"1dca57ec6421ed11","name":"Executed CLI command","source":"1dca57ec6421ed11.txt","type":"text/plain","size":47},{"uid":"16569c29c7feeb31","name":"Executed CLI command output","source":"16569c29c7feeb31.txt","type":"text/plain","size":0}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Add new organization via apolo CLI","time":{"start":1759157460174,"stop":1759157471878,"duration":11704},"status":"passed","steps":[],"attachments":[{"uid":"ad5a95b63923238f","name":"Executed CLI command","source":"ad5a95b63923238f.txt","type":"text/plain","size":47},{"uid":"a4b06ebf8f52dce","name":"Executed CLI command output","source":"a4b06ebf8f52dce.txt","type":"text/plain","size":0}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Switch organization via CLI","time":{"start":1759157471879,"stop":1759157472700,"duration":821},"status":"passed","steps":[],"attachments":[{"uid":"d65dbf2501f6a9de","name":"Executed CLI command","source":"d65dbf2501f6a9de.txt","type":"text/plain","size":51},{"uid":"5e7a72320e2f0458","name":"Executed CLI command output","source":"5e7a72320e2f0458.txt","type":"text/plain","size":51}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Run config show command via CLI","time":{"start":1759157472700,"stop":1759157475376,"duration":2676},"status":"passed","steps":[],"attachments":[{"uid":"23eaaf244c7c42be","name":"Executed CLI command","source":"23eaaf244c7c42be.txt","type":"text/plain","size":17},{"uid":"6a1fdd5d3be836f9","name":"Executed CLI command output","source":"6a1fdd5d3be836f9.txt","type":"text/plain","size":3640}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Verify config show command output","time":{"start":1759157475376,"stop":1759157475377,"duration":1},"status":"failed","statusMessage":"AssertionError: [AssertionError] during step: Verify config show command output\nMessage: Config show verification failed:\nExpected user name 'regression-t9a9ytd7wa', got 'regression-4a7fhuelbd'\n","statusTrace":"  File \"/home/runner/work/apolo-test-automation/apolo-test-automation/tests/reporting_hooks/reporting.py\", line 58, in wrapper\n    raise AssertionError(formatted_msg) from e\n","steps":[],"attachments":[{"uid":"a767ee0f20241863","name":"Executed CLI command","source":"a767ee0f20241863.txt","type":"text/plain","size":17},{"uid":"62b1454b46208752","name":"Executed CLI command output","source":"62b1454b46208752.txt","type":"text/plain","size":3640}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"af7a0fbd4a9833b9","name":"log","source":"af7a0fbd4a9833b9.txt","type":"text/plain","size":16363}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":12,"attachmentsCount":30,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"setup_cleanup::finalizer","time":{"start":1759157475408,"stop":1759157475408,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_cleanup::finalizer","time":{"start":1759157475408,"stop":1759157482410,"duration":7002},"status":"passed","steps":[{"name":"Post-test cleanup","time":{"start":1759157475408,"stop":1759157482410,"duration":7002},"status":"passed","steps":[],"attachments":[{"uid":"f8b54abb116127cf","name":"Cleanup note","source":"f8b54abb116127cf.txt","type":"text/plain","size":29}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},{"name":"add_page_manager::finalizer","time":{"start":1759157475408,"stop":1759157475408,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"api_helper::finalizer","time":{"start":1759157482411,"stop":1759157482411,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_function_scoped_runner::0","time":{"start":1759157482412,"stop":1759157482413,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"suite","value":"CLI Organization Structure Setup"},{"name":"parentSuite","value":"CLI Tests"},{"name":"tag","value":"asyncio"},{"name":"subSuite","value":"TestCLIOrganizationStructureSetup"},{"name":"host","value":"runnervm3ublj"},{"name":"thread","value":"3596-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_cases.tests_cli.test_organization_structure_setup"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":true,"retry":true,"extra":{"categories":[],"tags":["asyncio"]},"source":"1646fc4a877d0b68.json","parameterValues":[]}