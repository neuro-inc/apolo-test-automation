{"uid":"e0b0d0df8fbed10d","name":"User removes organization via CLI","fullName":"tests.test_cases.tests_cli.test_organization_structure_setup.TestCLIOrganizationStructureSetup#test_remove_organization_cli","historyId":"a5aed9e26487d1557b98b4ed8dc5d667","time":{"start":1755915533358,"stop":1755915566017,"duration":32659},"description":"\n- Login with valid credentials via **UI**.\n- Get Bearer auth token from Playwright local storage.\n- Login with Bearer auth token via **CLI**.\n- Create first organization via **CLI**.\n- Create second organization via **CLI**.\n\n### Verify that:\n\n- User can remove organization via **CLI**.\n","descriptionHtml":"<div style='line-height:1.6;'><ul>\n<li>Login with valid credentials via <strong>UI</strong>.</li>\n<li>Get Bearer auth token from Playwright local storage.</li>\n<li>Login with Bearer auth token via <strong>CLI</strong>.</li>\n<li>Create first organization via <strong>CLI</strong>.</li>\n<li>Create second organization via <strong>CLI</strong>.</li>\n</ul>\n<h3>Verify that:</h3>\n<ul>\n<li>User can remove organization via <strong>CLI</strong>.</li>\n</ul></div>","status":"failed","statusMessage":"AssertionError: [AssertionError] during step: Verify organization_count\nMessage: Expected 0 organizations, got 1","statusTrace":"tests/reporting_hooks/reporting.py:49: in wrapper\n    result = await func(*args, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^\ntests/test_cases/steps/cli_steps/comonent_steps_impl/admin_steps.py:22: in verify_cli_organization_count\n    assert len(organizations) == count, (\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^\nE   AssertionError: Expected 0 organizations, got 1\n\nThe above exception was the direct cause of the following exception:\ntests/test_cases/tests_cli/test_organization_structure_setup.py:98: in test_remove_organization_cli\n    await self._cli_steps.admin.verify_cli_organization_count(0)\ntests/reporting_hooks/reporting.py:58: in wrapper\n    raise AssertionError(formatted_msg) from e\nE   AssertionError: [AssertionError] during step: Verify organization_count\nE   Message: Expected 0 organizations, got 1","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"pytestconfig","time":{"start":1755912761574,"stop":1755912761574,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_output_dir","time":{"start":1755912761574,"stop":1755912761574,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop_policy","time":{"start":1755912761574,"stop":1755912761574,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"base_url","time":{"start":1755912761575,"stop":1755912761575,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delay_worker_start","time":{"start":1755912761575,"stop":1755912776575,"duration":15000},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_verify_url","time":{"start":1755912761575,"stop":1755912761575,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ensure_storage_directories","time":{"start":1755912776576,"stop":1755912776576,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_config","time":{"start":1755915530444,"stop":1755915530447,"duration":3},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"page_manager","time":{"start":1755915530447,"stop":1755915532867,"duration":2420},"status":"passed","steps":[],"attachments":[{"uid":"eb6a2842fc0dd74c","name":"HTTP 200 - GET config","source":"eb6a2842fc0dd74c.txt","type":"text/plain","size":654}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},{"name":"_function_scoped_runner","time":{"start":1755915530447,"stop":1755915530447,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"data_manager","time":{"start":1755915532867,"stop":1755915532867,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"api_helper","time":{"start":1755915532867,"stop":1755915532867,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"users_manager","time":{"start":1755915532867,"stop":1755915532867,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_inject_fixtures","time":{"start":1755915532868,"stop":1755915532869,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"add_page_manager","time":{"start":1755915532868,"stop":1755915532868,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_cleanup","time":{"start":1755915532868,"stop":1755915532868,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"apolo_cli","time":{"start":1755915532868,"stop":1755915532868,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup","time":{"start":1755915532869,"stop":1755915533358,"duration":489},"status":"passed","steps":[{"name":"Verify Apolo CLI client is installed","time":{"start":1755915532869,"stop":1755915533358,"duration":489},"status":"passed","steps":[],"attachments":[{"uid":"7f9ff593c1e77858","name":"Executed CLI command","source":"7f9ff593c1e77858.txt","type":"text/plain","size":15},{"uid":"7b2b1c899d5e67d6","name":"Executed CLI command output","source":"7b2b1c899d5e67d6.txt","type":"text/plain","size":28}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":2,"hasContent":true,"attachmentStep":false}],"testStage":{"description":"\n- Login with valid credentials via **UI**.\n- Get Bearer auth token from Playwright local storage.\n- Login with Bearer auth token via **CLI**.\n- Create first organization via **CLI**.\n- Create second organization via **CLI**.\n\n### Verify that:\n\n- User can remove organization via **CLI**.\n","descriptionHtml":"<div style='line-height:1.6;'><ul>\n<li>Login with valid credentials via <strong>UI</strong>.</li>\n<li>Get Bearer auth token from Playwright local storage.</li>\n<li>Login with Bearer auth token via <strong>CLI</strong>.</li>\n<li>Create first organization via <strong>CLI</strong>.</li>\n<li>Create second organization via <strong>CLI</strong>.</li>\n</ul>\n<h3>Verify that:</h3>\n<ul>\n<li>User can remove organization via <strong>CLI</strong>.</li>\n</ul></div>","status":"failed","statusMessage":"AssertionError: [AssertionError] during step: Verify organization_count\nMessage: Expected 0 organizations, got 1","statusTrace":"tests/reporting_hooks/reporting.py:49: in wrapper\n    result = await func(*args, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^\ntests/test_cases/steps/cli_steps/comonent_steps_impl/admin_steps.py:22: in verify_cli_organization_count\n    assert len(organizations) == count, (\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^\nE   AssertionError: Expected 0 organizations, got 1\n\nThe above exception was the direct cause of the following exception:\ntests/test_cases/tests_cli/test_organization_structure_setup.py:98: in test_remove_organization_cli\n    await self._cli_steps.admin.verify_cli_organization_count(0)\ntests/reporting_hooks/reporting.py:58: in wrapper\n    raise AssertionError(formatted_msg) from e\nE   AssertionError: [AssertionError] during step: Verify organization_count\nE   Message: Expected 0 organizations, got 1","steps":[{"name":"Login via UI","time":{"start":1755915533359,"stop":1755915539109,"duration":5750},"status":"passed","steps":[{"name":"Click login button","time":{"start":1755915533360,"stop":1755915534541,"duration":1181},"status":"passed","steps":[],"attachments":[{"uid":"8758caa0f72d8eab","name":"Page URL","source":"8758caa0f72d8eab.txt","type":"text/plain","size":33},{"uid":"ef67302e90c10c64","name":"Screenshot: Click login button (success)","source":"ef67302e90c10c64.png","type":"image/png","size":41576}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Enter email","time":{"start":1755915534541,"stop":1755915534690,"duration":149},"status":"passed","steps":[],"attachments":[{"uid":"4664dc49f8b154db","name":"Page URL","source":"4664dc49f8b154db.txt","type":"text/plain","size":215},{"uid":"2d291e35cfafa37a","name":"Screenshot: Enter email (success)","source":"2d291e35cfafa37a.png","type":"image/png","size":45656}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Enter password","time":{"start":1755915534690,"stop":1755915534858,"duration":168},"status":"passed","steps":[],"attachments":[{"uid":"dd480a2c9262f41e","name":"Page URL","source":"dd480a2c9262f41e.txt","type":"text/plain","size":215},{"uid":"b7a9b375c7692f89","name":"Screenshot: Enter password (success)","source":"b7a9b375c7692f89.png","type":"image/png","size":46450}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Click Continue button","time":{"start":1755915534858,"stop":1755915537856,"duration":2998},"status":"passed","steps":[],"attachments":[{"uid":"bb74d026bf6c4659","name":"Page URL","source":"bb74d026bf6c4659.txt","type":"text/plain","size":215},{"uid":"324eca12df8afaba","name":"HTTP 200 - GET config","source":"324eca12df8afaba.txt","type":"text/plain","size":752},{"uid":"d9817bbd8008ed31","name":"HTTP 200 - GET permissions?uri=blob:","source":"d9817bbd8008ed31.txt","type":"text/plain","size":163},{"uid":"8c9412a1dbd97da2","name":"HTTP 200 - GET regression-zt2k8sf48a?include=orgs","source":"8c9412a1dbd97da2.txt","type":"text/plain","size":360},{"uid":"b06a82e03b0ba988","name":"HTTP 200 - GET incoming","source":"b06a82e03b0ba988.txt","type":"text/plain","size":137},{"uid":"4c8f7b8b0fa72463","name":"HTTP 200 - GET regression-zt2k8sf48a?include=clusters&include=system_role","source":"4c8f7b8b0fa72463.txt","type":"text/plain","size":388},{"uid":"652984f9f0e3a29","name":"Screenshot: Click Continue button (success)","source":"652984f9f0e3a29.png","type":"image/png","size":160437}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":7,"hasContent":true,"attachmentStep":false},{"name":"Verify that Welcome new user page displayed","time":{"start":1755915537867,"stop":1755915538995,"duration":1128},"status":"passed","steps":[],"attachments":[{"uid":"fc4f7c144b64a809","name":"Page URL","source":"fc4f7c144b64a809.txt","type":"text/plain","size":44},{"uid":"6bc99fa5cafadf38","name":"Screenshot: Verify that Welcome new user page displayed (success)","source":"6bc99fa5cafadf38.png","type":"image/png","size":160437}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"5d8449a095b01ebd","name":"Page URL","source":"5d8449a095b01ebd.txt","type":"text/plain","size":33},{"uid":"2912b8399cef6ab8","name":"Screenshot: Login via UI (success)","source":"2912b8399cef6ab8.png","type":"image/png","size":160437}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":5,"attachmentsCount":17,"hasContent":true,"attachmentStep":false},{"name":"Login to apolo CLI with access token","time":{"start":1755915539109,"stop":1755915539981,"duration":872},"status":"passed","steps":[],"attachments":[{"uid":"127333daca598a94","name":"Executed CLI command","source":"127333daca598a94.txt","type":"text/plain","size":1114},{"uid":"a9d6ea989aea2db","name":"Executed CLI command output","source":"a9d6ea989aea2db.txt","type":"text/plain","size":184}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Verify organization_count","time":{"start":1755915539981,"stop":1755915544566,"duration":4585},"status":"passed","steps":[],"attachments":[{"uid":"2c6c58e0429a98db","name":"Executed CLI command","source":"2c6c58e0429a98db.txt","type":"text/plain","size":20},{"uid":"672602d8a366f260","name":"Executed CLI command output","source":"672602d8a366f260.txt","type":"text/plain","size":26}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Add new organization via apolo CLI","time":{"start":1755915544566,"stop":1755915553381,"duration":8815},"status":"passed","steps":[],"attachments":[{"uid":"20c77c46d86b87ca","name":"Executed CLI command","source":"20c77c46d86b87ca.txt","type":"text/plain","size":1114},{"uid":"d3c49e7dd2f79ffc","name":"Executed CLI command output","source":"d3c49e7dd2f79ffc.txt","type":"text/plain","size":264}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Verify organization_count","time":{"start":1755915553381,"stop":1755915557474,"duration":4093},"status":"passed","steps":[],"attachments":[{"uid":"8b9337a7a749c71c","name":"Executed CLI command","source":"8b9337a7a749c71c.txt","type":"text/plain","size":20},{"uid":"4078ff4c34b78504","name":"Executed CLI command output","source":"4078ff4c34b78504.txt","type":"text/plain","size":149}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Verify organization is listed in the CLI output","time":{"start":1755915557474,"stop":1755915557474,"duration":0},"status":"passed","steps":[],"attachments":[{"uid":"21d970582222de1f","name":"Executed CLI command","source":"21d970582222de1f.txt","type":"text/plain","size":20},{"uid":"a336bfe213086f1d","name":"Executed CLI command output","source":"a336bfe213086f1d.txt","type":"text/plain","size":149}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Remove organization via CLI","time":{"start":1755915557474,"stop":1755915561901,"duration":4427},"status":"passed","steps":[],"attachments":[{"uid":"6fb51f4e869f2fed","name":"Executed CLI command","source":"6fb51f4e869f2fed.txt","type":"text/plain","size":58},{"uid":"1b23fb77bcf7d05a","name":"Executed CLI command output","source":"1b23fb77bcf7d05a.txt","type":"text/plain","size":0}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Verify organization_count","time":{"start":1755915561901,"stop":1755915566016,"duration":4115},"status":"failed","statusMessage":"AssertionError: [AssertionError] during step: Verify organization_count\nMessage: Expected 0 organizations, got 1\n","statusTrace":"  File \"/home/runner/work/apolo-test-automation/apolo-test-automation/tests/reporting_hooks/reporting.py\", line 58, in wrapper\n    raise AssertionError(formatted_msg) from e\n","steps":[],"attachments":[{"uid":"6bba9fc2efbb60a9","name":"Executed CLI command","source":"6bba9fc2efbb60a9.txt","type":"text/plain","size":20},{"uid":"79cb86ca66452d9d","name":"Executed CLI command output","source":"79cb86ca66452d9d.txt","type":"text/plain","size":149}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"ab1bb26c19f387f7","name":"log","source":"ab1bb26c19f387f7.txt","type":"text/plain","size":15388}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":13,"attachmentsCount":32,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"add_page_manager::finalizer","time":{"start":1755915566032,"stop":1755915566033,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_cleanup::finalizer","time":{"start":1755915566033,"stop":1755915569624,"duration":3591},"status":"passed","steps":[{"name":"Post-test cleanup","time":{"start":1755915566033,"stop":1755915569624,"duration":3591},"status":"passed","steps":[],"attachments":[{"uid":"1b9b4ca5084db344","name":"Cleanup note","source":"1b9b4ca5084db344.txt","type":"text/plain","size":29}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},{"name":"api_helper::finalizer","time":{"start":1755915569624,"stop":1755915569625,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_function_scoped_runner::0","time":{"start":1755915569626,"stop":1755915569626,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"suite","value":"CLI Organization Structure Setup"},{"name":"parentSuite","value":"CLI Tests"},{"name":"tag","value":"asyncio"},{"name":"subSuite","value":"TestCLIOrganizationStructureSetup"},{"name":"host","value":"pkrvmqc4gcfdwos"},{"name":"thread","value":"5949-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_cases.tests_cli.test_organization_structure_setup"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":true,"retry":true,"extra":{"categories":[],"tags":["asyncio"]},"source":"e0b0d0df8fbed10d.json","parameterValues":[]}