{"uid":"593f944c9958115b","name":"User switch organization via CLI","fullName":"tests.test_cases.tests_cli.test_organization_structure_setup.TestCLIOrganizationStructureSetup#test_switch_org_cli","historyId":"6d9a96c974d0ffc10b372ad7c4a9cdc5","time":{"start":1758767762502,"stop":1758767803878,"duration":41376},"description":"\n- Login with valid credentials via **UI**.\n- Get Bearer auth token from Playwright local storage.\n- Login with Bearer auth token via **CLI**.\n- Create first organization via **CLI**.\n- Create second organization via **CLI**.\n\n### Verify that:\n\n- User can switch between organizations via **CLI**.\n","descriptionHtml":"<div style='line-height:1.6;'><ul>\n<li>Login with valid credentials via <strong>UI</strong>.</li>\n<li>Get Bearer auth token from Playwright local storage.</li>\n<li>Login with Bearer auth token via <strong>CLI</strong>.</li>\n<li>Create first organization via <strong>CLI</strong>.</li>\n<li>Create second organization via <strong>CLI</strong>.</li>\n</ul>\n<h3>Verify that:</h3>\n<ul>\n<li>User can switch between organizations via <strong>CLI</strong>.</li>\n</ul></div>","status":"failed","statusMessage":"AssertionError: [AssertionError] during step: Switch organization via CLI\nMessage: Usage: apolo config switch-org [OPTIONS] ORG_NAME\nTry 'apolo config switch-org --help' for help.\n\nError: Invalid value for 'ORG_NAME': Org regression-org-randecf2k02p is not valid, available orgs are {regression-org-esyakd0clc8w}","statusTrace":"tests/reporting_hooks/reporting.py:49: in wrapper\n    result = await func(*args, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^\ntests/test_cases/steps/cli_steps/comonent_steps_impl/config_steps.py:55: in cli_switch_org\n    assert result, error_message\n           ^^^^^^\nE   AssertionError: Usage: apolo config switch-org [OPTIONS] ORG_NAME\nE   Try 'apolo config switch-org --help' for help.\nE   \nE   Error: Invalid value for 'ORG_NAME': Org regression-org-randecf2k02p is not valid, available orgs are {regression-org-esyakd0clc8w}\n\nThe above exception was the direct cause of the following exception:\ntests/test_cases/tests_cli/test_organization_structure_setup.py:149: in test_switch_org_cli\n    await self._cli_steps.config.cli_switch_org(org_name=org.org_name)\ntests/reporting_hooks/reporting.py:58: in wrapper\n    raise AssertionError(formatted_msg) from e\nE   AssertionError: [AssertionError] during step: Switch organization via CLI\nE   Message: Usage: apolo config switch-org [OPTIONS] ORG_NAME\nE   Try 'apolo config switch-org --help' for help.\nE   \nE   Error: Invalid value for 'ORG_NAME': Org regression-org-randecf2k02p is not valid, available orgs are {regression-org-esyakd0clc8w}","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"delete_output_dir","time":{"start":1758763977760,"stop":1758763977760,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"pytestconfig","time":{"start":1758763977760,"stop":1758763977760,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop_policy","time":{"start":1758763977761,"stop":1758763977761,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delay_worker_start","time":{"start":1758763977761,"stop":1758764007761,"duration":30000},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_verify_url","time":{"start":1758763977761,"stop":1758763977761,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"base_url","time":{"start":1758763977761,"stop":1758763977761,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ensure_storage_directories","time":{"start":1758764007762,"stop":1758764007762,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_config","time":{"start":1758767759562,"stop":1758767759564,"duration":2},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"page_manager","time":{"start":1758767759564,"stop":1758767761978,"duration":2414},"status":"passed","steps":[],"attachments":[{"uid":"f58afd4ce0687636","name":"HTTP 200 - GET config","source":"f58afd4ce0687636.txt","type":"text/plain","size":654}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},{"name":"_function_scoped_runner","time":{"start":1758767759565,"stop":1758767759565,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"apolo_cli","time":{"start":1758767761978,"stop":1758767761979,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"api_helper","time":{"start":1758767761978,"stop":1758767761978,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"data_manager","time":{"start":1758767761978,"stop":1758767761978,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"users_manager","time":{"start":1758767761978,"stop":1758767761978,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"add_page_manager","time":{"start":1758767761979,"stop":1758767761980,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_cleanup","time":{"start":1758767761979,"stop":1758767761979,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_inject_fixtures","time":{"start":1758767761980,"stop":1758767761980,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup","time":{"start":1758767761980,"stop":1758767762501,"duration":521},"status":"passed","steps":[{"name":"Verify Apolo CLI client is installed","time":{"start":1758767761980,"stop":1758767762501,"duration":521},"status":"passed","steps":[],"attachments":[{"uid":"d34751a0d4d03c1d","name":"Executed CLI command","source":"d34751a0d4d03c1d.txt","type":"text/plain","size":15},{"uid":"45bb814213601265","name":"Executed CLI command output","source":"45bb814213601265.txt","type":"text/plain","size":28}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":2,"hasContent":true,"attachmentStep":false}],"testStage":{"description":"\n- Login with valid credentials via **UI**.\n- Get Bearer auth token from Playwright local storage.\n- Login with Bearer auth token via **CLI**.\n- Create first organization via **CLI**.\n- Create second organization via **CLI**.\n\n### Verify that:\n\n- User can switch between organizations via **CLI**.\n","descriptionHtml":"<div style='line-height:1.6;'><ul>\n<li>Login with valid credentials via <strong>UI</strong>.</li>\n<li>Get Bearer auth token from Playwright local storage.</li>\n<li>Login with Bearer auth token via <strong>CLI</strong>.</li>\n<li>Create first organization via <strong>CLI</strong>.</li>\n<li>Create second organization via <strong>CLI</strong>.</li>\n</ul>\n<h3>Verify that:</h3>\n<ul>\n<li>User can switch between organizations via <strong>CLI</strong>.</li>\n</ul></div>","status":"failed","statusMessage":"AssertionError: [AssertionError] during step: Switch organization via CLI\nMessage: Usage: apolo config switch-org [OPTIONS] ORG_NAME\nTry 'apolo config switch-org --help' for help.\n\nError: Invalid value for 'ORG_NAME': Org regression-org-randecf2k02p is not valid, available orgs are {regression-org-esyakd0clc8w}","statusTrace":"tests/reporting_hooks/reporting.py:49: in wrapper\n    result = await func(*args, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^\ntests/test_cases/steps/cli_steps/comonent_steps_impl/config_steps.py:55: in cli_switch_org\n    assert result, error_message\n           ^^^^^^\nE   AssertionError: Usage: apolo config switch-org [OPTIONS] ORG_NAME\nE   Try 'apolo config switch-org --help' for help.\nE   \nE   Error: Invalid value for 'ORG_NAME': Org regression-org-randecf2k02p is not valid, available orgs are {regression-org-esyakd0clc8w}\n\nThe above exception was the direct cause of the following exception:\ntests/test_cases/tests_cli/test_organization_structure_setup.py:149: in test_switch_org_cli\n    await self._cli_steps.config.cli_switch_org(org_name=org.org_name)\ntests/reporting_hooks/reporting.py:58: in wrapper\n    raise AssertionError(formatted_msg) from e\nE   AssertionError: [AssertionError] during step: Switch organization via CLI\nE   Message: Usage: apolo config switch-org [OPTIONS] ORG_NAME\nE   Try 'apolo config switch-org --help' for help.\nE   \nE   Error: Invalid value for 'ORG_NAME': Org regression-org-randecf2k02p is not valid, available orgs are {regression-org-esyakd0clc8w}","steps":[{"name":"Login via UI","time":{"start":1758767762502,"stop":1758767769564,"duration":7062},"status":"passed","steps":[{"name":"Click login button","time":{"start":1758767762503,"stop":1758767763801,"duration":1298},"status":"passed","steps":[],"attachments":[{"uid":"1b7b6815acf20948","name":"Page URL","source":"1b7b6815acf20948.txt","type":"text/plain","size":33},{"uid":"47bf186eef74dd7d","name":"Screenshot: Click login button (success)","source":"47bf186eef74dd7d.png","type":"image/png","size":41621}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Enter email","time":{"start":1758767763801,"stop":1758767763949,"duration":148},"status":"passed","steps":[],"attachments":[{"uid":"4ce07d9bcab7636a","name":"Page URL","source":"4ce07d9bcab7636a.txt","type":"text/plain","size":215},{"uid":"c0886bd54daaac48","name":"Screenshot: Enter email (success)","source":"c0886bd54daaac48.png","type":"image/png","size":45672}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Enter password","time":{"start":1758767763949,"stop":1758767764087,"duration":138},"status":"passed","steps":[],"attachments":[{"uid":"bb348b31698831c2","name":"Page URL","source":"bb348b31698831c2.txt","type":"text/plain","size":215},{"uid":"3f133add91f9dada","name":"Screenshot: Enter password (success)","source":"3f133add91f9dada.png","type":"image/png","size":46177}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Click Continue button","time":{"start":1758767764087,"stop":1758767768385,"duration":4298},"status":"passed","steps":[],"attachments":[{"uid":"65f9f2e131eb1553","name":"Page URL","source":"65f9f2e131eb1553.txt","type":"text/plain","size":215},{"uid":"1871ce4f7b4106ec","name":"HTTP 200 - GET config","source":"1871ce4f7b4106ec.txt","type":"text/plain","size":752},{"uid":"41892796505f913a","name":"HTTP 200 - GET permissions?uri=blob:","source":"41892796505f913a.txt","type":"text/plain","size":163},{"uid":"73ecf66c85531582","name":"HTTP 200 - GET incoming","source":"73ecf66c85531582.txt","type":"text/plain","size":137},{"uid":"b9389a5108633adc","name":"HTTP 200 - GET regression-zqz7usbq1c?include=clusters&include=system_role","source":"b9389a5108633adc.txt","type":"text/plain","size":388},{"uid":"39ee1deecd3060ec","name":"HTTP 200 - GET regression-zqz7usbq1c?include=orgs","source":"39ee1deecd3060ec.txt","type":"text/plain","size":360},{"uid":"d6a06041d6a23371","name":"Screenshot: Click Continue button (success)","source":"d6a06041d6a23371.png","type":"image/png","size":159045}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":7,"hasContent":true,"attachmentStep":false},{"name":"Verify that Welcome new user page displayed","time":{"start":1758767768396,"stop":1758767769486,"duration":1090},"status":"passed","steps":[],"attachments":[{"uid":"df2594408e2dfe48","name":"Page URL","source":"df2594408e2dfe48.txt","type":"text/plain","size":44},{"uid":"eab6ee21d02837f8","name":"Screenshot: Verify that Welcome new user page displayed (success)","source":"eab6ee21d02837f8.png","type":"image/png","size":159045}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"bbec491430476d6a","name":"Page URL","source":"bbec491430476d6a.txt","type":"text/plain","size":33},{"uid":"2fbbef6fcbb3b822","name":"Screenshot: Login via UI (success)","source":"2fbbef6fcbb3b822.png","type":"image/png","size":159045}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":5,"attachmentsCount":17,"hasContent":true,"attachmentStep":false},{"name":"Login to apolo CLI with access token","time":{"start":1758767769565,"stop":1758767770507,"duration":942},"status":"passed","steps":[],"attachments":[{"uid":"3a082ec1d5031343","name":"Executed CLI command","source":"3a082ec1d5031343.txt","type":"text/plain","size":1114},{"uid":"c78add6a27e4f805","name":"Executed CLI command output","source":"c78add6a27e4f805.txt","type":"text/plain","size":184}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Add new organization via apolo CLI","time":{"start":1758767770507,"stop":1758767783007,"duration":12500},"status":"passed","steps":[],"attachments":[{"uid":"11b57321756b9b6a","name":"Executed CLI command","source":"11b57321756b9b6a.txt","type":"text/plain","size":1114},{"uid":"775e7f7508886515","name":"Executed CLI command output","source":"775e7f7508886515.txt","type":"text/plain","size":264}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Add new organization via apolo CLI","time":{"start":1758767783007,"stop":1758767803167,"duration":20160},"status":"passed","steps":[],"attachments":[{"uid":"e0366f6859cc0653","name":"Executed CLI command","source":"e0366f6859cc0653.txt","type":"text/plain","size":47},{"uid":"ac020a620e3cca32","name":"Executed CLI command output","source":"ac020a620e3cca32.txt","type":"text/plain","size":0}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Switch organization via CLI","time":{"start":1758767803167,"stop":1758767803877,"duration":710},"status":"failed","statusMessage":"AssertionError: [AssertionError] during step: Switch organization via CLI\nMessage: Usage: apolo config switch-org [OPTIONS] ORG_NAME\nTry 'apolo config switch-org --help' for help.\n\nError: Invalid value for 'ORG_NAME': Org regression-org-randecf2k02p is not valid, available orgs are {regression-org-esyakd0clc8w}\n","statusTrace":"  File \"/home/runner/work/apolo-test-automation/apolo-test-automation/tests/reporting_hooks/reporting.py\", line 58, in wrapper\n    raise AssertionError(formatted_msg) from e\n","steps":[],"attachments":[{"uid":"208c350233c523cb","name":"Executed CLI command","source":"208c350233c523cb.txt","type":"text/plain","size":51},{"uid":"5c72a9df1da09781","name":"Executed CLI command output","source":"5c72a9df1da09781.txt","type":"text/plain","size":229}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"fa45ddfdc9937931","name":"log","source":"fa45ddfdc9937931.txt","type":"text/plain","size":16030}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":10,"attachmentsCount":26,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"add_page_manager::finalizer","time":{"start":1758767803900,"stop":1758767803900,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_cleanup::finalizer","time":{"start":1758767803901,"stop":1758767803901,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_cleanup::finalizer","time":{"start":1758767803901,"stop":1758767809536,"duration":5635},"status":"passed","steps":[{"name":"Post-test cleanup","time":{"start":1758767803901,"stop":1758767809536,"duration":5635},"status":"passed","steps":[{"name":"Delete organisation: regression-org-ialn70q01kt1","time":{"start":1758767808312,"stop":1758767808689,"duration":377},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Delete organisation: regression-org-randecf2k02p","time":{"start":1758767808689,"stop":1758767809495,"duration":806},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":3,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"api_helper::finalizer","time":{"start":1758767809537,"stop":1758767809537,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_function_scoped_runner::0","time":{"start":1758767809538,"stop":1758767809539,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"suite","value":"CLI Organization Structure Setup"},{"name":"parentSuite","value":"CLI Tests"},{"name":"tag","value":"asyncio"},{"name":"subSuite","value":"TestCLIOrganizationStructureSetup"},{"name":"host","value":"runnervmf4ws1"},{"name":"thread","value":"3631-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_cases.tests_cli.test_organization_structure_setup"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":true,"retry":true,"extra":{"categories":[],"tags":["asyncio"]},"source":"593f944c9958115b.json","parameterValues":[]}