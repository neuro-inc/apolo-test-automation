{"uid":"f0a1ff155657fa0a","name":"User with organization logs in with auth token via CLI","fullName":"tests.test_cases.tests_cli.test_cli_login.TestCLILogin#test_login_org_with_token_cli","historyId":"075596f237e9dcd99027c3eb0247d079","time":{"start":1757473931227,"stop":1757473966215,"duration":34988},"description":"\n- Login with valid credentials via **UI**.\n- Get Bearer auth token from Playwright local storage.\n- Create organization via **API**.\n\n### Verify that:\n\n- User can login with Bearer auth token via **CLI**.\n- Login output in CLI valid `organization` and no `project` info.\n","descriptionHtml":"<div style='line-height:1.6;'><ul>\n<li>Login with valid credentials via <strong>UI</strong>.</li>\n<li>Get Bearer auth token from Playwright local storage.</li>\n<li>Create organization via <strong>API</strong>.</li>\n</ul>\n<h3>Verify that:</h3>\n<ul>\n<li>User can login with Bearer auth token via <strong>CLI</strong>.</li>\n<li>Login output in CLI valid <span style='background-color:#D3D3D3; padding:2px 4px; border-radius:3px; font-family:monospace;'>organization</span> and no <span style='background-color:#D3D3D3; padding:2px 4px; border-radius:3px; font-family:monospace;'>project</span> info.</li>\n</ul></div>","status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":1,"retriesStatusChange":true,"beforeStages":[{"name":"event_loop_policy","time":{"start":1757467888905,"stop":1757467888905,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_output_dir","time":{"start":1757467888905,"stop":1757467888905,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"base_url","time":{"start":1757467888905,"stop":1757467888905,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"pytestconfig","time":{"start":1757467888905,"stop":1757467888905,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ensure_storage_directories","time":{"start":1757467888906,"stop":1757467888906,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delay_worker_start","time":{"start":1757467888906,"stop":1757467888906,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_verify_url","time":{"start":1757467888906,"stop":1757467888906,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_config","time":{"start":1757473928675,"stop":1757473928678,"duration":3},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"page_manager","time":{"start":1757473928678,"stop":1757473930716,"duration":2038},"status":"passed","steps":[],"attachments":[{"uid":"dbb1fc73c359df53","name":"HTTP 200 - GET config","source":"dbb1fc73c359df53.txt","type":"text/plain","size":654}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},{"name":"_function_scoped_runner","time":{"start":1757473928678,"stop":1757473928678,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"users_manager","time":{"start":1757473930716,"stop":1757473930717,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"data_manager","time":{"start":1757473930716,"stop":1757473930716,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"apolo_cli","time":{"start":1757473930717,"stop":1757473930717,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"api_helper","time":{"start":1757473930717,"stop":1757473930717,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_cleanup","time":{"start":1757473930717,"stop":1757473930718,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"add_page_manager","time":{"start":1757473930718,"stop":1757473930718,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup","time":{"start":1757473930718,"stop":1757473931227,"duration":509},"status":"passed","steps":[{"name":"Verify Apolo CLI client is installed","time":{"start":1757473930718,"stop":1757473931227,"duration":509},"status":"passed","steps":[],"attachments":[{"uid":"c185d34c38c214db","name":"Executed CLI command","source":"c185d34c38c214db.txt","type":"text/plain","size":15},{"uid":"7e6bf580b8c573a2","name":"Executed CLI command output","source":"7e6bf580b8c573a2.txt","type":"text/plain","size":28}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"_inject_fixtures","time":{"start":1757473930718,"stop":1757473930718,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"\n- Login with valid credentials via **UI**.\n- Get Bearer auth token from Playwright local storage.\n- Create organization via **API**.\n\n### Verify that:\n\n- User can login with Bearer auth token via **CLI**.\n- Login output in CLI valid `organization` and no `project` info.\n","descriptionHtml":"<div style='line-height:1.6;'><ul>\n<li>Login with valid credentials via <strong>UI</strong>.</li>\n<li>Get Bearer auth token from Playwright local storage.</li>\n<li>Create organization via <strong>API</strong>.</li>\n</ul>\n<h3>Verify that:</h3>\n<ul>\n<li>User can login with Bearer auth token via <strong>CLI</strong>.</li>\n<li>Login output in CLI valid <span style='background-color:#D3D3D3; padding:2px 4px; border-radius:3px; font-family:monospace;'>organization</span> and no <span style='background-color:#D3D3D3; padding:2px 4px; border-radius:3px; font-family:monospace;'>project</span> info.</li>\n</ul></div>","status":"passed","steps":[{"name":"Login via UI","time":{"start":1757473931228,"stop":1757473944505,"duration":13277},"status":"passed","steps":[{"name":"Click login button","time":{"start":1757473931228,"stop":1757473932393,"duration":1165},"status":"passed","steps":[],"attachments":[{"uid":"e7b0b0c4eabe746","name":"Page URL","source":"e7b0b0c4eabe746.txt","type":"text/plain","size":33},{"uid":"d8764c315604bbc8","name":"Screenshot: Click login button (success)","source":"d8764c315604bbc8.png","type":"image/png","size":41538}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Enter email","time":{"start":1757473932393,"stop":1757473932524,"duration":131},"status":"passed","steps":[],"attachments":[{"uid":"c68e76123df0ba39","name":"Page URL","source":"c68e76123df0ba39.txt","type":"text/plain","size":215},{"uid":"94e8d3c7ab7a287b","name":"Screenshot: Enter email (success)","source":"94e8d3c7ab7a287b.png","type":"image/png","size":46441}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Enter password","time":{"start":1757473932524,"stop":1757473932676,"duration":152},"status":"passed","steps":[],"attachments":[{"uid":"79f6e11c126d5d1a","name":"Page URL","source":"79f6e11c126d5d1a.txt","type":"text/plain","size":215},{"uid":"2f9cace7b9214ec0","name":"Screenshot: Enter password (success)","source":"2f9cace7b9214ec0.png","type":"image/png","size":46948}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Click Continue button","time":{"start":1757473932676,"stop":1757473943306,"duration":10630},"status":"passed","steps":[],"attachments":[{"uid":"2064089ed9c52099","name":"Page URL","source":"2064089ed9c52099.txt","type":"text/plain","size":215},{"uid":"18c303aafd3795a3","name":"HTTP 200 - GET config","source":"18c303aafd3795a3.txt","type":"text/plain","size":752},{"uid":"43d83cf856d0a472","name":"HTTP 200 - GET permissions?uri=blob:","source":"43d83cf856d0a472.txt","type":"text/plain","size":163},{"uid":"66d30dff2b12eb82","name":"HTTP 200 - GET incoming","source":"66d30dff2b12eb82.txt","type":"text/plain","size":137},{"uid":"e99c292019e3a543","name":"HTTP 200 - GET regression-36g2p1z3vl?include=orgs","source":"e99c292019e3a543.txt","type":"text/plain","size":360},{"uid":"9fb47c22e7acb70d","name":"HTTP 200 - GET regression-36g2p1z3vl?include=clusters&include=system_role","source":"9fb47c22e7acb70d.txt","type":"text/plain","size":388},{"uid":"e884b4a4bd231835","name":"Screenshot: Click Continue button (success)","source":"e884b4a4bd231835.png","type":"image/png","size":160744}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":7,"hasContent":true,"attachmentStep":false},{"name":"Verify that Welcome new user page displayed","time":{"start":1757473943324,"stop":1757473944422,"duration":1098},"status":"passed","steps":[],"attachments":[{"uid":"773f1cb317ae4178","name":"Page URL","source":"773f1cb317ae4178.txt","type":"text/plain","size":44},{"uid":"f4fe75cd13d71bde","name":"Screenshot: Verify that Welcome new user page displayed (success)","source":"f4fe75cd13d71bde.png","type":"image/png","size":160744}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"70d46c4b94d1ed2d","name":"Page URL","source":"70d46c4b94d1ed2d.txt","type":"text/plain","size":33},{"uid":"9785ead5c583315b","name":"Screenshot: Login via UI (success)","source":"9785ead5c583315b.png","type":"image/png","size":160744}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":5,"attachmentsCount":17,"hasContent":true,"attachmentStep":false},{"name":"Add organization via API and reload page","time":{"start":1757473944505,"stop":1757473965273,"duration":20768},"status":"passed","steps":[{"name":"Reload page","time":{"start":1757473957907,"stop":1757473965191,"duration":7284},"status":"passed","steps":[],"attachments":[{"uid":"6e04b0059cd795c4","name":"Page URL","source":"6e04b0059cd795c4.txt","type":"text/plain","size":44},{"uid":"32bc0c3c60850eb2","name":"HTTP 200 - GET config","source":"32bc0c3c60850eb2.txt","type":"text/plain","size":1118},{"uid":"a3f1254899c1638","name":"HTTP 200 - GET regression-36g2p1z3vl?include=orgs","source":"a3f1254899c1638.txt","type":"text/plain","size":455},{"uid":"88930d7a44e206fc","name":"HTTP 200 - GET regression-org-79nzjr0r40y2","source":"88930d7a44e206fc.txt","type":"text/plain","size":425},{"uid":"eace2c1547798d6f","name":"HTTP 200 - GET incoming","source":"eace2c1547798d6f.txt","type":"text/plain","size":137},{"uid":"6f8d32f95390d524","name":"HTTP 200 - GET regression-36g2p1z3vl?include=clusters&include=system_role","source":"6f8d32f95390d524.txt","type":"text/plain","size":510},{"uid":"76e09820633128cb","name":"HTTP 200 - GET permissions?uri=blob:","source":"76e09820633128cb.txt","type":"text/plain","size":236},{"uid":"f78754c4db538504","name":"Screenshot: Reload page (success)","source":"f78754c4db538504.png","type":"image/png","size":56051}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":8,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"b01eea669d65de09","name":"Page URL","source":"b01eea669d65de09.txt","type":"text/plain","size":44},{"uid":"58bd379f39f6e06b","name":"Screenshot: Add organization via API and reload page (success)","source":"58bd379f39f6e06b.png","type":"image/png","size":56051}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":10,"hasContent":true,"attachmentStep":false},{"name":"Login to apolo CLI with access token","time":{"start":1757473965274,"stop":1757473966214,"duration":940},"status":"passed","steps":[],"attachments":[{"uid":"f5122ce103b28d28","name":"Executed CLI command","source":"f5122ce103b28d28.txt","type":"text/plain","size":1114},{"uid":"4b8220677e5b7508","name":"Executed CLI command output","source":"4b8220677e5b7508.txt","type":"text/plain","size":264}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Verify CLI login output","time":{"start":1757473966214,"stop":1757473966215,"duration":1},"status":"passed","steps":[],"attachments":[{"uid":"7aa82eab24f868d7","name":"Executed CLI command","source":"7aa82eab24f868d7.txt","type":"text/plain","size":1114},{"uid":"666b83ba669f6f03","name":"Executed CLI command output","source":"666b83ba669f6f03.txt","type":"text/plain","size":264}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"4f2aca234ca9c100","name":"log","source":"4f2aca234ca9c100.txt","type":"text/plain","size":25924}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":10,"attachmentsCount":32,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"add_page_manager::finalizer","time":{"start":1757473966216,"stop":1757473966216,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_cleanup::finalizer","time":{"start":1757473966217,"stop":1757473966217,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_cleanup::finalizer","time":{"start":1757473966217,"stop":1757473971725,"duration":5508},"status":"passed","steps":[{"name":"Post-test cleanup","time":{"start":1757473966217,"stop":1757473971725,"duration":5508},"status":"passed","steps":[{"name":"Delete organisation: regression-org-79nzjr0r40y2","time":{"start":1757473970786,"stop":1757473971686,"duration":900},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"api_helper::finalizer","time":{"start":1757473971726,"stop":1757473971726,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_function_scoped_runner::0","time":{"start":1757473971727,"stop":1757473971728,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"suite","value":"CLI Login"},{"name":"parentSuite","value":"CLI Tests"},{"name":"tag","value":"asyncio"},{"name":"subSuite","value":"TestCLILogin"},{"name":"host","value":"runnervmf4ws1"},{"name":"thread","value":"3561-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_cases.tests_cli.test_cli_login"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"1c3fe92a76ad5c8b","status":"failed","statusDetails":"AssertionError: [AssertionError] during step: Login via UI\nMessage: [AssertionError] during step: Verify that Welcome new user page displayed\nMessage: Locator expected to be visible\nActual value: <element(s) not found> \nCall log:\n  - Expect \"to_be_visible\" with timeout 5000ms\n  - waiting for locator(\"h3.truncate.text-h3\").filter(has_text=\"Welcome, regression-36g2p1z3vl@apolo.us\")","time":{"start":1757473895651,"stop":1757473911429,"duration":15778}}],"categories":[],"history":{"statistic":{"failed":0,"broken":0,"skipped":0,"passed":32,"unknown":0,"total":32},"items":[{"uid":"9da1e98244f14383","status":"passed","time":{"start":1757421803973,"stop":1757421827146,"duration":23173}},{"uid":"2d79776c6ee7afe6","status":"passed","time":{"start":1757387263204,"stop":1757387290846,"duration":27642}},{"uid":"fe559d8fd9bb0595","status":"passed","time":{"start":1757300718637,"stop":1757300741974,"duration":23337}},{"uid":"78b30911f02ab523","status":"passed","time":{"start":1757214723020,"stop":1757214750009,"duration":26989}},{"uid":"23137f9f3a2e7688","status":"passed","time":{"start":1757143896160,"stop":1757143941192,"duration":45032}},{"uid":"d2750d56c57a4c29","status":"passed","time":{"start":1757127963147,"stop":1757127986718,"duration":23571}},{"uid":"3a85eb91fa14d756","status":"passed","time":{"start":1757040993777,"stop":1757041022287,"duration":28510}},{"uid":"aa77f6ab0bc128ee","status":"passed","time":{"start":1756954987019,"stop":1756955009376,"duration":22357}},{"uid":"c84d5944cef3356f","status":"passed","time":{"start":1756868170166,"stop":1756868209703,"duration":39537}},{"uid":"eac0fce541316153","status":"passed","time":{"start":1756805678790,"stop":1756805707595,"duration":28805}},{"uid":"652b91ed5449bf08","status":"passed","time":{"start":1756608823350,"stop":1756608838944,"duration":15594}},{"uid":"5dcacad3a8379b57","status":"passed","time":{"start":1756522479844,"stop":1756522500458,"duration":20614}},{"uid":"6705f35ec90c0fcc","status":"passed","time":{"start":1756436060699,"stop":1756436085745,"duration":25046}},{"uid":"33d8baa722b8e8fc","status":"passed","time":{"start":1756349718816,"stop":1756349743602,"duration":24786}},{"uid":"beb4ca113ea7cbbf","status":"passed","time":{"start":1756177185642,"stop":1756177212460,"duration":26818}},{"uid":"d0d8a1fd8ef74e1","status":"passed","time":{"start":1756090453453,"stop":1756090473357,"duration":19904}},{"uid":"fc2b71a6a7565aa9","status":"passed","time":{"start":1756004169388,"stop":1756004188574,"duration":19186}},{"uid":"50710ff474c88e21","status":"passed","time":{"start":1755917613492,"stop":1755917638618,"duration":25126}},{"uid":"3c67d2cabc0907cc","status":"passed","time":{"start":1755831153410,"stop":1755831173961,"duration":20551}},{"uid":"7c9376fc1c4bf471","status":"passed","time":{"start":1755744643924,"stop":1755744667189,"duration":23265}}]},"tags":["asyncio"]},"source":"f0a1ff155657fa0a.json","parameterValues":[]}