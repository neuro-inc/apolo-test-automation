{"uid":"3978dff30ced7e2a","name":"Admin upload text file via CLI","fullName":"tests.test_cases.tests_cli.test_storage.TestCLIStorage#test_admin_upload_txt_file_cli","historyId":"020d4c95f8db8332deb4ff04ea5e0813","time":{"start":1759892546425,"stop":1759892630929,"duration":84504},"description":"\n- Login with valid credentials via **UI**.\n- Get Bearer auth token from Playwright local storage.\n- Create new organization via **API**.\n- Login with Bearer auth token via **CLI**.\n- Create new project via **CLI**.\n\n### Verify that:\n\n- User can upload `txt` file via **CLI**.\n","descriptionHtml":"<div style='line-height:1.6;'><ul>\n<li>Login with valid credentials via <strong>UI</strong>.</li>\n<li>Get Bearer auth token from Playwright local storage.</li>\n<li>Create new organization via <strong>API</strong>.</li>\n<li>Login with Bearer auth token via <strong>CLI</strong>.</li>\n<li>Create new project via <strong>CLI</strong>.</li>\n</ul>\n<h3>Verify that:</h3>\n<ul>\n<li>User can upload <span style='background-color:#D3D3D3; padding:2px 4px; border-radius:3px; font-family:monospace;'>txt</span> file via <strong>CLI</strong>.</li>\n</ul></div>","status":"failed","statusMessage":"AssertionError: [AssertionError] during step: Upload file via CLI\nMessage: ERROR: The current project is not selected. Please create one with 'apolo admin add-project', or switch to the existing one with 'apolo config switch-project'.","statusTrace":"tests/reporting_hooks/reporting.py:49: in wrapper\n    result = await func(*args, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^\ntests/test_cases/steps/cli_steps/comonent_steps_impl/storage_steps.py:31: in cli_upload_file\n    assert result, error_message\n           ^^^^^^\nE   AssertionError: ERROR: The current project is not selected. Please create one with 'apolo admin add-project', or switch to the existing one with 'apolo config switch-project'.\n\nThe above exception was the direct cause of the following exception:\ntests/test_cases/tests_cli/test_storage.py:201: in test_admin_upload_txt_file_cli\n    await self._cli_steps.storage.cli_upload_file(file_path=file_path)\ntests/reporting_hooks/reporting.py:58: in wrapper\n    raise AssertionError(formatted_msg) from e\nE   AssertionError: [AssertionError] during step: Upload file via CLI\nE   Message: ERROR: The current project is not selected. Please create one with 'apolo admin add-project', or switch to the existing one with 'apolo config switch-project'.","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"test_config","time":{"start":1759892543540,"stop":1759892543544,"duration":4},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"page_manager","time":{"start":1759892543544,"stop":1759892545885,"duration":2341},"status":"passed","steps":[],"attachments":[{"uid":"94172222187ce603","name":"HTTP 200 - GET config","source":"94172222187ce603.txt","type":"text/plain","size":654}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},{"name":"_function_scoped_runner","time":{"start":1759892543544,"stop":1759892543544,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"data_manager","time":{"start":1759892545885,"stop":1759892545886,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"apolo_cli","time":{"start":1759892545886,"stop":1759892545887,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"users_manager","time":{"start":1759892545886,"stop":1759892545886,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"api_helper","time":{"start":1759892545886,"stop":1759892545886,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"add_page_manager","time":{"start":1759892545887,"stop":1759892545888,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_cleanup","time":{"start":1759892545887,"stop":1759892545887,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup","time":{"start":1759892545888,"stop":1759892546425,"duration":537},"status":"passed","steps":[{"name":"Verify Apolo CLI client is installed","time":{"start":1759892545888,"stop":1759892546424,"duration":536},"status":"passed","steps":[],"attachments":[{"uid":"47e0851b686fbc8e","name":"Executed CLI command","source":"47e0851b686fbc8e.txt","type":"text/plain","size":15},{"uid":"2919911edc15e5e3","name":"Executed CLI command output","source":"2919911edc15e5e3.txt","type":"text/plain","size":28}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"_inject_fixtures","time":{"start":1759892545888,"stop":1759892545888,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"\n- Login with valid credentials via **UI**.\n- Get Bearer auth token from Playwright local storage.\n- Create new organization via **API**.\n- Login with Bearer auth token via **CLI**.\n- Create new project via **CLI**.\n\n### Verify that:\n\n- User can upload `txt` file via **CLI**.\n","descriptionHtml":"<div style='line-height:1.6;'><ul>\n<li>Login with valid credentials via <strong>UI</strong>.</li>\n<li>Get Bearer auth token from Playwright local storage.</li>\n<li>Create new organization via <strong>API</strong>.</li>\n<li>Login with Bearer auth token via <strong>CLI</strong>.</li>\n<li>Create new project via <strong>CLI</strong>.</li>\n</ul>\n<h3>Verify that:</h3>\n<ul>\n<li>User can upload <span style='background-color:#D3D3D3; padding:2px 4px; border-radius:3px; font-family:monospace;'>txt</span> file via <strong>CLI</strong>.</li>\n</ul></div>","status":"failed","statusMessage":"AssertionError: [AssertionError] during step: Upload file via CLI\nMessage: ERROR: The current project is not selected. Please create one with 'apolo admin add-project', or switch to the existing one with 'apolo config switch-project'.","statusTrace":"tests/reporting_hooks/reporting.py:49: in wrapper\n    result = await func(*args, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^\ntests/test_cases/steps/cli_steps/comonent_steps_impl/storage_steps.py:31: in cli_upload_file\n    assert result, error_message\n           ^^^^^^\nE   AssertionError: ERROR: The current project is not selected. Please create one with 'apolo admin add-project', or switch to the existing one with 'apolo config switch-project'.\n\nThe above exception was the direct cause of the following exception:\ntests/test_cases/tests_cli/test_storage.py:201: in test_admin_upload_txt_file_cli\n    await self._cli_steps.storage.cli_upload_file(file_path=file_path)\ntests/reporting_hooks/reporting.py:58: in wrapper\n    raise AssertionError(formatted_msg) from e\nE   AssertionError: [AssertionError] during step: Upload file via CLI\nE   Message: ERROR: The current project is not selected. Please create one with 'apolo admin add-project', or switch to the existing one with 'apolo config switch-project'.","steps":[{"name":"Login via UI","time":{"start":1759892546426,"stop":1759892552504,"duration":6078},"status":"passed","steps":[{"name":"Click login button","time":{"start":1759892546426,"stop":1759892547580,"duration":1154},"status":"passed","steps":[],"attachments":[{"uid":"e0e9a203ea33f224","name":"Page URL","source":"e0e9a203ea33f224.txt","type":"text/plain","size":33},{"uid":"8ae14bab030b6854","name":"Screenshot: Click login button (success)","source":"8ae14bab030b6854.png","type":"image/png","size":41616}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Enter email","time":{"start":1759892547581,"stop":1759892547937,"duration":356},"status":"passed","steps":[],"attachments":[{"uid":"2d787f6c28ba5ee4","name":"Page URL","source":"2d787f6c28ba5ee4.txt","type":"text/plain","size":215},{"uid":"31db7e09a6dc28a6","name":"Screenshot: Enter email (success)","source":"31db7e09a6dc28a6.png","type":"image/png","size":45888}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Enter password","time":{"start":1759892547937,"stop":1759892548272,"duration":335},"status":"passed","steps":[],"attachments":[{"uid":"c9f079c9f88868d9","name":"Page URL","source":"c9f079c9f88868d9.txt","type":"text/plain","size":215},{"uid":"bc6f1cb86d6d8dff","name":"Screenshot: Enter password (success)","source":"bc6f1cb86d6d8dff.png","type":"image/png","size":46030}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Click Continue button","time":{"start":1759892548272,"stop":1759892551271,"duration":2999},"status":"passed","steps":[],"attachments":[{"uid":"53fc70a430d05b4d","name":"Page URL","source":"53fc70a430d05b4d.txt","type":"text/plain","size":215},{"uid":"a0a3929836c336ca","name":"HTTP 200 - GET config","source":"a0a3929836c336ca.txt","type":"text/plain","size":752},{"uid":"2cb6354da3d2351a","name":"HTTP 200 - GET incoming","source":"2cb6354da3d2351a.txt","type":"text/plain","size":137},{"uid":"416e5fc5d8eaa5a5","name":"HTTP 200 - GET permissions?uri=blob:","source":"416e5fc5d8eaa5a5.txt","type":"text/plain","size":163},{"uid":"35db0b0b37afecba","name":"HTTP 200 - GET regression-to9fh4nhpz?include=clusters&include=system_role","source":"35db0b0b37afecba.txt","type":"text/plain","size":388},{"uid":"b2705d3e51d0cef2","name":"HTTP 200 - GET regression-to9fh4nhpz?include=orgs","source":"b2705d3e51d0cef2.txt","type":"text/plain","size":360},{"uid":"f8c219d0e4686721","name":"Screenshot: Click Continue button (success)","source":"f8c219d0e4686721.png","type":"image/png","size":159472}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":7,"hasContent":true,"attachmentStep":false},{"name":"Verify that Welcome new user page displayed","time":{"start":1759892551284,"stop":1759892552396,"duration":1112},"status":"passed","steps":[],"attachments":[{"uid":"735872148dbfab5b","name":"Page URL","source":"735872148dbfab5b.txt","type":"text/plain","size":44},{"uid":"a49d9e1674482daa","name":"Screenshot: Verify that Welcome new user page displayed (success)","source":"a49d9e1674482daa.png","type":"image/png","size":159472}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"f7fcb27109304014","name":"Page URL","source":"f7fcb27109304014.txt","type":"text/plain","size":33},{"uid":"752f65545c61ba2a","name":"Screenshot: Login via UI (success)","source":"752f65545c61ba2a.png","type":"image/png","size":159472}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":5,"attachmentsCount":17,"hasContent":true,"attachmentStep":false},{"name":"Add organization via API and reload page","time":{"start":1759892552505,"stop":1759892587889,"duration":35384},"status":"passed","steps":[{"name":"Reload page","time":{"start":1759892580270,"stop":1759892587804,"duration":7534},"status":"passed","steps":[],"attachments":[{"uid":"9e0de5375170cc48","name":"Page URL","source":"9e0de5375170cc48.txt","type":"text/plain","size":44},{"uid":"12a1ea8e446ab5cc","name":"HTTP 200 - GET config","source":"12a1ea8e446ab5cc.txt","type":"text/plain","size":1118},{"uid":"5f5fcbaf7a38ada1","name":"HTTP 200 - GET permissions?uri=blob:","source":"5f5fcbaf7a38ada1.txt","type":"text/plain","size":236},{"uid":"12f70c7642a8ee6d","name":"HTTP 200 - GET regression-to9fh4nhpz?include=orgs","source":"12f70c7642a8ee6d.txt","type":"text/plain","size":455},{"uid":"ab91aae96be143fa","name":"HTTP 200 - GET regression-org-cso2t7n9cin0","source":"ab91aae96be143fa.txt","type":"text/plain","size":425},{"uid":"a897f96032247fce","name":"HTTP 200 - GET regression-to9fh4nhpz?include=clusters&include=system_role","source":"a897f96032247fce.txt","type":"text/plain","size":510},{"uid":"8a27ee3b74dc1fca","name":"HTTP 200 - GET incoming","source":"8a27ee3b74dc1fca.txt","type":"text/plain","size":137},{"uid":"b2af9b80132b4d4a","name":"HTTP 200 - GET tags","source":"b2af9b80132b4d4a.txt","type":"text/plain","size":848},{"uid":"e3093bd253ba139d","name":"Screenshot: Reload page (success)","source":"e3093bd253ba139d.png","type":"image/png","size":57178}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":9,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"ad933b9ef6b922ad","name":"Page URL","source":"ad933b9ef6b922ad.txt","type":"text/plain","size":44},{"uid":"c4d303e5049cb2d3","name":"Screenshot: Add organization via API and reload page (success)","source":"c4d303e5049cb2d3.png","type":"image/png","size":57178}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":11,"hasContent":true,"attachmentStep":false},{"name":"Login to apolo CLI with access token","time":{"start":1759892587889,"stop":1759892588681,"duration":792},"status":"passed","steps":[],"attachments":[{"uid":"abe1577839a4191b","name":"Executed CLI command","source":"abe1577839a4191b.txt","type":"text/plain","size":1114},{"uid":"c5b448c58bfc2cdc","name":"Executed CLI command output","source":"c5b448c58bfc2cdc.txt","type":"text/plain","size":264}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Add new project via apolo CLI","time":{"start":1759892588681,"stop":1759892630157,"duration":41476},"status":"passed","steps":[],"attachments":[{"uid":"6e841d0e4b97e58","name":"Executed CLI command","source":"6e841d0e4b97e58.txt","type":"text/plain","size":114},{"uid":"16ebd79194b3d814","name":"Executed CLI command output","source":"16ebd79194b3d814.txt","type":"text/plain","size":304}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Generate txt file","time":{"start":1759892630157,"stop":1759892630257,"duration":100},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Upload file via CLI","time":{"start":1759892630257,"stop":1759892630928,"duration":671},"status":"failed","statusMessage":"AssertionError: [AssertionError] during step: Upload file via CLI\nMessage: ERROR: The current project is not selected. Please create one with 'apolo admin add-project', or switch to the existing one with 'apolo config switch-project'.\n","statusTrace":"  File \"/home/runner/work/apolo-test-automation/apolo-test-automation/tests/reporting_hooks/reporting.py\", line 58, in wrapper\n    raise AssertionError(formatted_msg) from e\n","steps":[],"attachments":[{"uid":"95bb7f0f0cae7f10","name":"Executed CLI command","source":"95bb7f0f0cae7f10.txt","type":"text/plain","size":154},{"uid":"a098573366afc5fe","name":"Executed CLI command output","source":"a098573366afc5fe.txt","type":"text/plain","size":159}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"8820ef877cf86feb","name":"log","source":"8820ef877cf86feb.txt","type":"text/plain","size":20367}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":12,"attachmentsCount":35,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"add_page_manager::finalizer","time":{"start":1759892630954,"stop":1759892630955,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_cleanup::finalizer","time":{"start":1759892630955,"stop":1759892630955,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_cleanup::finalizer","time":{"start":1759892630955,"stop":1759892666855,"duration":35900},"status":"passed","steps":[{"name":"Post-test cleanup","time":{"start":1759892630955,"stop":1759892666855,"duration":35900},"status":"passed","steps":[{"name":"Delete organisation: regression-org-cso2t7n9cin0","time":{"start":1759892635077,"stop":1759892666808,"duration":31731},"status":"passed","steps":[{"name":"Delete project: regression-proj-m73iby1ry1","time":{"start":1759892635120,"stop":1759892665272,"duration":30152},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":3,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"api_helper::finalizer","time":{"start":1759892666856,"stop":1759892666856,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_function_scoped_runner::0","time":{"start":1759892666857,"stop":1759892666858,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"suite","value":"CLI Storage"},{"name":"parentSuite","value":"CLI Tests"},{"name":"tag","value":"asyncio"},{"name":"subSuite","value":"TestCLIStorage"},{"name":"host","value":"runnervmwhb2z"},{"name":"thread","value":"3644-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_cases.tests_cli.test_storage"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":true,"retry":true,"extra":{"categories":[],"tags":["asyncio"]},"source":"3978dff30ced7e2a.json","parameterValues":[]}