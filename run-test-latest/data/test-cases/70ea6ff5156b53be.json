{"uid":"70ea6ff5156b53be","name":"User creates a second organization via CLI","fullName":"tests.test_cases.tests_cli.test_organization_structure_setup.TestCLIOrganizationStructureSetup#test_create_second_organization_cli","historyId":"3f04693ad6d2c8e029fc8b5235603349","time":{"start":1757643836241,"stop":1757643876418,"duration":40177},"description":"\n- Login with valid credentials via **UI**.\n- Get Bearer auth token from Playwright local storage.\n- Login with Bearer auth token via **CLI**.\n- Create first organization via **CLI**.\n\n### Verify that:\n\n- User can create second organization via **CLI**.\n","descriptionHtml":"<div style='line-height:1.6;'><ul>\n<li>Login with valid credentials via <strong>UI</strong>.</li>\n<li>Get Bearer auth token from Playwright local storage.</li>\n<li>Login with Bearer auth token via <strong>CLI</strong>.</li>\n<li>Create first organization via <strong>CLI</strong>.</li>\n</ul>\n<h3>Verify that:</h3>\n<ul>\n<li>User can create second organization via <strong>CLI</strong>.</li>\n</ul></div>","status":"failed","statusMessage":"AssertionError: [AssertionError] during step: Verify organization_count\nMessage: Expected 2 organizations, got 1","statusTrace":"tests/reporting_hooks/reporting.py:49: in wrapper\n    result = await func(*args, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^\ntests/test_cases/steps/cli_steps/comonent_steps_impl/admin_steps.py:22: in verify_cli_organization_count\n    assert len(organizations) == count, (\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^\nE   AssertionError: Expected 2 organizations, got 1\n\nThe above exception was the direct cause of the following exception:\ntests/test_cases/tests_cli/test_organization_structure_setup.py:67: in test_create_second_organization_cli\n    await self._cli_steps.admin.verify_cli_organization_count(2)\ntests/reporting_hooks/reporting.py:58: in wrapper\n    raise AssertionError(formatted_msg) from e\nE   AssertionError: [AssertionError] during step: Verify organization_count\nE   Message: Expected 2 organizations, got 1","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"pytestconfig","time":{"start":1757640754353,"stop":1757640754354,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop_policy","time":{"start":1757640754354,"stop":1757640754354,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_verify_url","time":{"start":1757640754354,"stop":1757640754355,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"base_url","time":{"start":1757640754354,"stop":1757640754354,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_output_dir","time":{"start":1757640754354,"stop":1757640754354,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delay_worker_start","time":{"start":1757640754355,"stop":1757640769355,"duration":15000},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ensure_storage_directories","time":{"start":1757640769355,"stop":1757640769355,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_config","time":{"start":1757643833076,"stop":1757643833080,"duration":4},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"page_manager","time":{"start":1757643833080,"stop":1757643835690,"duration":2610},"status":"passed","steps":[],"attachments":[{"uid":"f76e254406524623","name":"HTTP 200 - GET config","source":"f76e254406524623.txt","type":"text/plain","size":654}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},{"name":"_function_scoped_runner","time":{"start":1757643833080,"stop":1757643833080,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"users_manager","time":{"start":1757643835691,"stop":1757643835691,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"api_helper","time":{"start":1757643835691,"stop":1757643835691,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"apolo_cli","time":{"start":1757643835691,"stop":1757643835692,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"data_manager","time":{"start":1757643835691,"stop":1757643835691,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"add_page_manager","time":{"start":1757643835692,"stop":1757643835692,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_cleanup","time":{"start":1757643835692,"stop":1757643835692,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_inject_fixtures","time":{"start":1757643835693,"stop":1757643835693,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup","time":{"start":1757643835693,"stop":1757643836241,"duration":548},"status":"passed","steps":[{"name":"Verify Apolo CLI client is installed","time":{"start":1757643835693,"stop":1757643836241,"duration":548},"status":"passed","steps":[],"attachments":[{"uid":"f83e96f11c2b93b7","name":"Executed CLI command","source":"f83e96f11c2b93b7.txt","type":"text/plain","size":15},{"uid":"5a5a454a1aec6298","name":"Executed CLI command output","source":"5a5a454a1aec6298.txt","type":"text/plain","size":28}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":2,"hasContent":true,"attachmentStep":false}],"testStage":{"description":"\n- Login with valid credentials via **UI**.\n- Get Bearer auth token from Playwright local storage.\n- Login with Bearer auth token via **CLI**.\n- Create first organization via **CLI**.\n\n### Verify that:\n\n- User can create second organization via **CLI**.\n","descriptionHtml":"<div style='line-height:1.6;'><ul>\n<li>Login with valid credentials via <strong>UI</strong>.</li>\n<li>Get Bearer auth token from Playwright local storage.</li>\n<li>Login with Bearer auth token via <strong>CLI</strong>.</li>\n<li>Create first organization via <strong>CLI</strong>.</li>\n</ul>\n<h3>Verify that:</h3>\n<ul>\n<li>User can create second organization via <strong>CLI</strong>.</li>\n</ul></div>","status":"failed","statusMessage":"AssertionError: [AssertionError] during step: Verify organization_count\nMessage: Expected 2 organizations, got 1","statusTrace":"tests/reporting_hooks/reporting.py:49: in wrapper\n    result = await func(*args, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^\ntests/test_cases/steps/cli_steps/comonent_steps_impl/admin_steps.py:22: in verify_cli_organization_count\n    assert len(organizations) == count, (\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^\nE   AssertionError: Expected 2 organizations, got 1\n\nThe above exception was the direct cause of the following exception:\ntests/test_cases/tests_cli/test_organization_structure_setup.py:67: in test_create_second_organization_cli\n    await self._cli_steps.admin.verify_cli_organization_count(2)\ntests/reporting_hooks/reporting.py:58: in wrapper\n    raise AssertionError(formatted_msg) from e\nE   AssertionError: [AssertionError] during step: Verify organization_count\nE   Message: Expected 2 organizations, got 1","steps":[{"name":"Login via UI","time":{"start":1757643836242,"stop":1757643841380,"duration":5138},"status":"passed","steps":[{"name":"Click login button","time":{"start":1757643836242,"stop":1757643837383,"duration":1141},"status":"passed","steps":[],"attachments":[{"uid":"60e94f7d0478c14b","name":"Page URL","source":"60e94f7d0478c14b.txt","type":"text/plain","size":33},{"uid":"152681349e4fd493","name":"Screenshot: Click login button (success)","source":"152681349e4fd493.png","type":"image/png","size":41616}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Enter email","time":{"start":1757643837383,"stop":1757643837531,"duration":148},"status":"passed","steps":[],"attachments":[{"uid":"f1bb37dbe988b07e","name":"Page URL","source":"f1bb37dbe988b07e.txt","type":"text/plain","size":215},{"uid":"d9b603c7602d36b1","name":"Screenshot: Enter email (success)","source":"d9b603c7602d36b1.png","type":"image/png","size":45787}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Enter password","time":{"start":1757643837531,"stop":1757643837683,"duration":152},"status":"passed","steps":[],"attachments":[{"uid":"70a6f9887640901c","name":"Page URL","source":"70a6f9887640901c.txt","type":"text/plain","size":215},{"uid":"b509a4013862100d","name":"Screenshot: Enter password (success)","source":"b509a4013862100d.png","type":"image/png","size":46296}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Click Continue button","time":{"start":1757643837684,"stop":1757643840182,"duration":2498},"status":"passed","steps":[],"attachments":[{"uid":"7526deb36dc07ec5","name":"Page URL","source":"7526deb36dc07ec5.txt","type":"text/plain","size":215},{"uid":"ddacc2196b0cb6b1","name":"HTTP 200 - GET config","source":"ddacc2196b0cb6b1.txt","type":"text/plain","size":752},{"uid":"4ce37df6bcb3ce60","name":"HTTP 200 - GET permissions?uri=blob:","source":"4ce37df6bcb3ce60.txt","type":"text/plain","size":163},{"uid":"44cdbc4baa7f6dee","name":"HTTP 200 - GET regression-fbosmiu8dt?include=orgs","source":"44cdbc4baa7f6dee.txt","type":"text/plain","size":360},{"uid":"d62e2b4fbfee18e8","name":"HTTP 200 - GET regression-fbosmiu8dt?include=clusters&include=system_role","source":"d62e2b4fbfee18e8.txt","type":"text/plain","size":388},{"uid":"e35c6cf5e9983708","name":"Screenshot: Click Continue button (success)","source":"e35c6cf5e9983708.png","type":"image/png","size":50585}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":6,"hasContent":true,"attachmentStep":false},{"name":"Verify that Welcome new user page displayed","time":{"start":1757643840192,"stop":1757643841295,"duration":1103},"status":"passed","steps":[],"attachments":[{"uid":"e8fd97d480077670","name":"Page URL","source":"e8fd97d480077670.txt","type":"text/plain","size":44},{"uid":"6b1334ee84dbc31","name":"HTTP 200 - GET incoming","source":"6b1334ee84dbc31.txt","type":"text/plain","size":137},{"uid":"c8d00dc4b8fafb80","name":"Screenshot: Verify that Welcome new user page displayed (success)","source":"c8d00dc4b8fafb80.png","type":"image/png","size":159336}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":3,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"bafbb7f00ba3c1b6","name":"Page URL","source":"bafbb7f00ba3c1b6.txt","type":"text/plain","size":33},{"uid":"9b9f038c51b1a5b4","name":"Screenshot: Login via UI (success)","source":"9b9f038c51b1a5b4.png","type":"image/png","size":159336}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":5,"attachmentsCount":17,"hasContent":true,"attachmentStep":false},{"name":"Login to apolo CLI with access token","time":{"start":1757643841381,"stop":1757643842238,"duration":857},"status":"passed","steps":[],"attachments":[{"uid":"a10fa55eac5773c8","name":"Executed CLI command","source":"a10fa55eac5773c8.txt","type":"text/plain","size":1114},{"uid":"85a037b22ac94dde","name":"Executed CLI command output","source":"85a037b22ac94dde.txt","type":"text/plain","size":184}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Verify organization_count","time":{"start":1757643842238,"stop":1757643846127,"duration":3889},"status":"passed","steps":[],"attachments":[{"uid":"a27a0fca506e5bd2","name":"Executed CLI command","source":"a27a0fca506e5bd2.txt","type":"text/plain","size":20},{"uid":"70632f7a1712bc7","name":"Executed CLI command output","source":"70632f7a1712bc7.txt","type":"text/plain","size":26}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Add new organization via apolo CLI","time":{"start":1757643846128,"stop":1757643857125,"duration":10997},"status":"passed","steps":[],"attachments":[{"uid":"60ac76c2d042d270","name":"Executed CLI command","source":"60ac76c2d042d270.txt","type":"text/plain","size":1114},{"uid":"c2cb0ce54563dfda","name":"Executed CLI command output","source":"c2cb0ce54563dfda.txt","type":"text/plain","size":264}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Verify organization_count","time":{"start":1757643857125,"stop":1757643861877,"duration":4752},"status":"passed","steps":[],"attachments":[{"uid":"57568ed0d6a1a16a","name":"Executed CLI command","source":"57568ed0d6a1a16a.txt","type":"text/plain","size":20},{"uid":"ecf416370805374f","name":"Executed CLI command output","source":"ecf416370805374f.txt","type":"text/plain","size":149}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Verify organization is listed in the CLI output","time":{"start":1757643861877,"stop":1757643861877,"duration":0},"status":"passed","steps":[],"attachments":[{"uid":"7c69c5780401c02c","name":"Executed CLI command","source":"7c69c5780401c02c.txt","type":"text/plain","size":20},{"uid":"4659b94e40b12856","name":"Executed CLI command output","source":"4659b94e40b12856.txt","type":"text/plain","size":149}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Add new organization via apolo CLI","time":{"start":1757643861877,"stop":1757643872227,"duration":10350},"status":"passed","steps":[],"attachments":[{"uid":"a450e30618272bf6","name":"Executed CLI command","source":"a450e30618272bf6.txt","type":"text/plain","size":47},{"uid":"cb3aa73903883a2c","name":"Executed CLI command output","source":"cb3aa73903883a2c.txt","type":"text/plain","size":0}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Verify organization_count","time":{"start":1757643872227,"stop":1757643876417,"duration":4190},"status":"failed","statusMessage":"AssertionError: [AssertionError] during step: Verify organization_count\nMessage: Expected 2 organizations, got 1\n","statusTrace":"  File \"/home/runner/work/apolo-test-automation/apolo-test-automation/tests/reporting_hooks/reporting.py\", line 58, in wrapper\n    raise AssertionError(formatted_msg) from e\n","steps":[],"attachments":[{"uid":"7316005c7c2f0b52","name":"Executed CLI command","source":"7316005c7c2f0b52.txt","type":"text/plain","size":20},{"uid":"d6701f62a014d39c","name":"Executed CLI command output","source":"d6701f62a014d39c.txt","type":"text/plain","size":149}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"7e07566e278eadc0","name":"log","source":"7e07566e278eadc0.txt","type":"text/plain","size":17075}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":13,"attachmentsCount":32,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"add_page_manager::finalizer","time":{"start":1757643876445,"stop":1757643876445,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_cleanup::finalizer","time":{"start":1757643876445,"stop":1757643876446,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_cleanup::finalizer","time":{"start":1757643876446,"stop":1757643885684,"duration":9238},"status":"passed","steps":[{"name":"Post-test cleanup","time":{"start":1757643876446,"stop":1757643885684,"duration":9238},"status":"passed","steps":[{"name":"Delete organisation: regression-org-18i13lfln32u","time":{"start":1757643879731,"stop":1757643884897,"duration":5166},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Delete organisation: regression-org-jfio84vvh9ff","time":{"start":1757643884897,"stop":1757643885620,"duration":723},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":3,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"api_helper::finalizer","time":{"start":1757643885685,"stop":1757643885686,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_function_scoped_runner::0","time":{"start":1757643885686,"stop":1757643885687,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"suite","value":"CLI Organization Structure Setup"},{"name":"parentSuite","value":"CLI Tests"},{"name":"tag","value":"asyncio"},{"name":"subSuite","value":"TestCLIOrganizationStructureSetup"},{"name":"host","value":"runnervmf4ws1"},{"name":"thread","value":"3615-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_cases.tests_cli.test_organization_structure_setup"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":true,"retry":true,"extra":{"categories":[],"tags":["asyncio"]},"source":"70ea6ff5156b53be.json","parameterValues":[]}