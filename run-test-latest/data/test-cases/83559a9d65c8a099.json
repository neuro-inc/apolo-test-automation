{"uid":"83559a9d65c8a099","name":"User removes organization via CLI","fullName":"tests.test_cases.tests_cli.test_organization_structure_setup.TestCLIOrganizationStructureSetup#test_remove_organization_cli","historyId":"a5aed9e26487d1557b98b4ed8dc5d667","time":{"start":1755483843104,"stop":1755483876215,"duration":33111},"description":"\n- Login with valid credentials via **UI**.\n- Get Bearer auth token from Playwright local storage.\n- Login with Bearer auth token via **CLI**.\n- Create first organization via **CLI**.\n- Create second organization via **CLI**.\n\n### Verify that:\n\n- User can remove organization via **CLI**.\n","descriptionHtml":"<div style='line-height:1.6;'><ul>\n<li>Login with valid credentials via <strong>UI</strong>.</li>\n<li>Get Bearer auth token from Playwright local storage.</li>\n<li>Login with Bearer auth token via <strong>CLI</strong>.</li>\n<li>Create first organization via <strong>CLI</strong>.</li>\n<li>Create second organization via <strong>CLI</strong>.</li>\n</ul>\n<h3>Verify that:</h3>\n<ul>\n<li>User can remove organization via <strong>CLI</strong>.</li>\n</ul></div>","status":"failed","statusMessage":"AssertionError: [AssertionError] during step: Verify organization_count\nMessage: Expected 0 organizations, got 1","statusTrace":"tests/reporting_hooks/reporting.py:49: in wrapper\n    result = await func(*args, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^\ntests/test_cases/steps/cli_steps/comonent_steps_impl/admin_steps.py:22: in verify_cli_organization_count\n    assert len(organizations) == count, (\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^\nE   AssertionError: Expected 0 organizations, got 1\n\nThe above exception was the direct cause of the following exception:\ntests/test_cases/tests_cli/test_organization_structure_setup.py:98: in test_remove_organization_cli\n    await self._cli_steps.admin.verify_cli_organization_count(0)\ntests/reporting_hooks/reporting.py:58: in wrapper\n    raise AssertionError(formatted_msg) from e\nE   AssertionError: [AssertionError] during step: Verify organization_count\nE   Message: Expected 0 organizations, got 1","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"_verify_url","time":{"start":1755480795239,"stop":1755480795239,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_output_dir","time":{"start":1755480795239,"stop":1755480795239,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop_policy","time":{"start":1755480795239,"stop":1755480795239,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"pytestconfig","time":{"start":1755480795239,"stop":1755480795239,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"base_url","time":{"start":1755480795239,"stop":1755480795239,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delay_worker_start","time":{"start":1755480795240,"stop":1755480795240,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ensure_storage_directories","time":{"start":1755480795240,"stop":1755480795240,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_config","time":{"start":1755483840227,"stop":1755483840229,"duration":2},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_function_scoped_runner","time":{"start":1755483840229,"stop":1755483840229,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"page_manager","time":{"start":1755483840229,"stop":1755483842524,"duration":2295},"status":"passed","steps":[],"attachments":[{"uid":"b19a4348ea6ba202","name":"HTTP 200 - GET config","source":"b19a4348ea6ba202.txt","type":"text/plain","size":654}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},{"name":"data_manager","time":{"start":1755483842525,"stop":1755483842525,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"api_helper","time":{"start":1755483842525,"stop":1755483842525,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"users_manager","time":{"start":1755483842525,"stop":1755483842525,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"add_page_manager","time":{"start":1755483842526,"stop":1755483842527,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_cleanup","time":{"start":1755483842526,"stop":1755483842526,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"apolo_cli","time":{"start":1755483842526,"stop":1755483842526,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup","time":{"start":1755483842527,"stop":1755483843104,"duration":577},"status":"passed","steps":[{"name":"Verify Apolo CLI client is installed","time":{"start":1755483842527,"stop":1755483843104,"duration":577},"status":"passed","steps":[],"attachments":[{"uid":"1a0a7c5efc106682","name":"Executed CLI command","source":"1a0a7c5efc106682.txt","type":"text/plain","size":15},{"uid":"9fafed831e8423d","name":"Executed CLI command output","source":"9fafed831e8423d.txt","type":"text/plain","size":28}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"_inject_fixtures","time":{"start":1755483842527,"stop":1755483842527,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"\n- Login with valid credentials via **UI**.\n- Get Bearer auth token from Playwright local storage.\n- Login with Bearer auth token via **CLI**.\n- Create first organization via **CLI**.\n- Create second organization via **CLI**.\n\n### Verify that:\n\n- User can remove organization via **CLI**.\n","descriptionHtml":"<div style='line-height:1.6;'><ul>\n<li>Login with valid credentials via <strong>UI</strong>.</li>\n<li>Get Bearer auth token from Playwright local storage.</li>\n<li>Login with Bearer auth token via <strong>CLI</strong>.</li>\n<li>Create first organization via <strong>CLI</strong>.</li>\n<li>Create second organization via <strong>CLI</strong>.</li>\n</ul>\n<h3>Verify that:</h3>\n<ul>\n<li>User can remove organization via <strong>CLI</strong>.</li>\n</ul></div>","status":"failed","statusMessage":"AssertionError: [AssertionError] during step: Verify organization_count\nMessage: Expected 0 organizations, got 1","statusTrace":"tests/reporting_hooks/reporting.py:49: in wrapper\n    result = await func(*args, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^\ntests/test_cases/steps/cli_steps/comonent_steps_impl/admin_steps.py:22: in verify_cli_organization_count\n    assert len(organizations) == count, (\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^\nE   AssertionError: Expected 0 organizations, got 1\n\nThe above exception was the direct cause of the following exception:\ntests/test_cases/tests_cli/test_organization_structure_setup.py:98: in test_remove_organization_cli\n    await self._cli_steps.admin.verify_cli_organization_count(0)\ntests/reporting_hooks/reporting.py:58: in wrapper\n    raise AssertionError(formatted_msg) from e\nE   AssertionError: [AssertionError] during step: Verify organization_count\nE   Message: Expected 0 organizations, got 1","steps":[{"name":"Login via UI","time":{"start":1755483843105,"stop":1755483848879,"duration":5774},"status":"passed","steps":[{"name":"Click login button","time":{"start":1755483843105,"stop":1755483844298,"duration":1193},"status":"passed","steps":[],"attachments":[{"uid":"67f665d4291ec46c","name":"Page URL","source":"67f665d4291ec46c.txt","type":"text/plain","size":33},{"uid":"a1ea329e4a71ad71","name":"Screenshot: Click login button (success)","source":"a1ea329e4a71ad71.png","type":"image/png","size":38729}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Enter email","time":{"start":1755483844298,"stop":1755483844481,"duration":183},"status":"passed","steps":[],"attachments":[{"uid":"9f94c8170bc40dc3","name":"Page URL","source":"9f94c8170bc40dc3.txt","type":"text/plain","size":215},{"uid":"18ecf0493684fda8","name":"Screenshot: Enter email (success)","source":"18ecf0493684fda8.png","type":"image/png","size":45516}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Enter password","time":{"start":1755483844481,"stop":1755483844664,"duration":183},"status":"passed","steps":[],"attachments":[{"uid":"2bbdcbe403a11ea6","name":"Page URL","source":"2bbdcbe403a11ea6.txt","type":"text/plain","size":215},{"uid":"b94e2d3f93e17e6b","name":"Screenshot: Enter password (success)","source":"b94e2d3f93e17e6b.png","type":"image/png","size":46737}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Click Continue button","time":{"start":1755483844664,"stop":1755483847619,"duration":2955},"status":"passed","steps":[],"attachments":[{"uid":"45b92a0f3cf75c31","name":"Page URL","source":"45b92a0f3cf75c31.txt","type":"text/plain","size":215},{"uid":"b6ee627938f97dff","name":"HTTP 200 - GET config","source":"b6ee627938f97dff.txt","type":"text/plain","size":752},{"uid":"6235c04a20e0bdfb","name":"HTTP 200 - GET permissions?uri=blob:","source":"6235c04a20e0bdfb.txt","type":"text/plain","size":163},{"uid":"bce5161e9904fce8","name":"HTTP 200 - GET incoming","source":"bce5161e9904fce8.txt","type":"text/plain","size":137},{"uid":"f1d77d9a5593b3e","name":"HTTP 200 - GET regression-z9zitx15ad?include=orgs","source":"f1d77d9a5593b3e.txt","type":"text/plain","size":360},{"uid":"bc531553dc72b8d","name":"HTTP 200 - GET regression-z9zitx15ad?include=clusters&include=system_role","source":"bc531553dc72b8d.txt","type":"text/plain","size":388},{"uid":"537145b0dae60519","name":"Screenshot: Click Continue button (success)","source":"537145b0dae60519.png","type":"image/png","size":51917}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":7,"hasContent":true,"attachmentStep":false},{"name":"Verify that Welcome new user page displayed","time":{"start":1755483847635,"stop":1755483848762,"duration":1127},"status":"passed","steps":[],"attachments":[{"uid":"66ab60d0cc6b5982","name":"Page URL","source":"66ab60d0cc6b5982.txt","type":"text/plain","size":44},{"uid":"b28d60940cd3b15","name":"Screenshot: Verify that Welcome new user page displayed (success)","source":"b28d60940cd3b15.png","type":"image/png","size":160557}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"924cb5d15a86d517","name":"Page URL","source":"924cb5d15a86d517.txt","type":"text/plain","size":33},{"uid":"5b6147badedd00c3","name":"Screenshot: Login via UI (success)","source":"5b6147badedd00c3.png","type":"image/png","size":160557}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":5,"attachmentsCount":17,"hasContent":true,"attachmentStep":false},{"name":"Login to apolo CLI with access token","time":{"start":1755483848879,"stop":1755483850262,"duration":1383},"status":"passed","steps":[],"attachments":[{"uid":"154cdf5ac6af5a74","name":"Executed CLI command","source":"154cdf5ac6af5a74.txt","type":"text/plain","size":1114},{"uid":"b00cd4e7ac8c5f59","name":"Executed CLI command output","source":"b00cd4e7ac8c5f59.txt","type":"text/plain","size":184}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Verify organization_count","time":{"start":1755483850262,"stop":1755483854132,"duration":3870},"status":"passed","steps":[],"attachments":[{"uid":"5021ba8483a0dca0","name":"Executed CLI command","source":"5021ba8483a0dca0.txt","type":"text/plain","size":20},{"uid":"a2bf12f7f616a716","name":"Executed CLI command output","source":"a2bf12f7f616a716.txt","type":"text/plain","size":26}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Add new organization via apolo CLI","time":{"start":1755483854132,"stop":1755483863020,"duration":8888},"status":"passed","steps":[],"attachments":[{"uid":"59b4bfd60b3acbe3","name":"Executed CLI command","source":"59b4bfd60b3acbe3.txt","type":"text/plain","size":1114},{"uid":"2a3632b84fc3d069","name":"Executed CLI command output","source":"2a3632b84fc3d069.txt","type":"text/plain","size":264}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Verify organization_count","time":{"start":1755483863021,"stop":1755483867022,"duration":4001},"status":"passed","steps":[],"attachments":[{"uid":"910ebf4b155fcce2","name":"Executed CLI command","source":"910ebf4b155fcce2.txt","type":"text/plain","size":20},{"uid":"9c80692997c62c2b","name":"Executed CLI command output","source":"9c80692997c62c2b.txt","type":"text/plain","size":149}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Verify organization is listed in the CLI output","time":{"start":1755483867022,"stop":1755483867022,"duration":0},"status":"passed","steps":[],"attachments":[{"uid":"8eb62e97cb4dd423","name":"Executed CLI command","source":"8eb62e97cb4dd423.txt","type":"text/plain","size":20},{"uid":"a0919fe60fb65246","name":"Executed CLI command output","source":"a0919fe60fb65246.txt","type":"text/plain","size":149}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Remove organization via CLI","time":{"start":1755483867023,"stop":1755483871828,"duration":4805},"status":"passed","steps":[],"attachments":[{"uid":"c815ab22fc4f659d","name":"Executed CLI command","source":"c815ab22fc4f659d.txt","type":"text/plain","size":58},{"uid":"f34aa15f88ee6bbf","name":"Executed CLI command output","source":"f34aa15f88ee6bbf.txt","type":"text/plain","size":0}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Verify organization_count","time":{"start":1755483871828,"stop":1755483876214,"duration":4386},"status":"failed","statusMessage":"AssertionError: [AssertionError] during step: Verify organization_count\nMessage: Expected 0 organizations, got 1\n","statusTrace":"  File \"/home/runner/work/apolo-test-automation/apolo-test-automation/tests/reporting_hooks/reporting.py\", line 58, in wrapper\n    raise AssertionError(formatted_msg) from e\n","steps":[],"attachments":[{"uid":"6b2e4ac8f164b8fb","name":"Executed CLI command","source":"6b2e4ac8f164b8fb.txt","type":"text/plain","size":20},{"uid":"507811b0093120d1","name":"Executed CLI command output","source":"507811b0093120d1.txt","type":"text/plain","size":149}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"4f42814eac92741d","name":"log","source":"4f42814eac92741d.txt","type":"text/plain","size":15388}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":13,"attachmentsCount":32,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"add_page_manager::finalizer","time":{"start":1755483876234,"stop":1755483876234,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_cleanup::finalizer","time":{"start":1755483876234,"stop":1755483879463,"duration":3229},"status":"passed","steps":[{"name":"Post-test cleanup","time":{"start":1755483876234,"stop":1755483879463,"duration":3229},"status":"passed","steps":[],"attachments":[{"uid":"8daa5a73b6b757c7","name":"Cleanup note","source":"8daa5a73b6b757c7.txt","type":"text/plain","size":29}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},{"name":"api_helper::finalizer","time":{"start":1755483879464,"stop":1755483879464,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_function_scoped_runner::0","time":{"start":1755483879465,"stop":1755483879466,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"parentSuite","value":"CLI Tests"},{"name":"suite","value":"CLI Organization Structure Setup"},{"name":"tag","value":"asyncio"},{"name":"subSuite","value":"TestCLIOrganizationStructureSetup"},{"name":"host","value":"pkrvmubgrv54qmi"},{"name":"thread","value":"5902-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_cases.tests_cli.test_organization_structure_setup"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":true,"retry":true,"extra":{"categories":[],"tags":["asyncio"]},"source":"83559a9d65c8a099.json","parameterValues":[]}