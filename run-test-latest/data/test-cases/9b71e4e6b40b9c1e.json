{"uid":"9b71e4e6b40b9c1e","name":"User creates a first organization via CLI","fullName":"tests.test_cases.tests_cli.test_organization_structure_setup.TestCLIOrganizationStructureSetup#test_create_first_organization_cli","historyId":"063c67391cddd1f7840e739619987ade","time":{"start":1756002084534,"stop":1756002125518,"duration":40984},"description":"\n- Login with valid credentials via **UI**.\n- Get Bearer auth token from Playwright local storage.\n- Login with Bearer auth token via **CLI**.\n\n### Verify that:\n\n- User can create first organization via **CLI**.\n","descriptionHtml":"<div style='line-height:1.6;'><ul>\n<li>Login with valid credentials via <strong>UI</strong>.</li>\n<li>Get Bearer auth token from Playwright local storage.</li>\n<li>Login with Bearer auth token via <strong>CLI</strong>.</li>\n</ul>\n<h3>Verify that:</h3>\n<ul>\n<li>User can create first organization via <strong>CLI</strong>.</li>\n</ul></div>","status":"failed","statusMessage":"AssertionError: [AssertionError] during step: Verify organization_count\nMessage: Expected 1 organizations, got 2","statusTrace":"tests/reporting_hooks/reporting.py:49: in wrapper\n    result = await func(*args, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^\ntests/test_cases/steps/cli_steps/comonent_steps_impl/admin_steps.py:22: in verify_cli_organization_count\n    assert len(organizations) == count, (\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^\nE   AssertionError: Expected 1 organizations, got 2\n\nThe above exception was the direct cause of the following exception:\ntests/test_cases/tests_cli/test_organization_structure_setup.py:39: in test_create_first_organization_cli\n    await self._cli_steps.admin.verify_cli_organization_count(1)\ntests/reporting_hooks/reporting.py:58: in wrapper\n    raise AssertionError(formatted_msg) from e\nE   AssertionError: [AssertionError] during step: Verify organization_count\nE   Message: Expected 1 organizations, got 2","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"event_loop_policy","time":{"start":1755999171750,"stop":1755999171750,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_output_dir","time":{"start":1755999171750,"stop":1755999171750,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"pytestconfig","time":{"start":1755999171750,"stop":1755999171750,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_verify_url","time":{"start":1755999171751,"stop":1755999171751,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"base_url","time":{"start":1755999171751,"stop":1755999171751,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delay_worker_start","time":{"start":1755999171751,"stop":1755999186751,"duration":15000},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ensure_storage_directories","time":{"start":1755999186752,"stop":1755999186752,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_config","time":{"start":1756002081973,"stop":1756002081976,"duration":3},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"page_manager","time":{"start":1756002081976,"stop":1756002084000,"duration":2024},"status":"passed","steps":[],"attachments":[{"uid":"9675b19431569e8a","name":"HTTP 200 - GET config","source":"9675b19431569e8a.txt","type":"text/plain","size":654}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},{"name":"_function_scoped_runner","time":{"start":1756002081976,"stop":1756002081976,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"data_manager","time":{"start":1756002084000,"stop":1756002084000,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"users_manager","time":{"start":1756002084000,"stop":1756002084000,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"api_helper","time":{"start":1756002084000,"stop":1756002084001,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_cleanup","time":{"start":1756002084001,"stop":1756002084002,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"apolo_cli","time":{"start":1756002084001,"stop":1756002084001,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"add_page_manager","time":{"start":1756002084002,"stop":1756002084002,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_inject_fixtures","time":{"start":1756002084002,"stop":1756002084002,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup","time":{"start":1756002084002,"stop":1756002084534,"duration":532},"status":"passed","steps":[{"name":"Verify Apolo CLI client is installed","time":{"start":1756002084002,"stop":1756002084534,"duration":532},"status":"passed","steps":[],"attachments":[{"uid":"f82944a77741f616","name":"Executed CLI command","source":"f82944a77741f616.txt","type":"text/plain","size":15},{"uid":"5a2094759ddb5db4","name":"Executed CLI command output","source":"5a2094759ddb5db4.txt","type":"text/plain","size":28}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":2,"hasContent":true,"attachmentStep":false}],"testStage":{"description":"\n- Login with valid credentials via **UI**.\n- Get Bearer auth token from Playwright local storage.\n- Login with Bearer auth token via **CLI**.\n\n### Verify that:\n\n- User can create first organization via **CLI**.\n","descriptionHtml":"<div style='line-height:1.6;'><ul>\n<li>Login with valid credentials via <strong>UI</strong>.</li>\n<li>Get Bearer auth token from Playwright local storage.</li>\n<li>Login with Bearer auth token via <strong>CLI</strong>.</li>\n</ul>\n<h3>Verify that:</h3>\n<ul>\n<li>User can create first organization via <strong>CLI</strong>.</li>\n</ul></div>","status":"failed","statusMessage":"AssertionError: [AssertionError] during step: Verify organization_count\nMessage: Expected 1 organizations, got 2","statusTrace":"tests/reporting_hooks/reporting.py:49: in wrapper\n    result = await func(*args, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^\ntests/test_cases/steps/cli_steps/comonent_steps_impl/admin_steps.py:22: in verify_cli_organization_count\n    assert len(organizations) == count, (\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^\nE   AssertionError: Expected 1 organizations, got 2\n\nThe above exception was the direct cause of the following exception:\ntests/test_cases/tests_cli/test_organization_structure_setup.py:39: in test_create_first_organization_cli\n    await self._cli_steps.admin.verify_cli_organization_count(1)\ntests/reporting_hooks/reporting.py:58: in wrapper\n    raise AssertionError(formatted_msg) from e\nE   AssertionError: [AssertionError] during step: Verify organization_count\nE   Message: Expected 1 organizations, got 2","steps":[{"name":"Login via UI","time":{"start":1756002084536,"stop":1756002090255,"duration":5719},"status":"passed","steps":[{"name":"Click login button","time":{"start":1756002084536,"stop":1756002085689,"duration":1153},"status":"passed","steps":[],"attachments":[{"uid":"1f15f17a3849c93f","name":"Page URL","source":"1f15f17a3849c93f.txt","type":"text/plain","size":33},{"uid":"e83713a1d8dcbd91","name":"Screenshot: Click login button (success)","source":"e83713a1d8dcbd91.png","type":"image/png","size":41894}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Enter email","time":{"start":1756002085689,"stop":1756002085835,"duration":146},"status":"passed","steps":[],"attachments":[{"uid":"7e7c2622ed87745","name":"Page URL","source":"7e7c2622ed87745.txt","type":"text/plain","size":215},{"uid":"82f988317eca06c1","name":"Screenshot: Enter email (success)","source":"82f988317eca06c1.png","type":"image/png","size":45821}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Enter password","time":{"start":1756002085835,"stop":1756002086006,"duration":171},"status":"passed","steps":[],"attachments":[{"uid":"a9d0bfd717dc4b9c","name":"Page URL","source":"a9d0bfd717dc4b9c.txt","type":"text/plain","size":215},{"uid":"d2a29d4b340a8769","name":"Screenshot: Enter password (success)","source":"d2a29d4b340a8769.png","type":"image/png","size":46635}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Click Continue button","time":{"start":1756002086006,"stop":1756002089003,"duration":2997},"status":"passed","steps":[],"attachments":[{"uid":"cd3f5e7c94cedf33","name":"Page URL","source":"cd3f5e7c94cedf33.txt","type":"text/plain","size":215},{"uid":"315cc5103b54eded","name":"HTTP 200 - GET config","source":"315cc5103b54eded.txt","type":"text/plain","size":752},{"uid":"8fc97edc1d710b40","name":"HTTP 200 - GET incoming","source":"8fc97edc1d710b40.txt","type":"text/plain","size":137},{"uid":"dc61c078a2cacead","name":"HTTP 200 - GET permissions?uri=blob:","source":"dc61c078a2cacead.txt","type":"text/plain","size":163},{"uid":"73c02d3a9d9c0219","name":"HTTP 200 - GET regression-j1dxctce5x?include=orgs","source":"73c02d3a9d9c0219.txt","type":"text/plain","size":360},{"uid":"aa29c1e2c15def55","name":"HTTP 200 - GET regression-j1dxctce5x?include=clusters&include=system_role","source":"aa29c1e2c15def55.txt","type":"text/plain","size":388},{"uid":"d1b56437d4ff8e75","name":"Screenshot: Click Continue button (success)","source":"d1b56437d4ff8e75.png","type":"image/png","size":159723}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":7,"hasContent":true,"attachmentStep":false},{"name":"Verify that Welcome new user page displayed","time":{"start":1756002089013,"stop":1756002090149,"duration":1136},"status":"passed","steps":[],"attachments":[{"uid":"53334e71e7762843","name":"Page URL","source":"53334e71e7762843.txt","type":"text/plain","size":44},{"uid":"2d8ef821387ea97b","name":"Screenshot: Verify that Welcome new user page displayed (success)","source":"2d8ef821387ea97b.png","type":"image/png","size":159723}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"d1bdf4811c1e5888","name":"Page URL","source":"d1bdf4811c1e5888.txt","type":"text/plain","size":33},{"uid":"273c6c1c91b50181","name":"Screenshot: Login via UI (success)","source":"273c6c1c91b50181.png","type":"image/png","size":159723}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":5,"attachmentsCount":17,"hasContent":true,"attachmentStep":false},{"name":"Login to apolo CLI with access token","time":{"start":1756002090255,"stop":1756002095889,"duration":5634},"status":"passed","steps":[],"attachments":[{"uid":"3ab51052bfd69e64","name":"Executed CLI command","source":"3ab51052bfd69e64.txt","type":"text/plain","size":1114},{"uid":"8aece633ec5ac104","name":"Executed CLI command output","source":"8aece633ec5ac104.txt","type":"text/plain","size":150}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Verify organization_count","time":{"start":1756002095889,"stop":1756002102888,"duration":6999},"status":"passed","steps":[],"attachments":[{"uid":"2d4c86dbe4fd43db","name":"Executed CLI command","source":"2d4c86dbe4fd43db.txt","type":"text/plain","size":20},{"uid":"a7640aa8e9c8006f","name":"Executed CLI command output","source":"a7640aa8e9c8006f.txt","type":"text/plain","size":26}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Add new organization via apolo CLI","time":{"start":1756002102888,"stop":1756002119424,"duration":16536},"status":"passed","steps":[],"attachments":[{"uid":"5310bcf21caf881","name":"Executed CLI command","source":"5310bcf21caf881.txt","type":"text/plain","size":47},{"uid":"14f3ea8bab6baa58","name":"Executed CLI command output","source":"14f3ea8bab6baa58.txt","type":"text/plain","size":0}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Verify organization_count","time":{"start":1756002119424,"stop":1756002125517,"duration":6093},"status":"failed","statusMessage":"AssertionError: [AssertionError] during step: Verify organization_count\nMessage: Expected 1 organizations, got 2\n","statusTrace":"  File \"/home/runner/work/apolo-test-automation/apolo-test-automation/tests/reporting_hooks/reporting.py\", line 58, in wrapper\n    raise AssertionError(formatted_msg) from e\n","steps":[],"attachments":[{"uid":"4500d5b4c316d8fd","name":"Executed CLI command","source":"4500d5b4c316d8fd.txt","type":"text/plain","size":20},{"uid":"eac82784ff4e7ee2","name":"Executed CLI command output","source":"eac82784ff4e7ee2.txt","type":"text/plain","size":181}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"cda28d2596708da9","name":"log","source":"cda28d2596708da9.txt","type":"text/plain","size":12403}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":10,"attachmentsCount":26,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"add_page_manager::finalizer","time":{"start":1756002125534,"stop":1756002125534,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_cleanup::finalizer","time":{"start":1756002125534,"stop":1756002135394,"duration":9860},"status":"passed","steps":[{"name":"Post-test cleanup","time":{"start":1756002125534,"stop":1756002135394,"duration":9860},"status":"passed","steps":[],"attachments":[{"uid":"a60307ec1b3eabea","name":"Cleanup note","source":"a60307ec1b3eabea.txt","type":"text/plain","size":29}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},{"name":"api_helper::finalizer","time":{"start":1756002135395,"stop":1756002135395,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_function_scoped_runner::0","time":{"start":1756002135396,"stop":1756002135397,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"parentSuite","value":"CLI Tests"},{"name":"suite","value":"CLI Organization Structure Setup"},{"name":"tag","value":"asyncio"},{"name":"subSuite","value":"TestCLIOrganizationStructureSetup"},{"name":"host","value":"pkrvmqc4gcfdwos"},{"name":"thread","value":"5992-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_cases.tests_cli.test_organization_structure_setup"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":true,"retry":true,"extra":{"categories":[],"tags":["asyncio"]},"source":"9b71e4e6b40b9c1e.json","parameterValues":[]}