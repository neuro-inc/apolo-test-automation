{"uid":"a4fbb32cfaf711e5","name":"Admin create second secret via CLI","fullName":"tests.test_cases.tests_cli.test_secrets.TestCLISecrets#test_admin_create_second_secret_cli","historyId":"845e221e8b146c443519ec46a03e8fea","time":{"start":1757040956362,"stop":1757040987716,"duration":31354},"description":"\n- Login with valid credentials via **UI**.\n- Get Bearer auth token from Playwright local storage.\n- Create new organization via **API**.\n- Login with Bearer auth token via **CLI**.\n- Create new project via **CLI**.\n- Create first secret via **CLI**.\n\n### Verify that:\n\n- User can create second secret via **CLI**.\n","descriptionHtml":"<div style='line-height:1.6;'><ul>\n<li>Login with valid credentials via <strong>UI</strong>.</li>\n<li>Get Bearer auth token from Playwright local storage.</li>\n<li>Create new organization via <strong>API</strong>.</li>\n<li>Login with Bearer auth token via <strong>CLI</strong>.</li>\n<li>Create new project via <strong>CLI</strong>.</li>\n<li>Create first secret via <strong>CLI</strong>.</li>\n</ul>\n<h3>Verify that:</h3>\n<ul>\n<li>User can create second secret via <strong>CLI</strong>.</li>\n</ul></div>","status":"failed","statusMessage":"AssertionError: [AssertionError] during step: List secrets via CLI\nMessage: ERROR: Config /home/runner/.apolo/db is not a regular file. Please run 'apolo logout' and then 'apolo login'.","statusTrace":"tests/reporting_hooks/reporting.py:49: in wrapper\n    result = await func(*args, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^\ntests/test_cases/steps/cli_steps/comonent_steps_impl/secret_steps.py:40: in cli_list_secrets\n    assert result, error_message\n           ^^^^^^\nE   AssertionError: ERROR: Config /home/runner/.apolo/db is not a regular file. Please run 'apolo logout' and then 'apolo login'.\n\nThe above exception was the direct cause of the following exception:\ntests/test_cases/tests_cli/test_secrets.py:115: in test_admin_create_second_secret_cli\n    await self._cli_steps.secret.cli_list_secrets()\ntests/reporting_hooks/reporting.py:58: in wrapper\n    raise AssertionError(formatted_msg) from e\nE   AssertionError: [AssertionError] during step: List secrets via CLI\nE   Message: ERROR: Config /home/runner/.apolo/db is not a regular file. Please run 'apolo logout' and then 'apolo login'.","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"base_url","time":{"start":1757035899253,"stop":1757035899254,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop_policy","time":{"start":1757035899253,"stop":1757035899253,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"pytestconfig","time":{"start":1757035899253,"stop":1757035899253,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_output_dir","time":{"start":1757035899253,"stop":1757035899253,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_verify_url","time":{"start":1757035899254,"stop":1757035899254,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delay_worker_start","time":{"start":1757035899254,"stop":1757035929254,"duration":30000},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ensure_storage_directories","time":{"start":1757035929255,"stop":1757035929255,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_config","time":{"start":1757040953672,"stop":1757040953674,"duration":2},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"page_manager","time":{"start":1757040953674,"stop":1757040955841,"duration":2167},"status":"passed","steps":[],"attachments":[{"uid":"9494067adfa7de9c","name":"HTTP 200 - GET config","source":"9494067adfa7de9c.txt","type":"text/plain","size":654}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},{"name":"_function_scoped_runner","time":{"start":1757040953674,"stop":1757040953674,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"api_helper","time":{"start":1757040955841,"stop":1757040955842,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"users_manager","time":{"start":1757040955841,"stop":1757040955841,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"data_manager","time":{"start":1757040955841,"stop":1757040955841,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_cleanup","time":{"start":1757040955842,"stop":1757040955842,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"apolo_cli","time":{"start":1757040955842,"stop":1757040955842,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"add_page_manager","time":{"start":1757040955842,"stop":1757040955843,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_inject_fixtures","time":{"start":1757040955843,"stop":1757040955843,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup","time":{"start":1757040955843,"stop":1757040956362,"duration":519},"status":"passed","steps":[{"name":"Verify Apolo CLI client is installed","time":{"start":1757040955843,"stop":1757040956362,"duration":519},"status":"passed","steps":[],"attachments":[{"uid":"3daaef95e086cd19","name":"Executed CLI command","source":"3daaef95e086cd19.txt","type":"text/plain","size":15},{"uid":"8201db4c28e968b5","name":"Executed CLI command output","source":"8201db4c28e968b5.txt","type":"text/plain","size":28}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":2,"hasContent":true,"attachmentStep":false}],"testStage":{"description":"\n- Login with valid credentials via **UI**.\n- Get Bearer auth token from Playwright local storage.\n- Create new organization via **API**.\n- Login with Bearer auth token via **CLI**.\n- Create new project via **CLI**.\n- Create first secret via **CLI**.\n\n### Verify that:\n\n- User can create second secret via **CLI**.\n","descriptionHtml":"<div style='line-height:1.6;'><ul>\n<li>Login with valid credentials via <strong>UI</strong>.</li>\n<li>Get Bearer auth token from Playwright local storage.</li>\n<li>Create new organization via <strong>API</strong>.</li>\n<li>Login with Bearer auth token via <strong>CLI</strong>.</li>\n<li>Create new project via <strong>CLI</strong>.</li>\n<li>Create first secret via <strong>CLI</strong>.</li>\n</ul>\n<h3>Verify that:</h3>\n<ul>\n<li>User can create second secret via <strong>CLI</strong>.</li>\n</ul></div>","status":"failed","statusMessage":"AssertionError: [AssertionError] during step: List secrets via CLI\nMessage: ERROR: Config /home/runner/.apolo/db is not a regular file. Please run 'apolo logout' and then 'apolo login'.","statusTrace":"tests/reporting_hooks/reporting.py:49: in wrapper\n    result = await func(*args, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^\ntests/test_cases/steps/cli_steps/comonent_steps_impl/secret_steps.py:40: in cli_list_secrets\n    assert result, error_message\n           ^^^^^^\nE   AssertionError: ERROR: Config /home/runner/.apolo/db is not a regular file. Please run 'apolo logout' and then 'apolo login'.\n\nThe above exception was the direct cause of the following exception:\ntests/test_cases/tests_cli/test_secrets.py:115: in test_admin_create_second_secret_cli\n    await self._cli_steps.secret.cli_list_secrets()\ntests/reporting_hooks/reporting.py:58: in wrapper\n    raise AssertionError(formatted_msg) from e\nE   AssertionError: [AssertionError] during step: List secrets via CLI\nE   Message: ERROR: Config /home/runner/.apolo/db is not a regular file. Please run 'apolo logout' and then 'apolo login'.","steps":[{"name":"Login via UI","time":{"start":1757040956363,"stop":1757040963444,"duration":7081},"status":"passed","steps":[{"name":"Click login button","time":{"start":1757040956363,"stop":1757040957513,"duration":1150},"status":"passed","steps":[],"attachments":[{"uid":"102bc47a0cbf76f6","name":"Page URL","source":"102bc47a0cbf76f6.txt","type":"text/plain","size":33},{"uid":"2f76b594f1ce6054","name":"Screenshot: Click login button (success)","source":"2f76b594f1ce6054.png","type":"image/png","size":42214}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Enter email","time":{"start":1757040957513,"stop":1757040957654,"duration":141},"status":"passed","steps":[],"attachments":[{"uid":"4dba7b46978ce4fa","name":"Page URL","source":"4dba7b46978ce4fa.txt","type":"text/plain","size":215},{"uid":"9f0b061d190eb9e7","name":"Screenshot: Enter email (success)","source":"9f0b061d190eb9e7.png","type":"image/png","size":46533}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Enter password","time":{"start":1757040957654,"stop":1757040957813,"duration":159},"status":"passed","steps":[],"attachments":[{"uid":"ad0e7f9db69a2225","name":"Page URL","source":"ad0e7f9db69a2225.txt","type":"text/plain","size":215},{"uid":"183847765cd3e81e","name":"Screenshot: Enter password (success)","source":"183847765cd3e81e.png","type":"image/png","size":47058}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Click Continue button","time":{"start":1757040957813,"stop":1757040962244,"duration":4431},"status":"passed","steps":[],"attachments":[{"uid":"a9a7ce9c012ddea6","name":"Page URL","source":"a9a7ce9c012ddea6.txt","type":"text/plain","size":215},{"uid":"6451f42d74d3d23","name":"HTTP 200 - GET config","source":"6451f42d74d3d23.txt","type":"text/plain","size":752},{"uid":"4b042361a673d4fe","name":"HTTP 200 - GET permissions?uri=blob:","source":"4b042361a673d4fe.txt","type":"text/plain","size":163},{"uid":"2a1b0f63215ed110","name":"HTTP 200 - GET regression-e27snc45yo?include=orgs","source":"2a1b0f63215ed110.txt","type":"text/plain","size":360},{"uid":"f8b08f5b5e93d582","name":"HTTP 200 - GET incoming","source":"f8b08f5b5e93d582.txt","type":"text/plain","size":137},{"uid":"8c1c3b11fd0e6bca","name":"HTTP 200 - GET regression-e27snc45yo?include=clusters&include=system_role","source":"8c1c3b11fd0e6bca.txt","type":"text/plain","size":388},{"uid":"727827d0527de93e","name":"Screenshot: Click Continue button (success)","source":"727827d0527de93e.png","type":"image/png","size":160182}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":7,"hasContent":true,"attachmentStep":false},{"name":"Verify that Welcome new user page displayed","time":{"start":1757040962254,"stop":1757040963359,"duration":1105},"status":"passed","steps":[],"attachments":[{"uid":"989b19d26d962cdc","name":"Page URL","source":"989b19d26d962cdc.txt","type":"text/plain","size":44},{"uid":"5f25178a9a419273","name":"Screenshot: Verify that Welcome new user page displayed (success)","source":"5f25178a9a419273.png","type":"image/png","size":160182}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"17d2547e42e4640c","name":"Page URL","source":"17d2547e42e4640c.txt","type":"text/plain","size":33},{"uid":"244f8fd7953174a3","name":"Screenshot: Login via UI (success)","source":"244f8fd7953174a3.png","type":"image/png","size":160182}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":5,"attachmentsCount":17,"hasContent":true,"attachmentStep":false},{"name":"Add organization via API and reload page","time":{"start":1757040963444,"stop":1757040980482,"duration":17038},"status":"passed","steps":[{"name":"Reload page","time":{"start":1757040973582,"stop":1757040980400,"duration":6818},"status":"passed","steps":[],"attachments":[{"uid":"289c24d6cc65a9c","name":"Page URL","source":"289c24d6cc65a9c.txt","type":"text/plain","size":44},{"uid":"2432aea86c70978f","name":"HTTP 200 - GET config","source":"2432aea86c70978f.txt","type":"text/plain","size":1118},{"uid":"984ad1ae38301498","name":"HTTP 200 - GET incoming","source":"984ad1ae38301498.txt","type":"text/plain","size":137},{"uid":"159fd1ef3dad805b","name":"HTTP 200 - GET regression-e27snc45yo?include=orgs","source":"159fd1ef3dad805b.txt","type":"text/plain","size":455},{"uid":"c557abc4548a8ccb","name":"HTTP 200 - GET regression-e27snc45yo?include=clusters&include=system_role","source":"c557abc4548a8ccb.txt","type":"text/plain","size":510},{"uid":"56796a4866b491e","name":"HTTP 200 - GET regression-org-qvrl9tcidrlu","source":"56796a4866b491e.txt","type":"text/plain","size":425},{"uid":"909a93a8688c29cb","name":"HTTP 200 - GET permissions?uri=blob:","source":"909a93a8688c29cb.txt","type":"text/plain","size":236},{"uid":"5213139df7d1ab0","name":"Screenshot: Reload page (success)","source":"5213139df7d1ab0.png","type":"image/png","size":55782}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":8,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"33d5f57c682852d1","name":"Page URL","source":"33d5f57c682852d1.txt","type":"text/plain","size":44},{"uid":"f7c1f0cbdd198b7e","name":"Screenshot: Add organization via API and reload page (success)","source":"f7c1f0cbdd198b7e.png","type":"image/png","size":55782}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":10,"hasContent":true,"attachmentStep":false},{"name":"Login to apolo CLI with access token","time":{"start":1757040980482,"stop":1757040981475,"duration":993},"status":"passed","steps":[],"attachments":[{"uid":"df72957273c05cc7","name":"Executed CLI command","source":"df72957273c05cc7.txt","type":"text/plain","size":1114},{"uid":"9109c661fa74b6fa","name":"Executed CLI command output","source":"9109c661fa74b6fa.txt","type":"text/plain","size":264}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Add new project via apolo CLI","time":{"start":1757040981475,"stop":1757040985380,"duration":3905},"status":"passed","steps":[],"attachments":[{"uid":"4b48164f16cd0a9c","name":"Executed CLI command","source":"4b48164f16cd0a9c.txt","type":"text/plain","size":114},{"uid":"3c10903ba00f7397","name":"Executed CLI command output","source":"3c10903ba00f7397.txt","type":"text/plain","size":304}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Create secret via CLI","time":{"start":1757040985380,"stop":1757040986243,"duration":863},"status":"passed","steps":[],"attachments":[{"uid":"9fa17e1f9bf01726","name":"Executed CLI command","source":"9fa17e1f9bf01726.txt","type":"text/plain","size":39},{"uid":"bc500e5368900315","name":"Executed CLI command output","source":"bc500e5368900315.txt","type":"text/plain","size":0}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Create secret via CLI","time":{"start":1757040986243,"stop":1757040987086,"duration":843},"status":"passed","steps":[],"attachments":[{"uid":"5c445f9f783f642d","name":"Executed CLI command","source":"5c445f9f783f642d.txt","type":"text/plain","size":43},{"uid":"da48f00fe5b53602","name":"Executed CLI command output","source":"da48f00fe5b53602.txt","type":"text/plain","size":0}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"List secrets via CLI","time":{"start":1757040987086,"stop":1757040987714,"duration":628},"status":"failed","statusMessage":"AssertionError: [AssertionError] during step: List secrets via CLI\nMessage: ERROR: Config /home/runner/.apolo/db is not a regular file. Please run 'apolo logout' and then 'apolo login'.\n","statusTrace":"  File \"/home/runner/work/apolo-test-automation/apolo-test-automation/tests/reporting_hooks/reporting.py\", line 58, in wrapper\n    raise AssertionError(formatted_msg) from e\n","steps":[],"attachments":[{"uid":"b167c5e69d71860e","name":"Executed CLI command","source":"b167c5e69d71860e.txt","type":"text/plain","size":15},{"uid":"c66e9d4022cb8fa7","name":"Executed CLI command output","source":"c66e9d4022cb8fa7.txt","type":"text/plain","size":109}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"ef8c0d02ddd301db","name":"log","source":"ef8c0d02ddd301db.txt","type":"text/plain","size":18456}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":13,"attachmentsCount":38,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"add_page_manager::finalizer","time":{"start":1757040987733,"stop":1757040987733,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_cleanup::finalizer","time":{"start":1757040987734,"stop":1757040991875,"duration":4141},"status":"passed","steps":[{"name":"Post-test cleanup","time":{"start":1757040987734,"stop":1757040991875,"duration":4141},"status":"passed","steps":[{"name":"Delete organisation: regression-org-qvrl9tcidrlu","time":{"start":1757040991102,"stop":1757040991829,"duration":727},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"api_helper::finalizer","time":{"start":1757040991876,"stop":1757040991876,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_function_scoped_runner::0","time":{"start":1757040991877,"stop":1757040991878,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"parentSuite","value":"CLI Tests"},{"name":"suite","value":"CLI Secrets"},{"name":"tag","value":"asyncio"},{"name":"subSuite","value":"TestCLISecrets"},{"name":"host","value":"pkrvm7jw40e0xgp"},{"name":"thread","value":"5993-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_cases.tests_cli.test_secrets"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":true,"retry":true,"extra":{"categories":[],"tags":["asyncio"]},"source":"a4fbb32cfaf711e5.json","parameterValues":[]}