{"uid":"b6798d3049c38f77","name":"Admin removes himself from project via CLI","fullName":"tests.test_cases.tests_cli.test_project_remove_members.TestCLIProjectStructureSetup#test_admin_remove_himself_from_proj_cli","historyId":"b1bebe671c380049e3a7c59719859792","time":{"start":1756864895806,"stop":1756864948410,"duration":52604},"description":"\n- Login with valid credentials via **UI**.\n- Get Bearer auth token from Playwright local storage.\n- Create new organization via **API**.\n- Login with Bearer auth token via **CLI**.\n- Create new project via **CLI**.\n\n### Verify that:\n\n- `Admin` **cannot** remove himself from project via **CLI**.\n","descriptionHtml":"<div style='line-height:1.6;'><ul>\n<li>Login with valid credentials via <strong>UI</strong>.</li>\n<li>Get Bearer auth token from Playwright local storage.</li>\n<li>Create new organization via <strong>API</strong>.</li>\n<li>Login with Bearer auth token via <strong>CLI</strong>.</li>\n<li>Create new project via <strong>CLI</strong>.</li>\n</ul>\n<h3>Verify that:</h3>\n<ul>\n<li><span style='background-color:#D3D3D3; padding:2px 4px; border-radius:3px; font-family:monospace;'>Admin</span> <strong>cannot</strong> remove himself from project via <strong>CLI</strong>.</li>\n</ul></div>","status":"failed","statusMessage":"AssertionError: [AssertionError] during step: Remove user from project via CLI\nMessage:  Expected: ERROR: Illegal argument(s) (Last project admin cannot be removed), got: You are using apolo-extras tool 24.10.0, however 25.8.0 is available.\nERROR: Illegal argument(s) (Last project admin cannot be removed)","statusTrace":"tests/reporting_hooks/reporting.py:49: in wrapper\n    result = await func(*args, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^\ntests/test_cases/steps/cli_steps/comonent_steps_impl/admin_steps.py:151: in cli_remove_user_from_proj\n    assert error_message == expected_error, (\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nE   AssertionError:  Expected: ERROR: Illegal argument(s) (Last project admin cannot be removed), got: You are using apolo-extras tool 24.10.0, however 25.8.0 is available.\nE   ERROR: Illegal argument(s) (Last project admin cannot be removed)\n\nThe above exception was the direct cause of the following exception:\ntests/test_cases/tests_cli/test_project_remove_members.py:306: in test_admin_remove_himself_from_proj_cli\n    await self._cli_steps.admin.cli_remove_user_from_proj(\ntests/reporting_hooks/reporting.py:58: in wrapper\n    raise AssertionError(formatted_msg) from e\nE   AssertionError: [AssertionError] during step: Remove user from project via CLI\nE   Message:  Expected: ERROR: Illegal argument(s) (Last project admin cannot be removed), got: You are using apolo-extras tool 24.10.0, however 25.8.0 is available.\nE   ERROR: Illegal argument(s) (Last project admin cannot be removed)","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"delete_output_dir","time":{"start":1756863088372,"stop":1756863088372,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"pytestconfig","time":{"start":1756863088372,"stop":1756863088372,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop_policy","time":{"start":1756863088372,"stop":1756863088372,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_verify_url","time":{"start":1756863088373,"stop":1756863088373,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delay_worker_start","time":{"start":1756863088373,"stop":1756863103373,"duration":15000},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"base_url","time":{"start":1756863088373,"stop":1756863088373,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ensure_storage_directories","time":{"start":1756863103374,"stop":1756863103374,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_config","time":{"start":1756864893204,"stop":1756864893206,"duration":2},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_function_scoped_runner","time":{"start":1756864893206,"stop":1756864893206,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"page_manager","time":{"start":1756864893206,"stop":1756864895167,"duration":1961},"status":"passed","steps":[],"attachments":[{"uid":"bcfd984ff68e8548","name":"HTTP 200 - GET config","source":"bcfd984ff68e8548.txt","type":"text/plain","size":654}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},{"name":"data_manager","time":{"start":1756864895167,"stop":1756864895167,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"users_manager","time":{"start":1756864895167,"stop":1756864895167,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"api_helper","time":{"start":1756864895167,"stop":1756864895168,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_cleanup","time":{"start":1756864895168,"stop":1756864895169,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"apolo_cli","time":{"start":1756864895168,"stop":1756864895168,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_inject_fixtures","time":{"start":1756864895169,"stop":1756864895169,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"add_page_manager","time":{"start":1756864895169,"stop":1756864895169,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup","time":{"start":1756864895169,"stop":1756864895805,"duration":636},"status":"passed","steps":[{"name":"Verify Apolo CLI client is installed","time":{"start":1756864895170,"stop":1756864895805,"duration":635},"status":"passed","steps":[],"attachments":[{"uid":"3d8b48077544d256","name":"Executed CLI command","source":"3d8b48077544d256.txt","type":"text/plain","size":15},{"uid":"1f4b9a3a9f00ede5","name":"Executed CLI command output","source":"1f4b9a3a9f00ede5.txt","type":"text/plain","size":28}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":2,"hasContent":true,"attachmentStep":false}],"testStage":{"description":"\n- Login with valid credentials via **UI**.\n- Get Bearer auth token from Playwright local storage.\n- Create new organization via **API**.\n- Login with Bearer auth token via **CLI**.\n- Create new project via **CLI**.\n\n### Verify that:\n\n- `Admin` **cannot** remove himself from project via **CLI**.\n","descriptionHtml":"<div style='line-height:1.6;'><ul>\n<li>Login with valid credentials via <strong>UI</strong>.</li>\n<li>Get Bearer auth token from Playwright local storage.</li>\n<li>Create new organization via <strong>API</strong>.</li>\n<li>Login with Bearer auth token via <strong>CLI</strong>.</li>\n<li>Create new project via <strong>CLI</strong>.</li>\n</ul>\n<h3>Verify that:</h3>\n<ul>\n<li><span style='background-color:#D3D3D3; padding:2px 4px; border-radius:3px; font-family:monospace;'>Admin</span> <strong>cannot</strong> remove himself from project via <strong>CLI</strong>.</li>\n</ul></div>","status":"failed","statusMessage":"AssertionError: [AssertionError] during step: Remove user from project via CLI\nMessage:  Expected: ERROR: Illegal argument(s) (Last project admin cannot be removed), got: You are using apolo-extras tool 24.10.0, however 25.8.0 is available.\nERROR: Illegal argument(s) (Last project admin cannot be removed)","statusTrace":"tests/reporting_hooks/reporting.py:49: in wrapper\n    result = await func(*args, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^\ntests/test_cases/steps/cli_steps/comonent_steps_impl/admin_steps.py:151: in cli_remove_user_from_proj\n    assert error_message == expected_error, (\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nE   AssertionError:  Expected: ERROR: Illegal argument(s) (Last project admin cannot be removed), got: You are using apolo-extras tool 24.10.0, however 25.8.0 is available.\nE   ERROR: Illegal argument(s) (Last project admin cannot be removed)\n\nThe above exception was the direct cause of the following exception:\ntests/test_cases/tests_cli/test_project_remove_members.py:306: in test_admin_remove_himself_from_proj_cli\n    await self._cli_steps.admin.cli_remove_user_from_proj(\ntests/reporting_hooks/reporting.py:58: in wrapper\n    raise AssertionError(formatted_msg) from e\nE   AssertionError: [AssertionError] during step: Remove user from project via CLI\nE   Message:  Expected: ERROR: Illegal argument(s) (Last project admin cannot be removed), got: You are using apolo-extras tool 24.10.0, however 25.8.0 is available.\nE   ERROR: Illegal argument(s) (Last project admin cannot be removed)","steps":[{"name":"Login via UI","time":{"start":1756864895806,"stop":1756864909425,"duration":13619},"status":"passed","steps":[{"name":"Click login button","time":{"start":1756864895806,"stop":1756864896742,"duration":936},"status":"passed","steps":[],"attachments":[{"uid":"a169394754f69f11","name":"Page URL","source":"a169394754f69f11.txt","type":"text/plain","size":33},{"uid":"fe8094d690d223d","name":"Screenshot: Click login button (success)","source":"fe8094d690d223d.png","type":"image/png","size":41932}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Enter email","time":{"start":1756864896742,"stop":1756864896905,"duration":163},"status":"passed","steps":[],"attachments":[{"uid":"1de42b411b637201","name":"Page URL","source":"1de42b411b637201.txt","type":"text/plain","size":215},{"uid":"37817faf61859dff","name":"Screenshot: Enter email (success)","source":"37817faf61859dff.png","type":"image/png","size":45608}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Enter password","time":{"start":1756864896906,"stop":1756864897067,"duration":161},"status":"passed","steps":[],"attachments":[{"uid":"79a059192cdbb4f3","name":"Page URL","source":"79a059192cdbb4f3.txt","type":"text/plain","size":215},{"uid":"7fa70b6fded24efd","name":"Screenshot: Enter password (success)","source":"7fa70b6fded24efd.png","type":"image/png","size":46397}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Click Continue button","time":{"start":1756864897067,"stop":1756864908220,"duration":11153},"status":"passed","steps":[],"attachments":[{"uid":"3300b57e9e0d1c5","name":"Page URL","source":"3300b57e9e0d1c5.txt","type":"text/plain","size":215},{"uid":"da47dd0071e66f97","name":"HTTP 200 - GET config","source":"da47dd0071e66f97.txt","type":"text/plain","size":752},{"uid":"27507132918ae88a","name":"HTTP 200 - GET permissions?uri=blob:","source":"27507132918ae88a.txt","type":"text/plain","size":163},{"uid":"b946d329d9cdf5a9","name":"HTTP 200 - GET incoming","source":"b946d329d9cdf5a9.txt","type":"text/plain","size":137},{"uid":"5e783f88da28a791","name":"HTTP 200 - GET regression-rcyu62ifjr?include=orgs","source":"5e783f88da28a791.txt","type":"text/plain","size":360},{"uid":"3852d41ae440ad59","name":"HTTP 200 - GET regression-rcyu62ifjr?include=clusters&include=system_role","source":"3852d41ae440ad59.txt","type":"text/plain","size":388},{"uid":"c393a2787c132d5a","name":"Screenshot: Click Continue button (success)","source":"c393a2787c132d5a.png","type":"image/png","size":160036}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":7,"hasContent":true,"attachmentStep":false},{"name":"Verify that Welcome new user page displayed","time":{"start":1756864908230,"stop":1756864909334,"duration":1104},"status":"passed","steps":[],"attachments":[{"uid":"aeb12581a6ee4413","name":"Page URL","source":"aeb12581a6ee4413.txt","type":"text/plain","size":44},{"uid":"af87a90194048258","name":"Screenshot: Verify that Welcome new user page displayed (success)","source":"af87a90194048258.png","type":"image/png","size":160036}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"333ba24aba273418","name":"Page URL","source":"333ba24aba273418.txt","type":"text/plain","size":33},{"uid":"85c1784440fc9d3b","name":"Screenshot: Login via UI (success)","source":"85c1784440fc9d3b.png","type":"image/png","size":160036}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":5,"attachmentsCount":17,"hasContent":true,"attachmentStep":false},{"name":"Add organization via API and reload page","time":{"start":1756864909425,"stop":1756864932402,"duration":22977},"status":"passed","steps":[{"name":"Reload page","time":{"start":1756864922958,"stop":1756864932320,"duration":9362},"status":"passed","steps":[],"attachments":[{"uid":"d652c76df6b91df","name":"Page URL","source":"d652c76df6b91df.txt","type":"text/plain","size":44},{"uid":"1d442c9521f8d15d","name":"HTTP 200 - GET config","source":"1d442c9521f8d15d.txt","type":"text/plain","size":1118},{"uid":"469b7f6fd2947ae1","name":"HTTP 200 - GET permissions?uri=blob:","source":"469b7f6fd2947ae1.txt","type":"text/plain","size":236},{"uid":"e1186c33781c6ff4","name":"HTTP 200 - GET regression-org-2xw4wta6yisi","source":"e1186c33781c6ff4.txt","type":"text/plain","size":425},{"uid":"fe8c38995002d935","name":"HTTP 200 - GET regression-rcyu62ifjr?include=orgs","source":"fe8c38995002d935.txt","type":"text/plain","size":455},{"uid":"d01877c87425d7a8","name":"HTTP 200 - GET regression-rcyu62ifjr?include=clusters&include=system_role","source":"d01877c87425d7a8.txt","type":"text/plain","size":510},{"uid":"ec11e8fe73561906","name":"Screenshot: Reload page (success)","source":"ec11e8fe73561906.png","type":"image/png","size":57351}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":7,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"3af8b72f2fe475f9","name":"Page URL","source":"3af8b72f2fe475f9.txt","type":"text/plain","size":44},{"uid":"bc069fbfce01463","name":"Screenshot: Add organization via API and reload page (success)","source":"bc069fbfce01463.png","type":"image/png","size":57351}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":9,"hasContent":true,"attachmentStep":false},{"name":"Login to apolo CLI with access token","time":{"start":1756864932402,"stop":1756864939969,"duration":7567},"status":"passed","steps":[],"attachments":[{"uid":"fd30d2202f436c6d","name":"HTTP 200 - GET incoming","source":"fd30d2202f436c6d.txt","type":"text/plain","size":137},{"uid":"4adc9798342e0ff6","name":"Executed CLI command","source":"4adc9798342e0ff6.txt","type":"text/plain","size":1114},{"uid":"144713c135398b25","name":"Executed CLI command output","source":"144713c135398b25.txt","type":"text/plain","size":264}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":3,"hasContent":true,"attachmentStep":false},{"name":"Add new project via apolo CLI","time":{"start":1756864939969,"stop":1756864946584,"duration":6615},"status":"passed","steps":[],"attachments":[{"uid":"ce10a7b299960fbc","name":"Executed CLI command","source":"ce10a7b299960fbc.txt","type":"text/plain","size":114},{"uid":"c8ca49b94b160e8c","name":"Executed CLI command output","source":"c8ca49b94b160e8c.txt","type":"text/plain","size":304}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Get project users via CLI","time":{"start":1756864946584,"stop":1756864947515,"duration":931},"status":"passed","steps":[],"attachments":[{"uid":"c7199ac85b993cc","name":"Executed CLI command","source":"c7199ac85b993cc.txt","type":"text/plain","size":98},{"uid":"f6605014d3743759","name":"Executed CLI command output","source":"f6605014d3743759.txt","type":"text/plain","size":768}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Verify user present in get-project-users output via CLI","time":{"start":1756864947515,"stop":1756864947516,"duration":1},"status":"passed","steps":[],"attachments":[{"uid":"a67c55a51dd5ce28","name":"Executed CLI command","source":"a67c55a51dd5ce28.txt","type":"text/plain","size":98},{"uid":"3be6528dfe588a99","name":"Executed CLI command output","source":"3be6528dfe588a99.txt","type":"text/plain","size":768}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Remove user from project via CLI","time":{"start":1756864947516,"stop":1756864948409,"duration":893},"status":"failed","statusMessage":"AssertionError: [AssertionError] during step: Remove user from project via CLI\nMessage:  Expected: ERROR: Illegal argument(s) (Last project admin cannot be removed), got: You are using apolo-extras tool 24.10.0, however 25.8.0 is available.\nERROR: Illegal argument(s) (Last project admin cannot be removed)\n","statusTrace":"  File \"/home/runner/work/apolo-test-automation/apolo-test-automation/tests/reporting_hooks/reporting.py\", line 58, in wrapper\n    raise AssertionError(formatted_msg) from e\n","steps":[],"attachments":[{"uid":"4c42b150f787a6eb","name":"Executed CLI command","source":"4c42b150f787a6eb.txt","type":"text/plain","size":122},{"uid":"dcf6bf4dd7cf92fc","name":"Executed CLI command output","source":"dcf6bf4dd7cf92fc.txt","type":"text/plain","size":135}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"12b0bead315e3512","name":"log","source":"12b0bead315e3512.txt","type":"text/plain","size":19624}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":13,"attachmentsCount":38,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"add_page_manager::finalizer","time":{"start":1756864948438,"stop":1756864948438,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_cleanup::finalizer","time":{"start":1756864948439,"stop":1756864952227,"duration":3788},"status":"passed","steps":[{"name":"Post-test cleanup","time":{"start":1756864948439,"stop":1756864952227,"duration":3788},"status":"passed","steps":[{"name":"Delete organisation: regression-org-2xw4wta6yisi","time":{"start":1756864951729,"stop":1756864952174,"duration":445},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"api_helper::finalizer","time":{"start":1756864952228,"stop":1756864952228,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_function_scoped_runner::0","time":{"start":1756864952230,"stop":1756864952230,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"suite","value":"CLI Project Remove Members"},{"name":"parentSuite","value":"CLI Tests"},{"name":"tag","value":"asyncio"},{"name":"subSuite","value":"TestCLIProjectStructureSetup"},{"name":"host","value":"pkrvm7jw40e0xgp"},{"name":"thread","value":"5923-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_cases.tests_cli.test_project_remove_members"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":true,"retry":true,"extra":{"categories":[],"tags":["asyncio"]},"source":"b6798d3049c38f77.json","parameterValues":[]}