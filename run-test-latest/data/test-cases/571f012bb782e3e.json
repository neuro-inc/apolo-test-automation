{"uid":"571f012bb782e3e","name":"User without organization logs in with auth token via CLI","fullName":"tests.test_cases.tests_cli.test_cli_login.TestCLILogin#test_login_with_token_cli","historyId":"fd27a26b14b2678c9927d4e7b4c1ac77","time":{"start":1767835997767,"stop":1767836014359,"duration":16592},"description":"\n- Login with valid credentials **via UI**.\n- Get Bearer auth token from Playwright local storage.\n\n### Verify that:\n\n- User can login with Bearer auth token **via CLI**.\n- Login output in CLI doesn't contain `organization` and `project`.\n","descriptionHtml":"<div style='line-height:1.6;'><ul>\n<li>Login with valid credentials <strong>via UI</strong>.</li>\n<li>Get Bearer auth token from Playwright local storage.</li>\n</ul>\n<h3>Verify that:</h3>\n<ul>\n<li>User can login with Bearer auth token <strong>via CLI</strong>.</li>\n<li>Login output in CLI doesn't contain <span style='background-color:#D3D3D3; padding:2px 4px; border-radius:3px; font-family:monospace;'>organization</span> and <span style='background-color:#D3D3D3; padding:2px 4px; border-radius:3px; font-family:monospace;'>project</span>.</li>\n</ul></div>","status":"failed","statusMessage":"AssertionError: [AssertionError] during step: Login to apolo CLI with access token\nMessage: ERROR: No clusters configured","statusTrace":"tests/reporting_hooks/reporting.py:49: in wrapper\n    result = await func(*args, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^\ntests/test_cases/steps/cli_steps/comonent_steps_impl/config_steps.py:26: in cli_login_with_token\n    assert result, error_message\n           ^^^^^^\nE   AssertionError: ERROR: No clusters configured\n\nThe above exception was the direct cause of the following exception:\ntests/test_cases/tests_cli/test_cli_login.py:33: in test_login_with_token_cli\n    await self._cli_steps.config.cli_login_with_token(token=user.token)\ntests/reporting_hooks/reporting.py:58: in wrapper\n    raise AssertionError(formatted_msg) from e\nE   AssertionError: [AssertionError] during step: Login to apolo CLI with access token\nE   Message: ERROR: No clusters configured","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":1,"retriesStatusChange":false,"beforeStages":[{"name":"test_config","time":{"start":1767835996568,"stop":1767835996571,"duration":3},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"page_manager","time":{"start":1767835996571,"stop":1767835997260,"duration":689},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_function_scoped_runner","time":{"start":1767835996572,"stop":1767835996572,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"users_manager","time":{"start":1767835997260,"stop":1767835997260,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"data_manager","time":{"start":1767835997260,"stop":1767835997260,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"api_helper","time":{"start":1767835997260,"stop":1767835997261,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"apolo_cli","time":{"start":1767835997261,"stop":1767835997261,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_cleanup","time":{"start":1767835997261,"stop":1767835997262,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_inject_fixtures","time":{"start":1767835997262,"stop":1767835997262,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup","time":{"start":1767835997262,"stop":1767835997766,"duration":504},"status":"passed","steps":[{"name":"Verify Apolo CLI client is installed","time":{"start":1767835997263,"stop":1767835997766,"duration":503},"status":"passed","steps":[],"attachments":[{"uid":"5a74e8e3e5b8342","name":"Executed CLI command","source":"5a74e8e3e5b8342.txt","type":"text/plain","size":15},{"uid":"dfc5258d510d7dd","name":"Executed CLI command output","source":"dfc5258d510d7dd.txt","type":"text/plain","size":28}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"add_page_manager","time":{"start":1767835997262,"stop":1767835997262,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"\n- Login with valid credentials **via UI**.\n- Get Bearer auth token from Playwright local storage.\n\n### Verify that:\n\n- User can login with Bearer auth token **via CLI**.\n- Login output in CLI doesn't contain `organization` and `project`.\n","descriptionHtml":"<div style='line-height:1.6;'><ul>\n<li>Login with valid credentials <strong>via UI</strong>.</li>\n<li>Get Bearer auth token from Playwright local storage.</li>\n</ul>\n<h3>Verify that:</h3>\n<ul>\n<li>User can login with Bearer auth token <strong>via CLI</strong>.</li>\n<li>Login output in CLI doesn't contain <span style='background-color:#D3D3D3; padding:2px 4px; border-radius:3px; font-family:monospace;'>organization</span> and <span style='background-color:#D3D3D3; padding:2px 4px; border-radius:3px; font-family:monospace;'>project</span>.</li>\n</ul></div>","status":"failed","statusMessage":"AssertionError: [AssertionError] during step: Login to apolo CLI with access token\nMessage: ERROR: No clusters configured","statusTrace":"tests/reporting_hooks/reporting.py:49: in wrapper\n    result = await func(*args, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^\ntests/test_cases/steps/cli_steps/comonent_steps_impl/config_steps.py:26: in cli_login_with_token\n    assert result, error_message\n           ^^^^^^\nE   AssertionError: ERROR: No clusters configured\n\nThe above exception was the direct cause of the following exception:\ntests/test_cases/tests_cli/test_cli_login.py:33: in test_login_with_token_cli\n    await self._cli_steps.config.cli_login_with_token(token=user.token)\ntests/reporting_hooks/reporting.py:58: in wrapper\n    raise AssertionError(formatted_msg) from e\nE   AssertionError: [AssertionError] during step: Login to apolo CLI with access token\nE   Message: ERROR: No clusters configured","steps":[{"name":"Login via UI","time":{"start":1767835997768,"stop":1767836012896,"duration":15128},"status":"passed","steps":[{"name":"Verify that Auth page displayed","time":{"start":1767835997768,"stop":1767835997905,"duration":137},"status":"passed","steps":[],"attachments":[{"uid":"48780fcef3f735d2","name":"Page URL","source":"48780fcef3f735d2.txt","type":"text/plain","size":33},{"uid":"9ee349a087c48401","name":"HTTP 200 - GET config","source":"9ee349a087c48401.txt","type":"text/plain","size":673},{"uid":"450a3f59f7994edc","name":"Screenshot: Verify that Auth page displayed (success)","source":"450a3f59f7994edc.png","type":"image/png","size":88563}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":3,"hasContent":true,"attachmentStep":false},{"name":"Click login button","time":{"start":1767835997905,"stop":1767835998897,"duration":992},"status":"passed","steps":[],"attachments":[{"uid":"9b49d07e31ca2aa7","name":"Page URL","source":"9b49d07e31ca2aa7.txt","type":"text/plain","size":33},{"uid":"91fe82ab91b45a7c","name":"Screenshot: Click login button (success)","source":"91fe82ab91b45a7c.png","type":"image/png","size":41342}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Verify that Login page displayed","time":{"start":1767835998897,"stop":1767835998980,"duration":83},"status":"passed","steps":[],"attachments":[{"uid":"c2c3739d6c89446e","name":"Page URL","source":"c2c3739d6c89446e.txt","type":"text/plain","size":215},{"uid":"b3e5d8736c29824e","name":"Screenshot: Verify that Login page displayed (success)","source":"b3e5d8736c29824e.png","type":"image/png","size":41565}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Enter email","time":{"start":1767835998980,"stop":1767835999299,"duration":319},"status":"passed","steps":[],"attachments":[{"uid":"a414d874f6f3b37f","name":"Page URL","source":"a414d874f6f3b37f.txt","type":"text/plain","size":215},{"uid":"5d90f9859b1538a3","name":"Screenshot: Enter email (success)","source":"5d90f9859b1538a3.png","type":"image/png","size":45248}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Enter password","time":{"start":1767835999299,"stop":1767835999600,"duration":301},"status":"passed","steps":[],"attachments":[{"uid":"794163beaed9fa8c","name":"Page URL","source":"794163beaed9fa8c.txt","type":"text/plain","size":215},{"uid":"150a99dd951edaad","name":"Screenshot: Enter password (success)","source":"150a99dd951edaad.png","type":"image/png","size":45409}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Click Continue button","time":{"start":1767835999600,"stop":1767836011715,"duration":12115},"status":"passed","steps":[],"attachments":[{"uid":"cb272f76d275d05a","name":"Page URL","source":"cb272f76d275d05a.txt","type":"text/plain","size":215},{"uid":"df7b61cc746a44e5","name":"HTTP 200 - GET config","source":"df7b61cc746a44e5.txt","type":"text/plain","size":832},{"uid":"e1d37c3ba7ee8ee2","name":"HTTP 200 - GET permissions?uri=blob:","source":"e1d37c3ba7ee8ee2.txt","type":"text/plain","size":182},{"uid":"82d44029e5ee7074","name":"HTTP 200 - GET incoming","source":"82d44029e5ee7074.txt","type":"text/plain","size":156},{"uid":"153853a663351a72","name":"HTTP 200 - GET regression-zokdt77o7j?include=orgs","source":"153853a663351a72.txt","type":"text/plain","size":379},{"uid":"117550cb00fc17e8","name":"HTTP 200 - GET regression-zokdt77o7j?include=clusters&include=system_role","source":"117550cb00fc17e8.txt","type":"text/plain","size":407},{"uid":"c878238074682b2f","name":"Screenshot: Click Continue button (success)","source":"c878238074682b2f.png","type":"image/png","size":159419}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":7,"hasContent":true,"attachmentStep":false},{"name":"Verify that Welcome new user page displayed","time":{"start":1767836011727,"stop":1767836012815,"duration":1088},"status":"passed","steps":[],"attachments":[{"uid":"8828123485e77d5c","name":"Page URL","source":"8828123485e77d5c.txt","type":"text/plain","size":44},{"uid":"25d16fa9c511aba5","name":"Screenshot: Verify that Welcome new user page displayed (success)","source":"25d16fa9c511aba5.png","type":"image/png","size":159419}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"1a67b0837fae850","name":"Page URL","source":"1a67b0837fae850.txt","type":"text/plain","size":33},{"uid":"738378c3b70484b9","name":"Screenshot: Login via UI (success)","source":"738378c3b70484b9.png","type":"image/png","size":159419}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":7,"attachmentsCount":22,"hasContent":true,"attachmentStep":false},{"name":"Login to apolo CLI with access token","time":{"start":1767836012897,"stop":1767836014358,"duration":1461},"status":"failed","statusMessage":"AssertionError: [AssertionError] during step: Login to apolo CLI with access token\nMessage: ERROR: No clusters configured\n","statusTrace":"  File \"/home/runner/work/apolo-test-automation/apolo-test-automation/tests/reporting_hooks/reporting.py\", line 58, in wrapper\n    raise AssertionError(formatted_msg) from e\n","steps":[],"attachments":[{"uid":"a7465ae3f7d5f298","name":"Executed CLI command","source":"a7465ae3f7d5f298.txt","type":"text/plain","size":1114},{"uid":"ccf6473026cd5c53","name":"Executed CLI command output","source":"ccf6473026cd5c53.txt","type":"text/plain","size":29}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"84923daff4aee0f0","name":"log","source":"84923daff4aee0f0.txt","type":"text/plain","size":40301}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":9,"attachmentsCount":25,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"add_page_manager::finalizer","time":{"start":1767836014368,"stop":1767836014369,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_cleanup::finalizer","time":{"start":1767836014369,"stop":1767836014369,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_cleanup::finalizer","time":{"start":1767836014369,"stop":1767836018100,"duration":3731},"status":"passed","steps":[{"name":"Post-test cleanup","time":{"start":1767836014369,"stop":1767836018100,"duration":3731},"status":"passed","steps":[],"attachments":[{"uid":"389108fdba9d4f4b","name":"Cleanup note","source":"389108fdba9d4f4b.txt","type":"text/plain","size":29}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},{"name":"api_helper::finalizer","time":{"start":1767836018101,"stop":1767836018101,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_function_scoped_runner::0","time":{"start":1767836018102,"stop":1767836018103,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"parentSuite","value":"CLI Tests"},{"name":"suite","value":"CLI Login"},{"name":"tag","value":"asyncio"},{"name":"subSuite","value":"TestCLILogin"},{"name":"host","value":"runnervmh13bl"},{"name":"thread","value":"3019-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_cases.tests_cli.test_cli_login"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"5b19839fbe8425e1","status":"failed","statusDetails":"AssertionError: [AssertionError] during step: Login to apolo CLI with access token\nMessage: ERROR: No clusters configured","time":{"start":1767835955083,"stop":1767835981707,"duration":26624}}],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":44,"broken":0,"skipped":0,"passed":117,"unknown":0,"total":161},"items":[{"uid":"842a98a86c1e1d93","status":"failed","statusDetails":"AssertionError: [AssertionError] during step: Login to apolo CLI with access token\nMessage: ERROR: No clusters configured","time":{"start":1767749685472,"stop":1767749701681,"duration":16209}},{"uid":"ff96dd6c3e4440fd","status":"failed","statusDetails":"AssertionError: [AssertionError] during step: Login to apolo CLI with access token\nMessage: ERROR: No clusters configured","time":{"start":1767663188343,"stop":1767663204792,"duration":16449}},{"uid":"8f2bd2ea5cf35409","status":"failed","statusDetails":"AssertionError: [AssertionError] during step: Login to apolo CLI with access token\nMessage: ERROR: No clusters configured","time":{"start":1767576855420,"stop":1767576872150,"duration":16730}},{"uid":"9f007fed1f584a0d","status":"failed","statusDetails":"AssertionError: [AssertionError] during step: Login to apolo CLI with access token\nMessage: ERROR: No clusters configured","time":{"start":1767490409862,"stop":1767490425743,"duration":15881}},{"uid":"df22050b5b8afa94","status":"failed","statusDetails":"AssertionError: [AssertionError] during step: Login to apolo CLI with access token\nMessage: ERROR: No clusters configured","time":{"start":1767403942928,"stop":1767403959165,"duration":16237}},{"uid":"17c25dd951ee0cfb","status":"failed","statusDetails":"AssertionError: [AssertionError] during step: Login to apolo CLI with access token\nMessage: ERROR: No clusters configured","time":{"start":1767317724373,"stop":1767317844396,"duration":120023}},{"uid":"b75dd03184750bd2","status":"failed","statusDetails":"AssertionError: [AssertionError] during step: Login to apolo CLI with access token\nMessage: ERROR: No clusters configured","time":{"start":1767231275585,"stop":1767231292643,"duration":17058}},{"uid":"3380e7af89582db7","status":"failed","statusDetails":"AssertionError: [AssertionError] during step: Login to apolo CLI with access token\nMessage: ERROR: No clusters configured","time":{"start":1767144863030,"stop":1767144879659,"duration":16629}},{"uid":"6e712b6f33634852","status":"failed","statusDetails":"AssertionError: [AssertionError] during step: Login to apolo CLI with access token\nMessage: ERROR: No clusters configured","time":{"start":1767058474912,"stop":1767058491815,"duration":16903}},{"uid":"55ce1452da54ea95","status":"failed","statusDetails":"AssertionError: [AssertionError] during step: Login to apolo CLI with access token\nMessage: ERROR: No clusters configured","time":{"start":1766972007799,"stop":1766972024067,"duration":16268}},{"uid":"8a7b9be4742e9898","status":"failed","statusDetails":"AssertionError: [AssertionError] during step: Login to apolo CLI with access token\nMessage: ERROR: No clusters configured","time":{"start":1766885720236,"stop":1766885736950,"duration":16714}},{"uid":"57e293604de818a8","status":"failed","statusDetails":"AssertionError: [AssertionError] during step: Login to apolo CLI with access token\nMessage: ERROR: No clusters configured","time":{"start":1766799153124,"stop":1766799169423,"duration":16299}},{"uid":"59f8f32d6112500c","status":"failed","statusDetails":"AssertionError: [AssertionError] during step: Login to apolo CLI with access token\nMessage: ERROR: No clusters configured","time":{"start":1766712795538,"stop":1766712812464,"duration":16926}},{"uid":"a4ca7c1d335ae64b","status":"failed","statusDetails":"AssertionError: [AssertionError] during step: Login to apolo CLI with access token\nMessage: ERROR: No clusters configured","time":{"start":1766626387363,"stop":1766626403755,"duration":16392}},{"uid":"8b1a6a0541687252","status":"failed","statusDetails":"AssertionError: [AssertionError] during step: Login to apolo CLI with access token\nMessage: ERROR: No clusters configured","time":{"start":1766539980920,"stop":1766539997268,"duration":16348}},{"uid":"8ff04f73b51495e3","status":"failed","statusDetails":"AssertionError: [AssertionError] during step: Login to apolo CLI with access token\nMessage: ERROR: No clusters configured","time":{"start":1766453582385,"stop":1766453599254,"duration":16869}},{"uid":"96354127901c8236","status":"failed","statusDetails":"AssertionError: [AssertionError] during step: Login to apolo CLI with access token\nMessage: ERROR: No clusters configured","time":{"start":1766367282021,"stop":1766367298853,"duration":16832}},{"uid":"aaf6a7f39c73ed41","status":"failed","statusDetails":"AssertionError: [AssertionError] during step: Login to apolo CLI with access token\nMessage: ERROR: No clusters configured","time":{"start":1766280818284,"stop":1766280835969,"duration":17685}},{"uid":"820f1718e1e7779","status":"failed","statusDetails":"AssertionError: [AssertionError] during step: Login to apolo CLI with access token\nMessage: ERROR: No clusters configured","time":{"start":1766194422973,"stop":1766194439532,"duration":16559}},{"uid":"264bede1f2b6fe44","status":"failed","statusDetails":"AssertionError: [AssertionError] during step: Login to apolo CLI with access token\nMessage: ERROR: No clusters configured","time":{"start":1766108046765,"stop":1766108063979,"duration":17214}}]},"tags":["asyncio"]},"source":"571f012bb782e3e.json","parameterValues":[]}