{"uid":"60d8eec33ce542da","name":"User with organization and project logs in with auth token via CLI","fullName":"tests.test_cases.tests_cli.test_cli_login.TestCLILogin#test_login_org_proj_with_token_cli","historyId":"e450c2e3ba392e5ab19b9253dfdf7207","time":{"start":1759464031967,"stop":1759464067980,"duration":36013},"description":"\n- Login with valid credentials via **UI**.\n- Get Bearer auth token from Playwright local storage.\n- Create organization via API.\n- Create project via API.\n\n### Verify that:\n\n- User can login with Bearer auth token via CLI.\n- Login output in CLI contain valid organization and project.\n","descriptionHtml":"<div style='line-height:1.6;'><ul>\n<li>Login with valid credentials via <strong>UI</strong>.</li>\n<li>Get Bearer auth token from Playwright local storage.</li>\n<li>Create organization via API.</li>\n<li>Create project via API.</li>\n</ul>\n<h3>Verify that:</h3>\n<ul>\n<li>User can login with Bearer auth token via CLI.</li>\n<li>Login output in CLI contain valid organization and project.</li>\n</ul></div>","status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":true,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"test_config","time":{"start":1759464029003,"stop":1759464029007,"duration":4},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"page_manager","time":{"start":1759464029007,"stop":1759464031370,"duration":2363},"status":"passed","steps":[],"attachments":[{"uid":"fa7867620eee96a5","name":"HTTP 200 - GET config","source":"fa7867620eee96a5.txt","type":"text/plain","size":654}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},{"name":"_function_scoped_runner","time":{"start":1759464029007,"stop":1759464029007,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"data_manager","time":{"start":1759464031370,"stop":1759464031370,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"users_manager","time":{"start":1759464031370,"stop":1759464031370,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"api_helper","time":{"start":1759464031371,"stop":1759464031371,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"apolo_cli","time":{"start":1759464031371,"stop":1759464031371,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_cleanup","time":{"start":1759464031371,"stop":1759464031372,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_inject_fixtures","time":{"start":1759464031372,"stop":1759464031373,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"add_page_manager","time":{"start":1759464031372,"stop":1759464031372,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup","time":{"start":1759464031373,"stop":1759464031967,"duration":594},"status":"passed","steps":[{"name":"Verify Apolo CLI client is installed","time":{"start":1759464031373,"stop":1759464031967,"duration":594},"status":"passed","steps":[],"attachments":[{"uid":"6798c857ca911917","name":"Executed CLI command","source":"6798c857ca911917.txt","type":"text/plain","size":15},{"uid":"69e62245361b2250","name":"Executed CLI command output","source":"69e62245361b2250.txt","type":"text/plain","size":28}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":2,"hasContent":true,"attachmentStep":false}],"testStage":{"description":"\n- Login with valid credentials via **UI**.\n- Get Bearer auth token from Playwright local storage.\n- Create organization via API.\n- Create project via API.\n\n### Verify that:\n\n- User can login with Bearer auth token via CLI.\n- Login output in CLI contain valid organization and project.\n","descriptionHtml":"<div style='line-height:1.6;'><ul>\n<li>Login with valid credentials via <strong>UI</strong>.</li>\n<li>Get Bearer auth token from Playwright local storage.</li>\n<li>Create organization via API.</li>\n<li>Create project via API.</li>\n</ul>\n<h3>Verify that:</h3>\n<ul>\n<li>User can login with Bearer auth token via CLI.</li>\n<li>Login output in CLI contain valid organization and project.</li>\n</ul></div>","status":"passed","steps":[{"name":"Login via UI","time":{"start":1759464031968,"stop":1759464038989,"duration":7021},"status":"passed","steps":[{"name":"Click login button","time":{"start":1759464031968,"stop":1759464033032,"duration":1064},"status":"passed","steps":[],"attachments":[{"uid":"77e473e46cc1f935","name":"Page URL","source":"77e473e46cc1f935.txt","type":"text/plain","size":33},{"uid":"c644762aa9c2f069","name":"Screenshot: Click login button (success)","source":"c644762aa9c2f069.png","type":"image/png","size":41537}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Enter email","time":{"start":1759464033032,"stop":1759464033390,"duration":358},"status":"passed","steps":[],"attachments":[{"uid":"dbfc4136ac26af96","name":"Page URL","source":"dbfc4136ac26af96.txt","type":"text/plain","size":215},{"uid":"6409927684ad1018","name":"Screenshot: Enter email (success)","source":"6409927684ad1018.png","type":"image/png","size":45755}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Enter password","time":{"start":1759464033390,"stop":1759464033741,"duration":351},"status":"passed","steps":[],"attachments":[{"uid":"34708ab42e1f7e33","name":"Page URL","source":"34708ab42e1f7e33.txt","type":"text/plain","size":215},{"uid":"3e60b8736998552b","name":"Screenshot: Enter password (success)","source":"3e60b8736998552b.png","type":"image/png","size":45902}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Click Continue button","time":{"start":1759464033741,"stop":1759464037790,"duration":4049},"status":"passed","steps":[],"attachments":[{"uid":"3713050fe5c6bce4","name":"Page URL","source":"3713050fe5c6bce4.txt","type":"text/plain","size":215},{"uid":"e0129b9a2e1d9fee","name":"HTTP 200 - GET config","source":"e0129b9a2e1d9fee.txt","type":"text/plain","size":752},{"uid":"1c69f030430f8dfb","name":"HTTP 200 - GET permissions?uri=blob:","source":"1c69f030430f8dfb.txt","type":"text/plain","size":163},{"uid":"9df209142b11a545","name":"HTTP 200 - GET incoming","source":"9df209142b11a545.txt","type":"text/plain","size":137},{"uid":"dce50e05157e43f7","name":"HTTP 200 - GET regression-b4bplc8wuo?include=clusters&include=system_role","source":"dce50e05157e43f7.txt","type":"text/plain","size":388},{"uid":"a3f39e627f065e12","name":"HTTP 200 - GET regression-b4bplc8wuo?include=orgs","source":"a3f39e627f065e12.txt","type":"text/plain","size":360},{"uid":"3fcb910b693fe792","name":"Screenshot: Click Continue button (success)","source":"3fcb910b693fe792.png","type":"image/png","size":159676}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":7,"hasContent":true,"attachmentStep":false},{"name":"Verify that Welcome new user page displayed","time":{"start":1759464037801,"stop":1759464038905,"duration":1104},"status":"passed","steps":[],"attachments":[{"uid":"739ac35b3cda6e1","name":"Page URL","source":"739ac35b3cda6e1.txt","type":"text/plain","size":44},{"uid":"c82ffa861160d22a","name":"Screenshot: Verify that Welcome new user page displayed (success)","source":"c82ffa861160d22a.png","type":"image/png","size":159676}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"2d96220b7bd61808","name":"Page URL","source":"2d96220b7bd61808.txt","type":"text/plain","size":33},{"uid":"c92121ba6c0e33f7","name":"Screenshot: Login via UI (success)","source":"c92121ba6c0e33f7.png","type":"image/png","size":159676}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":5,"attachmentsCount":17,"hasContent":true,"attachmentStep":false},{"name":"Add organization via API and reload page","time":{"start":1759464038989,"stop":1759464059922,"duration":20933},"status":"passed","steps":[{"name":"Reload page","time":{"start":1759464057080,"stop":1759464059839,"duration":2759},"status":"passed","steps":[],"attachments":[{"uid":"c7dd36c029b2f120","name":"Page URL","source":"c7dd36c029b2f120.txt","type":"text/plain","size":44},{"uid":"c864c33916260304","name":"HTTP 200 - GET config","source":"c864c33916260304.txt","type":"text/plain","size":1118},{"uid":"d66202d6dcb53218","name":"HTTP 200 - GET permissions?uri=blob:","source":"d66202d6dcb53218.txt","type":"text/plain","size":236},{"uid":"d8881b96e54bc5c9","name":"HTTP 200 - GET regression-org-zvfdg47j58hl","source":"d8881b96e54bc5c9.txt","type":"text/plain","size":425},{"uid":"374706e9bc83e4e5","name":"HTTP 200 - GET incoming","source":"374706e9bc83e4e5.txt","type":"text/plain","size":137},{"uid":"1f38c808d2229e4","name":"HTTP 200 - GET regression-b4bplc8wuo?include=clusters&include=system_role","source":"1f38c808d2229e4.txt","type":"text/plain","size":510},{"uid":"550e3ff67c1e0047","name":"HTTP 200 - GET regression-b4bplc8wuo?include=orgs","source":"550e3ff67c1e0047.txt","type":"text/plain","size":455},{"uid":"4a2cec9805674fbf","name":"HTTP 200 - GET tags","source":"4a2cec9805674fbf.txt","type":"text/plain","size":848},{"uid":"932b89c48c9e865d","name":"Screenshot: Reload page (success)","source":"932b89c48c9e865d.png","type":"image/png","size":57814}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":9,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"39ffe35c894f85cd","name":"Page URL","source":"39ffe35c894f85cd.txt","type":"text/plain","size":44},{"uid":"cb361a4ffc9c2580","name":"Screenshot: Add organization via API and reload page (success)","source":"cb361a4ffc9c2580.png","type":"image/png","size":57814}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":11,"hasContent":true,"attachmentStep":false},{"name":"Add project via API and reload page","time":{"start":1759464059922,"stop":1759464067162,"duration":7240},"status":"passed","steps":[{"name":"Reload page","time":{"start":1759464064130,"stop":1759464067023,"duration":2893},"status":"passed","steps":[],"attachments":[{"uid":"6746fcbefbe18295","name":"Page URL","source":"6746fcbefbe18295.txt","type":"text/plain","size":81},{"uid":"4b48abc35f5b72de","name":"HTTP 200 - GET config","source":"4b48abc35f5b72de.txt","type":"text/plain","size":1118},{"uid":"380385387d6870da","name":"HTTP 200 - GET regression-b4bplc8wuo?include=clusters&include=system_role","source":"380385387d6870da.txt","type":"text/plain","size":510},{"uid":"91beb1e9d85fb3b0","name":"HTTP 200 - GET permissions?uri=blob:","source":"91beb1e9d85fb3b0.txt","type":"text/plain","size":236},{"uid":"d16260689340a260","name":"HTTP 200 - GET incoming","source":"d16260689340a260.txt","type":"text/plain","size":137},{"uid":"d7965392bff608e4","name":"HTTP 200 - GET regression-b4bplc8wuo?include=orgs","source":"d7965392bff608e4.txt","type":"text/plain","size":455},{"uid":"2b8d2752756081f2","name":"HTTP 200 - GET instances?org=regression-org-zvfdg47j58hl&project=regression-proj-5apsdx6fbe&cluster=default&size=100","source":"2b8d2752756081f2.txt","type":"text/plain","size":271},{"uid":"b49ae670a30f7b3e","name":"HTTP 200 - GET regression-org-zvfdg47j58hl","source":"b49ae670a30f7b3e.txt","type":"text/plain","size":425},{"uid":"e7faf62070e64f68","name":"HTTP 200 - GET tags","source":"e7faf62070e64f68.txt","type":"text/plain","size":848},{"uid":"ef9866a2dc04276a","name":"HTTP 200 - GET templates?page=1&size=50","source":"ef9866a2dc04276a.txt","type":"text/plain","size":1142},{"uid":"d5e9799f8faab6e0","name":"HTTP 200 - GET templates","source":"d5e9799f8faab6e0.txt","type":"text/plain","size":1127},{"uid":"4cb168b018e1d747","name":"Screenshot: Reload page (success)","source":"4cb168b018e1d747.png","type":"image/png","size":156513}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":12,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"908a934b793ad8a7","name":"Page URL","source":"908a934b793ad8a7.txt","type":"text/plain","size":81},{"uid":"dcbad8b78a3a08f9","name":"Screenshot: Add project via API and reload page (success)","source":"dcbad8b78a3a08f9.png","type":"image/png","size":156568}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":14,"hasContent":true,"attachmentStep":false},{"name":"Login to apolo CLI with access token","time":{"start":1759464067162,"stop":1759464067979,"duration":817},"status":"passed","steps":[],"attachments":[{"uid":"48150e66f51f036b","name":"Executed CLI command","source":"48150e66f51f036b.txt","type":"text/plain","size":1114},{"uid":"785574c7b63c8209","name":"Executed CLI command output","source":"785574c7b63c8209.txt","type":"text/plain","size":286}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Verify CLI login output","time":{"start":1759464067979,"stop":1759464067979,"duration":0},"status":"passed","steps":[],"attachments":[{"uid":"c37e5267539f93f","name":"Executed CLI command","source":"c37e5267539f93f.txt","type":"text/plain","size":1114},{"uid":"fe7c3dae4567f4bc","name":"Executed CLI command output","source":"fe7c3dae4567f4bc.txt","type":"text/plain","size":286}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"ccc2fbb068da0088","name":"log","source":"ccc2fbb068da0088.txt","type":"text/plain","size":26808}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":12,"attachmentsCount":47,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"add_page_manager::finalizer","time":{"start":1759464067981,"stop":1759464067981,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_cleanup::finalizer","time":{"start":1759464067982,"stop":1759464067982,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_cleanup::finalizer","time":{"start":1759464067982,"stop":1759464073220,"duration":5238},"status":"passed","steps":[{"name":"Post-test cleanup","time":{"start":1759464067982,"stop":1759464073220,"duration":5238},"status":"passed","steps":[{"name":"Delete organisation: regression-org-zvfdg47j58hl","time":{"start":1759464071890,"stop":1759464073172,"duration":1282},"status":"passed","steps":[{"name":"Delete project: regression-proj-5apsdx6fbe","time":{"start":1759464072075,"stop":1759464072190,"duration":115},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":3,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"api_helper::finalizer","time":{"start":1759464073221,"stop":1759464073221,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_function_scoped_runner::0","time":{"start":1759464073222,"stop":1759464073223,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"parentSuite","value":"CLI Tests"},{"name":"suite","value":"CLI Login"},{"name":"tag","value":"asyncio"},{"name":"subSuite","value":"TestCLILogin"},{"name":"host","value":"runnervm3ublj"},{"name":"thread","value":"3576-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_cases.tests_cli.test_cli_login"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[],"history":{"statistic":{"failed":3,"broken":0,"skipped":0,"passed":56,"unknown":0,"total":59},"items":[{"uid":"9b5b69f369f47825","status":"failed","statusDetails":"AssertionError: [AssertionError] during step: Add project via API and reload page\nMessage: Expected HTTP 201 response but got 504!","time":{"start":1759380702337,"stop":1759380752280,"duration":49943}},{"uid":"fdc1d296527c822","status":"passed","time":{"start":1759288407667,"stop":1759288435732,"duration":28065}},{"uid":"79d5ebbf20fa6127","status":"passed","time":{"start":1759201940337,"stop":1759201990172,"duration":49835}},{"uid":"83d30f8eb1f52354","status":"passed","time":{"start":1759159649212,"stop":1759159689224,"duration":40012}},{"uid":"8a02fd0f18d8ce8d","status":"passed","time":{"start":1759116286108,"stop":1759116323760,"duration":37652}},{"uid":"cfae2b3128a76d6a","status":"passed","time":{"start":1759029934416,"stop":1759029968676,"duration":34260}},{"uid":"fc83d52f91263a6","status":"passed","time":{"start":1758943386553,"stop":1758943433006,"duration":46453}},{"uid":"5d540eac8fb4834f","status":"passed","time":{"start":1758856005160,"stop":1758856039519,"duration":34359}},{"uid":"30cb3883958f57eb","status":"passed","time":{"start":1758769641612,"stop":1758769684813,"duration":43201}},{"uid":"97417029fe3e1f34","status":"passed","time":{"start":1758711621123,"stop":1758711657242,"duration":36119}},{"uid":"828281b581c6c2e","status":"passed","time":{"start":1758696454689,"stop":1758696488012,"duration":33323}},{"uid":"427a71eea111ed74","status":"passed","time":{"start":1758684553510,"stop":1758684591679,"duration":38169}},{"uid":"aac02c15b5789471","status":"passed","time":{"start":1758596852899,"stop":1758596894818,"duration":41919}},{"uid":"a0a22f96d50b6f","status":"passed","time":{"start":1758510350306,"stop":1758510388453,"duration":38147}},{"uid":"a500d2c4da011c19","status":"passed","time":{"start":1758423992482,"stop":1758424022139,"duration":29657}},{"uid":"99fec15b413cb8c0","status":"passed","time":{"start":1758337882290,"stop":1758337930289,"duration":47999}},{"uid":"c777bcd7bddad5e1","status":"passed","time":{"start":1758251123728,"stop":1758251160758,"duration":37030}},{"uid":"fc17587105abd0d4","status":"passed","time":{"start":1758164592481,"stop":1758164632654,"duration":40173}},{"uid":"78e993f7ea339c5a","status":"passed","time":{"start":1758108106922,"stop":1758108144306,"duration":37384}},{"uid":"43dd07462ddeb535","status":"failed","statusDetails":"AssertionError: [ContentTypeError] during step: Add project via API and reload page\nMessage: 504, message='Attempt to decode JSON with unexpected mimetype: text/plain', url='https://api.dev.apolo.us/apis/admin/v1/clusters/default/orgs/regression-org-jk0201sylkxb/projects'","time":{"start":1758089539009,"stop":1758089589711,"duration":50702}}]},"tags":["asyncio"]},"source":"60d8eec33ce542da.json","parameterValues":[]}