{"uid":"861a1b7f0693b2d4","name":"User creates a second organization via CLI","fullName":"tests.test_cases.tests_cli.test_organization_structure_setup.TestCLIOrganizationStructureSetup#test_create_second_organization_cli","historyId":"3f04693ad6d2c8e029fc8b5235603349","time":{"start":1758248990382,"stop":1758249046490,"duration":56108},"description":"\n- Login with valid credentials via **UI**.\n- Get Bearer auth token from Playwright local storage.\n- Login with Bearer auth token via **CLI**.\n- Create first organization via **CLI**.\n\n### Verify that:\n\n- User can create second organization via **CLI**.\n","descriptionHtml":"<div style='line-height:1.6;'><ul>\n<li>Login with valid credentials via <strong>UI</strong>.</li>\n<li>Get Bearer auth token from Playwright local storage.</li>\n<li>Login with Bearer auth token via <strong>CLI</strong>.</li>\n<li>Create first organization via <strong>CLI</strong>.</li>\n</ul>\n<h3>Verify that:</h3>\n<ul>\n<li>User can create second organization via <strong>CLI</strong>.</li>\n</ul></div>","status":"failed","statusMessage":"AssertionError: [AssertionError] during step: Verify organization_count\nMessage: Expected 2 organizations, got 1","statusTrace":"tests/reporting_hooks/reporting.py:49: in wrapper\n    result = await func(*args, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^\ntests/test_cases/steps/cli_steps/comonent_steps_impl/admin_steps.py:22: in verify_cli_organization_count\n    assert len(organizations) == count, (\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^\nE   AssertionError: Expected 2 organizations, got 1\n\nThe above exception was the direct cause of the following exception:\ntests/test_cases/tests_cli/test_organization_structure_setup.py:67: in test_create_second_organization_cli\n    await self._cli_steps.admin.verify_cli_organization_count(2)\ntests/reporting_hooks/reporting.py:58: in wrapper\n    raise AssertionError(formatted_msg) from e\nE   AssertionError: [AssertionError] during step: Verify organization_count\nE   Message: Expected 2 organizations, got 1","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"pytestconfig","time":{"start":1758245545044,"stop":1758245545044,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"base_url","time":{"start":1758245545044,"stop":1758245545045,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_output_dir","time":{"start":1758245545044,"stop":1758245545044,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delay_worker_start","time":{"start":1758245545045,"stop":1758245560045,"duration":15000},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop_policy","time":{"start":1758245545045,"stop":1758245545045,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_verify_url","time":{"start":1758245545045,"stop":1758245545045,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ensure_storage_directories","time":{"start":1758245560046,"stop":1758245560046,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_config","time":{"start":1758248987768,"stop":1758248987771,"duration":3},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_function_scoped_runner","time":{"start":1758248987771,"stop":1758248987771,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"page_manager","time":{"start":1758248987771,"stop":1758248989831,"duration":2060},"status":"passed","steps":[],"attachments":[{"uid":"1f106d884eaa5583","name":"HTTP 200 - GET config","source":"1f106d884eaa5583.txt","type":"text/plain","size":654}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},{"name":"data_manager","time":{"start":1758248989831,"stop":1758248989831,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"api_helper","time":{"start":1758248989831,"stop":1758248989832,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"users_manager","time":{"start":1758248989831,"stop":1758248989831,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"apolo_cli","time":{"start":1758248989832,"stop":1758248989832,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_cleanup","time":{"start":1758248989832,"stop":1758248989833,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup","time":{"start":1758248989833,"stop":1758248990381,"duration":548},"status":"passed","steps":[{"name":"Verify Apolo CLI client is installed","time":{"start":1758248989834,"stop":1758248990381,"duration":547},"status":"passed","steps":[],"attachments":[{"uid":"a5d3c96d700fa5ac","name":"Executed CLI command","source":"a5d3c96d700fa5ac.txt","type":"text/plain","size":15},{"uid":"ef1ec75f21cd0244","name":"Executed CLI command output","source":"ef1ec75f21cd0244.txt","type":"text/plain","size":28}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"add_page_manager","time":{"start":1758248989833,"stop":1758248989833,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_inject_fixtures","time":{"start":1758248989833,"stop":1758248989833,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"\n- Login with valid credentials via **UI**.\n- Get Bearer auth token from Playwright local storage.\n- Login with Bearer auth token via **CLI**.\n- Create first organization via **CLI**.\n\n### Verify that:\n\n- User can create second organization via **CLI**.\n","descriptionHtml":"<div style='line-height:1.6;'><ul>\n<li>Login with valid credentials via <strong>UI</strong>.</li>\n<li>Get Bearer auth token from Playwright local storage.</li>\n<li>Login with Bearer auth token via <strong>CLI</strong>.</li>\n<li>Create first organization via <strong>CLI</strong>.</li>\n</ul>\n<h3>Verify that:</h3>\n<ul>\n<li>User can create second organization via <strong>CLI</strong>.</li>\n</ul></div>","status":"failed","statusMessage":"AssertionError: [AssertionError] during step: Verify organization_count\nMessage: Expected 2 organizations, got 1","statusTrace":"tests/reporting_hooks/reporting.py:49: in wrapper\n    result = await func(*args, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^\ntests/test_cases/steps/cli_steps/comonent_steps_impl/admin_steps.py:22: in verify_cli_organization_count\n    assert len(organizations) == count, (\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^\nE   AssertionError: Expected 2 organizations, got 1\n\nThe above exception was the direct cause of the following exception:\ntests/test_cases/tests_cli/test_organization_structure_setup.py:67: in test_create_second_organization_cli\n    await self._cli_steps.admin.verify_cli_organization_count(2)\ntests/reporting_hooks/reporting.py:58: in wrapper\n    raise AssertionError(formatted_msg) from e\nE   AssertionError: [AssertionError] during step: Verify organization_count\nE   Message: Expected 2 organizations, got 1","steps":[{"name":"Login via UI","time":{"start":1758248990383,"stop":1758248995254,"duration":4871},"status":"passed","steps":[{"name":"Click login button","time":{"start":1758248990383,"stop":1758248991458,"duration":1075},"status":"passed","steps":[],"attachments":[{"uid":"50daaa94bc5842de","name":"Page URL","source":"50daaa94bc5842de.txt","type":"text/plain","size":33},{"uid":"cc23caed9bd20e28","name":"Screenshot: Click login button (success)","source":"cc23caed9bd20e28.png","type":"image/png","size":41538}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Enter email","time":{"start":1758248991458,"stop":1758248991591,"duration":133},"status":"passed","steps":[],"attachments":[{"uid":"b49a075c00260a33","name":"Page URL","source":"b49a075c00260a33.txt","type":"text/plain","size":215},{"uid":"49b508bd8fe4d310","name":"Screenshot: Enter email (success)","source":"49b508bd8fe4d310.png","type":"image/png","size":45748}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Enter password","time":{"start":1758248991591,"stop":1758248991742,"duration":151},"status":"passed","steps":[],"attachments":[{"uid":"3a246638d53c34a5","name":"Page URL","source":"3a246638d53c34a5.txt","type":"text/plain","size":215},{"uid":"dc810f1d7fc31a5b","name":"Screenshot: Enter password (success)","source":"dc810f1d7fc31a5b.png","type":"image/png","size":46265}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Click Continue button","time":{"start":1758248991742,"stop":1758248993945,"duration":2203},"status":"passed","steps":[],"attachments":[{"uid":"820505c1ad5c0ba9","name":"Page URL","source":"820505c1ad5c0ba9.txt","type":"text/plain","size":215},{"uid":"fba14c6f3a03c99b","name":"HTTP 200 - GET config","source":"fba14c6f3a03c99b.txt","type":"text/plain","size":752},{"uid":"359c5de9ce80ac6c","name":"HTTP 200 - GET permissions?uri=blob:","source":"359c5de9ce80ac6c.txt","type":"text/plain","size":163},{"uid":"5d283f4bf21167b8","name":"HTTP 200 - GET incoming","source":"5d283f4bf21167b8.txt","type":"text/plain","size":137},{"uid":"d7b8e5b528b2c951","name":"HTTP 200 - GET regression-a5dhoxuf8h?include=orgs","source":"d7b8e5b528b2c951.txt","type":"text/plain","size":360},{"uid":"9c858c51c5cf7b44","name":"HTTP 200 - GET regression-a5dhoxuf8h?include=clusters&include=system_role","source":"9c858c51c5cf7b44.txt","type":"text/plain","size":388},{"uid":"961d4938695fd5c7","name":"Screenshot: Click Continue button (success)","source":"961d4938695fd5c7.png","type":"image/png","size":160076}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":7,"hasContent":true,"attachmentStep":false},{"name":"Verify that Welcome new user page displayed","time":{"start":1758248993965,"stop":1758248995136,"duration":1171},"status":"passed","steps":[],"attachments":[{"uid":"ea317961e7bb20d3","name":"Page URL","source":"ea317961e7bb20d3.txt","type":"text/plain","size":44},{"uid":"9fc7a25358ccc3e6","name":"Screenshot: Verify that Welcome new user page displayed (success)","source":"9fc7a25358ccc3e6.png","type":"image/png","size":160076}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"10f7afe405b696a","name":"Page URL","source":"10f7afe405b696a.txt","type":"text/plain","size":33},{"uid":"a64e8b4c68d6bb20","name":"Screenshot: Login via UI (success)","source":"a64e8b4c68d6bb20.png","type":"image/png","size":160076}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":5,"attachmentsCount":17,"hasContent":true,"attachmentStep":false},{"name":"Login to apolo CLI with access token","time":{"start":1758248995254,"stop":1758248996096,"duration":842},"status":"passed","steps":[],"attachments":[{"uid":"a6ddbf1f87fa1c2d","name":"Executed CLI command","source":"a6ddbf1f87fa1c2d.txt","type":"text/plain","size":1114},{"uid":"2e4070dbc58453fb","name":"Executed CLI command output","source":"2e4070dbc58453fb.txt","type":"text/plain","size":184}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Verify organization_count","time":{"start":1758248996096,"stop":1758249000979,"duration":4883},"status":"passed","steps":[],"attachments":[{"uid":"f6ebb1babe47e635","name":"Executed CLI command","source":"f6ebb1babe47e635.txt","type":"text/plain","size":20},{"uid":"744d16754a25a2f0","name":"Executed CLI command output","source":"744d16754a25a2f0.txt","type":"text/plain","size":26}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Add new organization via apolo CLI","time":{"start":1758249000979,"stop":1758249013036,"duration":12057},"status":"passed","steps":[],"attachments":[{"uid":"7a17ab732508942b","name":"Executed CLI command","source":"7a17ab732508942b.txt","type":"text/plain","size":1114},{"uid":"2cbacdddbe78bacf","name":"Executed CLI command output","source":"2cbacdddbe78bacf.txt","type":"text/plain","size":264}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Verify organization_count","time":{"start":1758249013036,"stop":1758249017117,"duration":4081},"status":"passed","steps":[],"attachments":[{"uid":"7900505e5390efd3","name":"Executed CLI command","source":"7900505e5390efd3.txt","type":"text/plain","size":20},{"uid":"7052ebf41d16c1fe","name":"Executed CLI command output","source":"7052ebf41d16c1fe.txt","type":"text/plain","size":149}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Verify organization is listed in the CLI output","time":{"start":1758249017117,"stop":1758249017118,"duration":1},"status":"passed","steps":[],"attachments":[{"uid":"f70d78e95f165caf","name":"Executed CLI command","source":"f70d78e95f165caf.txt","type":"text/plain","size":20},{"uid":"a4a3215530f93756","name":"Executed CLI command output","source":"a4a3215530f93756.txt","type":"text/plain","size":149}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Add new organization via apolo CLI","time":{"start":1758249017118,"stop":1758249042134,"duration":25016},"status":"passed","steps":[],"attachments":[{"uid":"f52b7e8c446804b7","name":"Executed CLI command","source":"f52b7e8c446804b7.txt","type":"text/plain","size":47},{"uid":"b9c4835ee03d8959","name":"Executed CLI command output","source":"b9c4835ee03d8959.txt","type":"text/plain","size":0}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Verify organization_count","time":{"start":1758249042134,"stop":1758249046489,"duration":4355},"status":"failed","statusMessage":"AssertionError: [AssertionError] during step: Verify organization_count\nMessage: Expected 2 organizations, got 1\n","statusTrace":"  File \"/home/runner/work/apolo-test-automation/apolo-test-automation/tests/reporting_hooks/reporting.py\", line 58, in wrapper\n    raise AssertionError(formatted_msg) from e\n","steps":[],"attachments":[{"uid":"277c95e216e16a87","name":"Executed CLI command","source":"277c95e216e16a87.txt","type":"text/plain","size":20},{"uid":"93da36c99168258f","name":"Executed CLI command output","source":"93da36c99168258f.txt","type":"text/plain","size":149}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"b452428661d22fe4","name":"log","source":"b452428661d22fe4.txt","type":"text/plain","size":17075}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":13,"attachmentsCount":32,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"add_page_manager::finalizer","time":{"start":1758249046506,"stop":1758249046506,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_cleanup::finalizer","time":{"start":1758249046507,"stop":1758249046507,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_cleanup::finalizer","time":{"start":1758249046507,"stop":1758249052431,"duration":5924},"status":"passed","steps":[{"name":"Post-test cleanup","time":{"start":1758249046507,"stop":1758249052430,"duration":5923},"status":"passed","steps":[{"name":"Delete organisation: regression-org-pxixvqz6452m","time":{"start":1758249050096,"stop":1758249051816,"duration":1720},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Delete organisation: regression-org-sq0pcp7dzblo","time":{"start":1758249051816,"stop":1758249052381,"duration":565},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":3,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"api_helper::finalizer","time":{"start":1758249052431,"stop":1758249052432,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_function_scoped_runner::0","time":{"start":1758249052433,"stop":1758249052434,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"parentSuite","value":"CLI Tests"},{"name":"suite","value":"CLI Organization Structure Setup"},{"name":"tag","value":"asyncio"},{"name":"subSuite","value":"TestCLIOrganizationStructureSetup"},{"name":"host","value":"runnervmf4ws1"},{"name":"thread","value":"3633-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_cases.tests_cli.test_organization_structure_setup"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":true,"retry":true,"extra":{"categories":[],"tags":["asyncio"]},"source":"861a1b7f0693b2d4.json","parameterValues":[]}