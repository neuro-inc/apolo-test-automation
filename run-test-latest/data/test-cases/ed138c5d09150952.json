{"uid":"ed138c5d09150952","name":"Install Shell app via UI","fullName":"tests.test_cases.tests_e2e.test_shell_app.TestE2EShellApp#test_install_shell_app_via_ui","historyId":"a83655ee5dd746f446e227a898020ce1","time":{"start":1758084372113,"stop":1758084434066,"duration":61953},"description":"\n- Login with valid credentials.\n- Create new organization via **API**.\n- Create new project via **API**.\n\n### Verify that:\n\n- User can install `Shell` app via **UI**.\n","descriptionHtml":"<div style='line-height:1.6;'><ul>\n<li>Login with valid credentials.</li>\n<li>Create new organization via <strong>API</strong>.</li>\n<li>Create new project via <strong>API</strong>.</li>\n</ul>\n<h3>Verify that:</h3>\n<ul>\n<li>User can install <span style='background-color:#D3D3D3; padding:2px 4px; border-radius:3px; font-family:monospace;'>Shell</span> app via <strong>UI</strong>.</li>\n</ul></div>","status":"failed","statusMessage":"AssertionError: [ContentTypeError] during step: Add project via API and reload page\nMessage: 504, message='Attempt to decode JSON with unexpected mimetype: text/plain', url='https://api.dev.apolo.us/apis/admin/v1/clusters/default/orgs/regression-org-56wuxwxdsjgi/projects'","statusTrace":"tests/reporting_hooks/reporting.py:49: in wrapper\n    result = await func(*args, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^\ntests/test_cases/steps/ui_steps/ui_steps.py:379: in ui_add_proj_api\n    status, response = await self._api_helper.add_proj(\ntests/utils/api_helper.py:208: in add_proj\n    status, response = await self._post(url, token=token, data=data)\n                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\ntests/utils/api_helper.py:91: in _post\n    json_data = await response.json()\n                ^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/aiohttp/client_reqrep.py:749: in json\n    raise ContentTypeError(\nE   aiohttp.client_exceptions.ContentTypeError: 504, message='Attempt to decode JSON with unexpected mimetype: text/plain', url='https://api.dev.apolo.us/apis/admin/v1/clusters/default/orgs/regression-org-56wuxwxdsjgi/projects'\n\nThe above exception was the direct cause of the following exception:\ntests/test_cases/tests_e2e/test_shell_app.py:61: in test_install_shell_app_via_ui\n    await ui_steps.ui_add_proj_api(\ntests/reporting_hooks/reporting.py:58: in wrapper\n    raise AssertionError(formatted_msg) from e\nE   AssertionError: [ContentTypeError] during step: Add project via API and reload page\nE   Message: 504, message='Attempt to decode JSON with unexpected mimetype: text/plain', url='https://api.dev.apolo.us/apis/admin/v1/clusters/default/orgs/regression-org-56wuxwxdsjgi/projects'","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"pytestconfig","time":{"start":1758072703608,"stop":1758072703609,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delay_worker_start","time":{"start":1758072703609,"stop":1758072703610,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_output_dir","time":{"start":1758072703609,"stop":1758072703609,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop_policy","time":{"start":1758072703609,"stop":1758072703609,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_verify_url","time":{"start":1758072703609,"stop":1758072703609,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"base_url","time":{"start":1758072703609,"stop":1758072703609,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ensure_storage_directories","time":{"start":1758072703610,"stop":1758072703610,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_config","time":{"start":1758084369911,"stop":1758084369914,"duration":3},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_function_scoped_runner","time":{"start":1758084369914,"stop":1758084369914,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"page_manager","time":{"start":1758084369914,"stop":1758084372110,"duration":2196},"status":"passed","steps":[],"attachments":[{"uid":"dd85cba4028c3a2d","name":"HTTP 200 - GET config","source":"dd85cba4028c3a2d.txt","type":"text/plain","size":654}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},{"name":"users_manager","time":{"start":1758084372110,"stop":1758084372110,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"data_manager","time":{"start":1758084372110,"stop":1758084372110,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"api_helper","time":{"start":1758084372110,"stop":1758084372111,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_cleanup","time":{"start":1758084372111,"stop":1758084372112,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"apolo_cli","time":{"start":1758084372111,"stop":1758084372111,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_inject_fixtures","time":{"start":1758084372112,"stop":1758084372112,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup","time":{"start":1758084372112,"stop":1758084372112,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"add_page_manager","time":{"start":1758084372112,"stop":1758084372112,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"\n- Login with valid credentials.\n- Create new organization via **API**.\n- Create new project via **API**.\n\n### Verify that:\n\n- User can install `Shell` app via **UI**.\n","descriptionHtml":"<div style='line-height:1.6;'><ul>\n<li>Login with valid credentials.</li>\n<li>Create new organization via <strong>API</strong>.</li>\n<li>Create new project via <strong>API</strong>.</li>\n</ul>\n<h3>Verify that:</h3>\n<ul>\n<li>User can install <span style='background-color:#D3D3D3; padding:2px 4px; border-radius:3px; font-family:monospace;'>Shell</span> app via <strong>UI</strong>.</li>\n</ul></div>","status":"failed","statusMessage":"AssertionError: [ContentTypeError] during step: Add project via API and reload page\nMessage: 504, message='Attempt to decode JSON with unexpected mimetype: text/plain', url='https://api.dev.apolo.us/apis/admin/v1/clusters/default/orgs/regression-org-56wuxwxdsjgi/projects'","statusTrace":"tests/reporting_hooks/reporting.py:49: in wrapper\n    result = await func(*args, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^\ntests/test_cases/steps/ui_steps/ui_steps.py:379: in ui_add_proj_api\n    status, response = await self._api_helper.add_proj(\ntests/utils/api_helper.py:208: in add_proj\n    status, response = await self._post(url, token=token, data=data)\n                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\ntests/utils/api_helper.py:91: in _post\n    json_data = await response.json()\n                ^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/aiohttp/client_reqrep.py:749: in json\n    raise ContentTypeError(\nE   aiohttp.client_exceptions.ContentTypeError: 504, message='Attempt to decode JSON with unexpected mimetype: text/plain', url='https://api.dev.apolo.us/apis/admin/v1/clusters/default/orgs/regression-org-56wuxwxdsjgi/projects'\n\nThe above exception was the direct cause of the following exception:\ntests/test_cases/tests_e2e/test_shell_app.py:61: in test_install_shell_app_via_ui\n    await ui_steps.ui_add_proj_api(\ntests/reporting_hooks/reporting.py:58: in wrapper\n    raise AssertionError(formatted_msg) from e\nE   AssertionError: [ContentTypeError] during step: Add project via API and reload page\nE   Message: 504, message='Attempt to decode JSON with unexpected mimetype: text/plain', url='https://api.dev.apolo.us/apis/admin/v1/clusters/default/orgs/regression-org-56wuxwxdsjgi/projects'","steps":[{"name":"Login via UI","time":{"start":1758084372114,"stop":1758084378882,"duration":6768},"status":"passed","steps":[{"name":"Click login button","time":{"start":1758084372114,"stop":1758084373250,"duration":1136},"status":"passed","steps":[],"attachments":[{"uid":"ca5ea9e02de44b50","name":"Page URL","source":"ca5ea9e02de44b50.txt","type":"text/plain","size":33},{"uid":"554dd4c47b236298","name":"Screenshot: Click login button (success)","source":"554dd4c47b236298.png","type":"image/png","size":41538}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Enter email","time":{"start":1758084373250,"stop":1758084373391,"duration":141},"status":"passed","steps":[],"attachments":[{"uid":"cfcf4588563c775","name":"Page URL","source":"cfcf4588563c775.txt","type":"text/plain","size":215},{"uid":"5d866acbbac052a1","name":"Screenshot: Enter email (success)","source":"5d866acbbac052a1.png","type":"image/png","size":45829}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Enter password","time":{"start":1758084373391,"stop":1758084373552,"duration":161},"status":"passed","steps":[],"attachments":[{"uid":"c7a17b36c3002ea7","name":"Page URL","source":"c7a17b36c3002ea7.txt","type":"text/plain","size":215},{"uid":"9d09e2720787263","name":"Screenshot: Enter password (success)","source":"9d09e2720787263.png","type":"image/png","size":46330}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Click Continue button","time":{"start":1758084373552,"stop":1758084377682,"duration":4130},"status":"passed","steps":[],"attachments":[{"uid":"d831f3126f288f28","name":"Page URL","source":"d831f3126f288f28.txt","type":"text/plain","size":215},{"uid":"473f25949257a0d5","name":"HTTP 200 - GET config","source":"473f25949257a0d5.txt","type":"text/plain","size":752},{"uid":"b93bbdfcd8671147","name":"HTTP 200 - GET regression-jnu9uhyong?include=orgs","source":"b93bbdfcd8671147.txt","type":"text/plain","size":360},{"uid":"1d9fa22e7495caaa","name":"HTTP 200 - GET permissions?uri=blob:","source":"1d9fa22e7495caaa.txt","type":"text/plain","size":163},{"uid":"7f2612d6665484c1","name":"HTTP 200 - GET incoming","source":"7f2612d6665484c1.txt","type":"text/plain","size":137},{"uid":"1aa7764ef0f1fbb8","name":"HTTP 200 - GET regression-jnu9uhyong?include=clusters&include=system_role","source":"1aa7764ef0f1fbb8.txt","type":"text/plain","size":388},{"uid":"eefad0105e9bd7ed","name":"Screenshot: Click Continue button (success)","source":"eefad0105e9bd7ed.png","type":"image/png","size":159386}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":7,"hasContent":true,"attachmentStep":false},{"name":"Verify that Welcome new user page displayed","time":{"start":1758084377693,"stop":1758084378798,"duration":1105},"status":"passed","steps":[],"attachments":[{"uid":"bcc4e52b19253a0b","name":"Page URL","source":"bcc4e52b19253a0b.txt","type":"text/plain","size":44},{"uid":"cc267edf4162cec0","name":"Screenshot: Verify that Welcome new user page displayed (success)","source":"cc267edf4162cec0.png","type":"image/png","size":159386}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"601615e31317adb4","name":"Page URL","source":"601615e31317adb4.txt","type":"text/plain","size":33},{"uid":"f7469b2d9107606f","name":"Screenshot: Login via UI (success)","source":"f7469b2d9107606f.png","type":"image/png","size":159386}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":5,"attachmentsCount":17,"hasContent":true,"attachmentStep":false},{"name":"Add organization via API and reload page","time":{"start":1758084378882,"stop":1758084403951,"duration":25069},"status":"passed","steps":[{"name":"Reload page","time":{"start":1758084400753,"stop":1758084403868,"duration":3115},"status":"passed","steps":[],"attachments":[{"uid":"5ce9ad410327b25e","name":"Page URL","source":"5ce9ad410327b25e.txt","type":"text/plain","size":44},{"uid":"1f4870a74bdbf97c","name":"HTTP 200 - GET config","source":"1f4870a74bdbf97c.txt","type":"text/plain","size":1118},{"uid":"f1b695ffeec81f88","name":"HTTP 200 - GET permissions?uri=blob:","source":"f1b695ffeec81f88.txt","type":"text/plain","size":236},{"uid":"11bc35fa225d2c0f","name":"HTTP 200 - GET regression-jnu9uhyong?include=clusters&include=system_role","source":"11bc35fa225d2c0f.txt","type":"text/plain","size":510},{"uid":"f3673bdc2db18a66","name":"HTTP 200 - GET regression-org-56wuxwxdsjgi","source":"f3673bdc2db18a66.txt","type":"text/plain","size":425},{"uid":"cf8f7e41af96b77f","name":"HTTP 200 - GET regression-jnu9uhyong?include=orgs","source":"cf8f7e41af96b77f.txt","type":"text/plain","size":455},{"uid":"cb4ef9aa4e4f9b5c","name":"HTTP 200 - GET incoming","source":"cb4ef9aa4e4f9b5c.txt","type":"text/plain","size":137},{"uid":"8951bb5740d364c3","name":"Screenshot: Reload page (success)","source":"8951bb5740d364c3.png","type":"image/png","size":55543}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":8,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"3564a950fc6ed417","name":"Page URL","source":"3564a950fc6ed417.txt","type":"text/plain","size":44},{"uid":"9dc6882b567f5f2","name":"Screenshot: Add organization via API and reload page (success)","source":"9dc6882b567f5f2.png","type":"image/png","size":55543}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":10,"hasContent":true,"attachmentStep":false},{"name":"Add project via API and reload page","time":{"start":1758084403951,"stop":1758084434065,"duration":30114},"status":"failed","statusMessage":"AssertionError: [ContentTypeError] during step: Add project via API and reload page\nMessage: 504, message='Attempt to decode JSON with unexpected mimetype: text/plain', url='https://api.dev.apolo.us/apis/admin/v1/clusters/default/orgs/regression-org-56wuxwxdsjgi/projects'\n","statusTrace":"  File \"/home/runner/work/apolo-test-automation/apolo-test-automation/tests/reporting_hooks/reporting.py\", line 58, in wrapper\n    raise AssertionError(formatted_msg) from e\n","steps":[],"attachments":[{"uid":"760bedf59dfec7e9","name":"Page URL","source":"760bedf59dfec7e9.txt","type":"text/plain","size":81},{"uid":"285646b8ad95e809","name":"Screenshot: Add project via API and reload page (fail)","source":"285646b8ad95e809.png","type":"image/png","size":55543}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"a6d35216937b56bc","name":"log","source":"a6d35216937b56bc.txt","type":"text/plain","size":13481}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":9,"attachmentsCount":30,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"setup_cleanup::finalizer","time":{"start":1758084434113,"stop":1758084434114,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"add_page_manager::finalizer","time":{"start":1758084434113,"stop":1758084434113,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_cleanup::finalizer","time":{"start":1758084434114,"stop":1758084434114,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"api_helper::finalizer","time":{"start":1758084434114,"stop":1758084434114,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_function_scoped_runner::0","time":{"start":1758084434115,"stop":1758084434116,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"parentSuite","value":"E2E Tests"},{"name":"suite","value":"Shell App"},{"name":"tag","value":"asyncio"},{"name":"tag","value":"class_setup"},{"name":"subSuite","value":"TestE2EShellApp"},{"name":"host","value":"runnervmmq7i7"},{"name":"thread","value":"3576-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_cases.tests_e2e.test_shell_app"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":2,"broken":0,"skipped":0,"passed":12,"unknown":0,"total":14},"items":[{"uid":"cf03304fe8bd774c","status":"failed","statusDetails":"AssertionError: [ContentTypeError] during step: Add organization via API and reload page\nMessage: 504, message='Attempt to decode JSON with unexpected mimetype: text/plain', url='https://api.dev.apolo.us/apis/admin/v1/orgs?skip_auto_add_to_clusters=false'","time":{"start":1757990555730,"stop":1757990592776,"duration":37046}},{"uid":"29c0d9d4d9020ac2","status":"passed","time":{"start":1757905142262,"stop":1757905399747,"duration":257485}},{"uid":"32c6d3d7f8c02e3f","status":"passed","time":{"start":1757817422932,"stop":1757817552853,"duration":129921}},{"uid":"6f5f8530b81ab6ab","status":"passed","time":{"start":1757731012569,"stop":1757731155027,"duration":142458}},{"uid":"57fcbee16c2b7a89","status":"passed","time":{"start":1757644162696,"stop":1757644287229,"duration":124533}},{"uid":"ef5c2bdc9e22035a","status":"passed","time":{"start":1757557901675,"stop":1757558137069,"duration":235394}},{"uid":"10d82f4256542de2","status":"passed","time":{"start":1757472084374,"stop":1757472222141,"duration":137767}},{"uid":"aef58f04b9544416","status":"passed","time":{"start":1757419744673,"stop":1757419862182,"duration":117509}},{"uid":"f7bf6fa4b1d4ffe9","status":"passed","time":{"start":1757385331109,"stop":1757385446713,"duration":115604}},{"uid":"3106942315d1f463","status":"passed","time":{"start":1757298805747,"stop":1757298934127,"duration":128380}},{"uid":"bcb3706f64d4af6e","status":"passed","time":{"start":1757212767752,"stop":1757212897234,"duration":129482}},{"uid":"31a76a466b418f98","status":"passed","time":{"start":1757141963677,"stop":1757142097935,"duration":134258}},{"uid":"fb97fa435efde69d","status":"passed","time":{"start":1757125963985,"stop":1757126085521,"duration":121536}}]},"tags":["asyncio","class_setup"]},"source":"ed138c5d09150952.json","parameterValues":[]}