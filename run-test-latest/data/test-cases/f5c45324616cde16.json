{"uid":"f5c45324616cde16","name":"Admin removes himself from project via CLI","fullName":"tests.test_cases.tests_cli.test_project_remove_members.TestCLIProjectStructureSetup#test_admin_remove_himself_from_proj_cli","historyId":"b1bebe671c380049e3a7c59719859792","time":{"start":1757037889216,"stop":1757037925773,"duration":36557},"description":"\n- Login with valid credentials via **UI**.\n- Get Bearer auth token from Playwright local storage.\n- Create new organization via **API**.\n- Login with Bearer auth token via **CLI**.\n- Create new project via **CLI**.\n\n### Verify that:\n\n- `Admin` **cannot** remove himself from project via **CLI**.\n","descriptionHtml":"<div style='line-height:1.6;'><ul>\n<li>Login with valid credentials via <strong>UI</strong>.</li>\n<li>Get Bearer auth token from Playwright local storage.</li>\n<li>Create new organization via <strong>API</strong>.</li>\n<li>Login with Bearer auth token via <strong>CLI</strong>.</li>\n<li>Create new project via <strong>CLI</strong>.</li>\n</ul>\n<h3>Verify that:</h3>\n<ul>\n<li><span style='background-color:#D3D3D3; padding:2px 4px; border-radius:3px; font-family:monospace;'>Admin</span> <strong>cannot</strong> remove himself from project via <strong>CLI</strong>.</li>\n</ul></div>","status":"failed","statusMessage":"AssertionError: [AssertionError] during step: Remove user from project via CLI\nMessage:  Expected: ERROR: Illegal argument(s) (Last project admin cannot be removed), got: You are using apolo-extras tool 24.10.0, however 25.8.0 is available.\nERROR: Illegal argument(s) (Last project admin cannot be removed)","statusTrace":"tests/reporting_hooks/reporting.py:49: in wrapper\n    result = await func(*args, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^\ntests/test_cases/steps/cli_steps/comonent_steps_impl/admin_steps.py:151: in cli_remove_user_from_proj\n    assert error_message == expected_error, (\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nE   AssertionError:  Expected: ERROR: Illegal argument(s) (Last project admin cannot be removed), got: You are using apolo-extras tool 24.10.0, however 25.8.0 is available.\nE   ERROR: Illegal argument(s) (Last project admin cannot be removed)\n\nThe above exception was the direct cause of the following exception:\ntests/test_cases/tests_cli/test_project_remove_members.py:306: in test_admin_remove_himself_from_proj_cli\n    await self._cli_steps.admin.cli_remove_user_from_proj(\ntests/reporting_hooks/reporting.py:58: in wrapper\n    raise AssertionError(formatted_msg) from e\nE   AssertionError: [AssertionError] during step: Remove user from project via CLI\nE   Message:  Expected: ERROR: Illegal argument(s) (Last project admin cannot be removed), got: You are using apolo-extras tool 24.10.0, however 25.8.0 is available.\nE   ERROR: Illegal argument(s) (Last project admin cannot be removed)","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"base_url","time":{"start":1757035899253,"stop":1757035899254,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop_policy","time":{"start":1757035899253,"stop":1757035899253,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"pytestconfig","time":{"start":1757035899253,"stop":1757035899253,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_output_dir","time":{"start":1757035899253,"stop":1757035899253,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_verify_url","time":{"start":1757035899254,"stop":1757035899254,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delay_worker_start","time":{"start":1757035899254,"stop":1757035929254,"duration":30000},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ensure_storage_directories","time":{"start":1757035929255,"stop":1757035929255,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_config","time":{"start":1757037886152,"stop":1757037886155,"duration":3},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"page_manager","time":{"start":1757037886155,"stop":1757037888518,"duration":2363},"status":"passed","steps":[],"attachments":[{"uid":"9ba9a1437544f04e","name":"HTTP 200 - GET config","source":"9ba9a1437544f04e.txt","type":"text/plain","size":654}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},{"name":"_function_scoped_runner","time":{"start":1757037886155,"stop":1757037886156,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"users_manager","time":{"start":1757037888519,"stop":1757037888519,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"data_manager","time":{"start":1757037888519,"stop":1757037888519,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"api_helper","time":{"start":1757037888519,"stop":1757037888520,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_cleanup","time":{"start":1757037888520,"stop":1757037888521,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"apolo_cli","time":{"start":1757037888520,"stop":1757037888520,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_inject_fixtures","time":{"start":1757037888521,"stop":1757037888521,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"add_page_manager","time":{"start":1757037888521,"stop":1757037888521,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup","time":{"start":1757037888521,"stop":1757037889215,"duration":694},"status":"passed","steps":[{"name":"Verify Apolo CLI client is installed","time":{"start":1757037888522,"stop":1757037889215,"duration":693},"status":"passed","steps":[],"attachments":[{"uid":"6dd8b1797257fd66","name":"Executed CLI command","source":"6dd8b1797257fd66.txt","type":"text/plain","size":15},{"uid":"8f7629eebea44f3","name":"Executed CLI command output","source":"8f7629eebea44f3.txt","type":"text/plain","size":28}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":2,"hasContent":true,"attachmentStep":false}],"testStage":{"description":"\n- Login with valid credentials via **UI**.\n- Get Bearer auth token from Playwright local storage.\n- Create new organization via **API**.\n- Login with Bearer auth token via **CLI**.\n- Create new project via **CLI**.\n\n### Verify that:\n\n- `Admin` **cannot** remove himself from project via **CLI**.\n","descriptionHtml":"<div style='line-height:1.6;'><ul>\n<li>Login with valid credentials via <strong>UI</strong>.</li>\n<li>Get Bearer auth token from Playwright local storage.</li>\n<li>Create new organization via <strong>API</strong>.</li>\n<li>Login with Bearer auth token via <strong>CLI</strong>.</li>\n<li>Create new project via <strong>CLI</strong>.</li>\n</ul>\n<h3>Verify that:</h3>\n<ul>\n<li><span style='background-color:#D3D3D3; padding:2px 4px; border-radius:3px; font-family:monospace;'>Admin</span> <strong>cannot</strong> remove himself from project via <strong>CLI</strong>.</li>\n</ul></div>","status":"failed","statusMessage":"AssertionError: [AssertionError] during step: Remove user from project via CLI\nMessage:  Expected: ERROR: Illegal argument(s) (Last project admin cannot be removed), got: You are using apolo-extras tool 24.10.0, however 25.8.0 is available.\nERROR: Illegal argument(s) (Last project admin cannot be removed)","statusTrace":"tests/reporting_hooks/reporting.py:49: in wrapper\n    result = await func(*args, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^\ntests/test_cases/steps/cli_steps/comonent_steps_impl/admin_steps.py:151: in cli_remove_user_from_proj\n    assert error_message == expected_error, (\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nE   AssertionError:  Expected: ERROR: Illegal argument(s) (Last project admin cannot be removed), got: You are using apolo-extras tool 24.10.0, however 25.8.0 is available.\nE   ERROR: Illegal argument(s) (Last project admin cannot be removed)\n\nThe above exception was the direct cause of the following exception:\ntests/test_cases/tests_cli/test_project_remove_members.py:306: in test_admin_remove_himself_from_proj_cli\n    await self._cli_steps.admin.cli_remove_user_from_proj(\ntests/reporting_hooks/reporting.py:58: in wrapper\n    raise AssertionError(formatted_msg) from e\nE   AssertionError: [AssertionError] during step: Remove user from project via CLI\nE   Message:  Expected: ERROR: Illegal argument(s) (Last project admin cannot be removed), got: You are using apolo-extras tool 24.10.0, however 25.8.0 is available.\nE   ERROR: Illegal argument(s) (Last project admin cannot be removed)","steps":[{"name":"Login via UI","time":{"start":1757037889217,"stop":1757037900147,"duration":10930},"status":"passed","steps":[{"name":"Click login button","time":{"start":1757037889217,"stop":1757037890388,"duration":1171},"status":"passed","steps":[],"attachments":[{"uid":"f7c721b74d2a6c37","name":"Page URL","source":"f7c721b74d2a6c37.txt","type":"text/plain","size":33},{"uid":"e33f4d13d1f12710","name":"Screenshot: Click login button (success)","source":"e33f4d13d1f12710.png","type":"image/png","size":42225}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Enter email","time":{"start":1757037890388,"stop":1757037890547,"duration":159},"status":"passed","steps":[],"attachments":[{"uid":"6ce666792b3219e6","name":"Page URL","source":"6ce666792b3219e6.txt","type":"text/plain","size":215},{"uid":"95242bb218c11b95","name":"Screenshot: Enter email (success)","source":"95242bb218c11b95.png","type":"image/png","size":46533}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Enter password","time":{"start":1757037890548,"stop":1757037890710,"duration":162},"status":"passed","steps":[],"attachments":[{"uid":"3efba4634427e119","name":"Page URL","source":"3efba4634427e119.txt","type":"text/plain","size":215},{"uid":"632d53e4dd6ab140","name":"Screenshot: Enter password (success)","source":"632d53e4dd6ab140.png","type":"image/png","size":47060}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Click Continue button","time":{"start":1757037890710,"stop":1757037898944,"duration":8234},"status":"passed","steps":[],"attachments":[{"uid":"1ce63d6fe822a0ff","name":"Page URL","source":"1ce63d6fe822a0ff.txt","type":"text/plain","size":215},{"uid":"26f9b1f97475560c","name":"HTTP 200 - GET config","source":"26f9b1f97475560c.txt","type":"text/plain","size":752},{"uid":"41dc1b43ca255f7a","name":"HTTP 200 - GET permissions?uri=blob:","source":"41dc1b43ca255f7a.txt","type":"text/plain","size":163},{"uid":"9935078897747728","name":"HTTP 200 - GET regression-e27snc45yo?include=clusters&include=system_role","source":"9935078897747728.txt","type":"text/plain","size":388},{"uid":"793abc71623efc34","name":"HTTP 200 - GET incoming","source":"793abc71623efc34.txt","type":"text/plain","size":137},{"uid":"b8369570864476b2","name":"HTTP 200 - GET regression-e27snc45yo?include=orgs","source":"b8369570864476b2.txt","type":"text/plain","size":360},{"uid":"47217b88db5e75a6","name":"Screenshot: Click Continue button (success)","source":"47217b88db5e75a6.png","type":"image/png","size":160182}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":7,"hasContent":true,"attachmentStep":false},{"name":"Verify that Welcome new user page displayed","time":{"start":1757037898965,"stop":1757037900064,"duration":1099},"status":"passed","steps":[],"attachments":[{"uid":"f73f1e8e7dd5bca4","name":"Page URL","source":"f73f1e8e7dd5bca4.txt","type":"text/plain","size":44},{"uid":"58a61405ecfb5020","name":"Screenshot: Verify that Welcome new user page displayed (success)","source":"58a61405ecfb5020.png","type":"image/png","size":160182}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"4c9d01745df4b7cf","name":"Page URL","source":"4c9d01745df4b7cf.txt","type":"text/plain","size":33},{"uid":"a8b0f44359faca78","name":"Screenshot: Login via UI (success)","source":"a8b0f44359faca78.png","type":"image/png","size":160182}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":5,"attachmentsCount":17,"hasContent":true,"attachmentStep":false},{"name":"Add organization via API and reload page","time":{"start":1757037900147,"stop":1757037914318,"duration":14171},"status":"passed","steps":[{"name":"Reload page","time":{"start":1757037913249,"stop":1757037914233,"duration":984},"status":"passed","steps":[],"attachments":[{"uid":"24453ef24149d9b","name":"Page URL","source":"24453ef24149d9b.txt","type":"text/plain","size":44},{"uid":"63390f2c17b5644e","name":"HTTP 200 - GET config","source":"63390f2c17b5644e.txt","type":"text/plain","size":1118},{"uid":"abb7197df83228d4","name":"HTTP 200 - GET permissions?uri=blob:","source":"abb7197df83228d4.txt","type":"text/plain","size":236},{"uid":"21a289485ddbd91c","name":"HTTP 200 - GET regression-e27snc45yo?include=clusters&include=system_role","source":"21a289485ddbd91c.txt","type":"text/plain","size":510},{"uid":"c988321ce8c54c25","name":"HTTP 200 - GET regression-org-qh6kafhh1bvd","source":"c988321ce8c54c25.txt","type":"text/plain","size":425},{"uid":"b6e224d8b00bc6f0","name":"HTTP 200 - GET incoming","source":"b6e224d8b00bc6f0.txt","type":"text/plain","size":137},{"uid":"97154c7de5c11935","name":"HTTP 200 - GET regression-e27snc45yo?include=orgs","source":"97154c7de5c11935.txt","type":"text/plain","size":455},{"uid":"32f469c4d2bb8fa9","name":"Screenshot: Reload page (success)","source":"32f469c4d2bb8fa9.png","type":"image/png","size":56443}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":8,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"46ca7a679dc5fd11","name":"Page URL","source":"46ca7a679dc5fd11.txt","type":"text/plain","size":44},{"uid":"da5bc6fb62da6660","name":"Screenshot: Add organization via API and reload page (success)","source":"da5bc6fb62da6660.png","type":"image/png","size":56443}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":10,"hasContent":true,"attachmentStep":false},{"name":"Login to apolo CLI with access token","time":{"start":1757037914319,"stop":1757037915244,"duration":925},"status":"passed","steps":[],"attachments":[{"uid":"a3c17a1df80243a9","name":"Executed CLI command","source":"a3c17a1df80243a9.txt","type":"text/plain","size":1114},{"uid":"3680d05919197cfd","name":"Executed CLI command output","source":"3680d05919197cfd.txt","type":"text/plain","size":264}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Add new project via apolo CLI","time":{"start":1757037915244,"stop":1757037923869,"duration":8625},"status":"passed","steps":[],"attachments":[{"uid":"7ffeb6ddc7f6b0d8","name":"Executed CLI command","source":"7ffeb6ddc7f6b0d8.txt","type":"text/plain","size":114},{"uid":"bc538ad28a7b2272","name":"Executed CLI command output","source":"bc538ad28a7b2272.txt","type":"text/plain","size":304}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Get project users via CLI","time":{"start":1757037923870,"stop":1757037924856,"duration":986},"status":"passed","steps":[],"attachments":[{"uid":"3b27f8b98c679db9","name":"Executed CLI command","source":"3b27f8b98c679db9.txt","type":"text/plain","size":98},{"uid":"b0fc6b58d7109e7b","name":"Executed CLI command output","source":"b0fc6b58d7109e7b.txt","type":"text/plain","size":768}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Verify user present in get-project-users output via CLI","time":{"start":1757037924856,"stop":1757037924856,"duration":0},"status":"passed","steps":[],"attachments":[{"uid":"2666108508a3a216","name":"Executed CLI command","source":"2666108508a3a216.txt","type":"text/plain","size":98},{"uid":"b7a6fa27efb69bd8","name":"Executed CLI command output","source":"b7a6fa27efb69bd8.txt","type":"text/plain","size":768}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Remove user from project via CLI","time":{"start":1757037924856,"stop":1757037925772,"duration":916},"status":"failed","statusMessage":"AssertionError: [AssertionError] during step: Remove user from project via CLI\nMessage:  Expected: ERROR: Illegal argument(s) (Last project admin cannot be removed), got: You are using apolo-extras tool 24.10.0, however 25.8.0 is available.\nERROR: Illegal argument(s) (Last project admin cannot be removed)\n","statusTrace":"  File \"/home/runner/work/apolo-test-automation/apolo-test-automation/tests/reporting_hooks/reporting.py\", line 58, in wrapper\n    raise AssertionError(formatted_msg) from e\n","steps":[],"attachments":[{"uid":"70d499dc033b5d3e","name":"Executed CLI command","source":"70d499dc033b5d3e.txt","type":"text/plain","size":122},{"uid":"2672e81adac27d13","name":"Executed CLI command output","source":"2672e81adac27d13.txt","type":"text/plain","size":135}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"ff6703a29df0185a","name":"log","source":"ff6703a29df0185a.txt","type":"text/plain","size":19617}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":13,"attachmentsCount":38,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"add_page_manager::finalizer","time":{"start":1757037925796,"stop":1757037925796,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_cleanup::finalizer","time":{"start":1757037925796,"stop":1757037929976,"duration":4180},"status":"passed","steps":[{"name":"Post-test cleanup","time":{"start":1757037925796,"stop":1757037929975,"duration":4179},"status":"passed","steps":[{"name":"Delete organisation: regression-org-qh6kafhh1bvd","time":{"start":1757037929103,"stop":1757037929939,"duration":836},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"api_helper::finalizer","time":{"start":1757037929976,"stop":1757037929977,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_function_scoped_runner::0","time":{"start":1757037929978,"stop":1757037929978,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"suite","value":"CLI Project Remove Members"},{"name":"parentSuite","value":"CLI Tests"},{"name":"tag","value":"asyncio"},{"name":"subSuite","value":"TestCLIProjectStructureSetup"},{"name":"host","value":"pkrvm7jw40e0xgp"},{"name":"thread","value":"5993-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_cases.tests_cli.test_project_remove_members"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":true,"retry":true,"extra":{"categories":[],"tags":["asyncio"]},"source":"f5c45324616cde16.json","parameterValues":[]}