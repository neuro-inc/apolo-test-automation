{"uid":"d346c97ec107a142","name":"Verify PostgreSQL client connection in Shell app via UI","fullName":"tests.test_cases.tests_e2e.test_postgres_app.TestE2EPostgresApp#test_postgres_connection_in_shell_vi_ui","historyId":"c0048ef5f0ba987b2fba7adf593e37a0","time":{"start":1763523222794,"stop":1763523238546,"duration":15752},"description":"\n### Pre-conditions:\n- PostgreSQL app installed.\n- Shell app installed.\n\n### Steps:\n- Login with valid credentials.\n- Get Postgres Users.Postgres User Credentials[0].Uri from `output` API.\n- Open Shell app.\n- Run `psql {URI}` command in Shell app.\n\n### Verify that:\n\n- psql connection is successful.\n","descriptionHtml":"<div style='line-height:1.6;'><h3>Pre-conditions:</h3>\n<ul>\n<li>PostgreSQL app installed.</li>\n<li>Shell app installed.</li>\n</ul>\n<h3>Steps:</h3>\n<ul>\n<li>Login with valid credentials.</li>\n<li>Get Postgres Users.Postgres User Credentials[0].Uri from <span style='background-color:#D3D3D3; padding:2px 4px; border-radius:3px; font-family:monospace;'>output</span> API.</li>\n<li>Open Shell app.</li>\n<li>Run <span style='background-color:#D3D3D3; padding:2px 4px; border-radius:3px; font-family:monospace;'>psql {URI}</span> command in Shell app.</li>\n</ul>\n<h3>Verify that:</h3>\n<ul>\n<li>psql connection is successful.</li>\n</ul></div>","status":"failed","statusMessage":"AssertionError: [AssertionError] during step: Get PostgreSQL User URI endpoint via API\nMessage: PostgreSQL user URI not found in response. Error: 'uri'\nResponse: {'app_url': None, 'postgres_users': {'users': [{'__type__': 'CrunchyPostgresUserCredentials', 'pgbouncer_host': 'pg-9dc20af1c50a4c9a933f256d110f159b-pgbouncer.platform--regression-or--regression-p--49cb664c831410c05299be5e.svc', 'user': 'psql-regression-user-zpffk0f5', 'pgbouncer_uri': {'key': 'postgres-psql-regression-user-zpffk0f5-pgbouncer-uri-regression-org-2hxbaybq7jsy-regression-proj--9dc20af1', '__type__': 'ApoloSecret'}, 'port': 5432, 'password': {'key': 'postgres-psql-regression-user-zpffk0f5-password-regression-org-2hxbaybq7jsy-regression-proj--9dc20af1', '__type__': 'ApoloSecret'}, 'user_type': 'user', 'pgbouncer_port': 5432, 'postgres_uri': {'__type__': 'ApoloSecret', 'key': 'postgres-psql-regression-user-zpffk0f5-connection-uri-regression-org-2hxbaybq7jsy-regression-proj--9dc20af1'}, 'dbname': 'psql-db-regression-oly88k30', 'host': 'pg-9dc20af1c50a4c9a933f256d110f159b-primary.platform--regression-or--regression-p--49cb664c831410c05299be5e.svc'}], 'postgres_admin_user': {'host': 'pg-9dc20af1c50a4c9a933f256d110f159b-primary.platform--regression-or--regression-p--49cb664c831410c05299be5e.svc', 'password': {'key': 'postgres-postgres-password-regression-org-2hxbaybq7jsy-regression-proj--9dc20af1', '__type__': 'ApoloSecret'}, 'user': 'postgres', 'pgbouncer_port': 5432, '__type__': 'PostgresAdminUser', 'port': 5432, 'pgbouncer_host': 'pg-9dc20af1c50a4c9a933f256d110f159b-pgbouncer.platform--regression-or--regression-p--49cb664c831410c05299be5e.svc', 'user_type': 'admin'}, '__type__': 'PostgresUsers'}}","statusTrace":"tests/test_cases/steps/api_steps/api_steps.py:400: in get_postgres_user_uri_endpoint_api\n    uri = response[\"postgres_users\"][\"users\"][0][\"uri\"]\n          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nE   KeyError: 'uri'\n\nDuring handling of the above exception, another exception occurred:\ntests/reporting_hooks/reporting.py:49: in wrapper\n    result = await func(*args, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^\ntests/test_cases/steps/api_steps/api_steps.py:402: in get_postgres_user_uri_endpoint_api\n    raise AssertionError(\nE   AssertionError: PostgreSQL user URI not found in response. Error: 'uri'\nE   Response: {'app_url': None, 'postgres_users': {'users': [{'__type__': 'CrunchyPostgresUserCredentials', 'pgbouncer_host': 'pg-9dc20af1c50a4c9a933f256d110f159b-pgbouncer.platform--regression-or--regression-p--49cb664c831410c05299be5e.svc', 'user': 'psql-regression-user-zpffk0f5', 'pgbouncer_uri': {'key': 'postgres-psql-regression-user-zpffk0f5-pgbouncer-uri-regression-org-2hxbaybq7jsy-regression-proj--9dc20af1', '__type__': 'ApoloSecret'}, 'port': 5432, 'password': {'key': 'postgres-psql-regression-user-zpffk0f5-password-regression-org-2hxbaybq7jsy-regression-proj--9dc20af1', '__type__': 'ApoloSecret'}, 'user_type': 'user', 'pgbouncer_port': 5432, 'postgres_uri': {'__type__': 'ApoloSecret', 'key': 'postgres-psql-regression-user-zpffk0f5-connection-uri-regression-org-2hxbaybq7jsy-regression-proj--9dc20af1'}, 'dbname': 'psql-db-regression-oly88k30', 'host': 'pg-9dc20af1c50a4c9a933f256d110f159b-primary.platform--regression-or--regression-p--49cb664c831410c05299be5e.svc'}], 'postgres_admin_user': {'host': 'pg-9dc20af1c50a4c9a933f256d110f159b-primary.platform--regression-or--regression-p--49cb664c831410c05299be5e.svc', 'password': {'key': 'postgres-postgres-password-regression-org-2hxbaybq7jsy-regression-proj--9dc20af1', '__type__': 'ApoloSecret'}, 'user': 'postgres', 'pgbouncer_port': 5432, '__type__': 'PostgresAdminUser', 'port': 5432, 'pgbouncer_host': 'pg-9dc20af1c50a4c9a933f256d110f159b-pgbouncer.platform--regression-or--regression-p--49cb664c831410c05299be5e.svc', 'user_type': 'admin'}, '__type__': 'PostgresUsers'}}\n\nThe above exception was the direct cause of the following exception:\ntests/test_cases/tests_e2e/test_postgres_app.py:606: in test_postgres_connection_in_shell_vi_ui\n    postgre_uri = await api_steps.get_postgres_user_uri_endpoint_api(\ntests/reporting_hooks/reporting.py:58: in wrapper\n    raise AssertionError(formatted_msg) from e\nE   AssertionError: [AssertionError] during step: Get PostgreSQL User URI endpoint via API\nE   Message: PostgreSQL user URI not found in response. Error: 'uri'\nE   Response: {'app_url': None, 'postgres_users': {'users': [{'__type__': 'CrunchyPostgresUserCredentials', 'pgbouncer_host': 'pg-9dc20af1c50a4c9a933f256d110f159b-pgbouncer.platform--regression-or--regression-p--49cb664c831410c05299be5e.svc', 'user': 'psql-regression-user-zpffk0f5', 'pgbouncer_uri': {'key': 'postgres-psql-regression-user-zpffk0f5-pgbouncer-uri-regression-org-2hxbaybq7jsy-regression-proj--9dc20af1', '__type__': 'ApoloSecret'}, 'port': 5432, 'password': {'key': 'postgres-psql-regression-user-zpffk0f5-password-regression-org-2hxbaybq7jsy-regression-proj--9dc20af1', '__type__': 'ApoloSecret'}, 'user_type': 'user', 'pgbouncer_port': 5432, 'postgres_uri': {'__type__': 'ApoloSecret', 'key': 'postgres-psql-regression-user-zpffk0f5-connection-uri-regression-org-2hxbaybq7jsy-regression-proj--9dc20af1'}, 'dbname': 'psql-db-regression-oly88k30', 'host': 'pg-9dc20af1c50a4c9a933f256d110f159b-primary.platform--regression-or--regression-p--49cb664c831410c05299be5e.svc'}], 'postgres_admin_user': {'host': 'pg-9dc20af1c50a4c9a933f256d110f159b-primary.platform--regression-or--regression-p--49cb664c831410c05299be5e.svc', 'password': {'key': 'postgres-postgres-password-regression-org-2hxbaybq7jsy-regression-proj--9dc20af1', '__type__': 'ApoloSecret'}, 'user': 'postgres', 'pgbouncer_port': 5432, '__type__': 'PostgresAdminUser', 'port': 5432, 'pgbouncer_host': 'pg-9dc20af1c50a4c9a933f256d110f159b-pgbouncer.platform--regression-or--regression-p--49cb664c831410c05299be5e.svc', 'user_type': 'admin'}, '__type__': 'PostgresUsers'}}","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"_verify_url","time":{"start":1763515908000,"stop":1763515908000,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_output_dir","time":{"start":1763515908000,"stop":1763515908000,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop_policy","time":{"start":1763515908000,"stop":1763515908000,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delay_worker_start","time":{"start":1763515908000,"stop":1763515908000,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ensure_storage_directories","time":{"start":1763515908000,"stop":1763515908001,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"pytestconfig","time":{"start":1763515908000,"stop":1763515908000,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"base_url","time":{"start":1763515908000,"stop":1763515908000,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_config","time":{"start":1763523222213,"stop":1763523222217,"duration":4},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_function_scoped_runner","time":{"start":1763523222217,"stop":1763523222217,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"page_manager","time":{"start":1763523222217,"stop":1763523222791,"duration":574},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"data_manager","time":{"start":1763523222791,"stop":1763523222792,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"api_helper","time":{"start":1763523222792,"stop":1763523222792,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_cleanup","time":{"start":1763523222792,"stop":1763523222793,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"apolo_cli","time":{"start":1763523222792,"stop":1763523222792,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"users_manager","time":{"start":1763523222792,"stop":1763523222792,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup","time":{"start":1763523222793,"stop":1763523222794,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"add_page_manager","time":{"start":1763523222793,"stop":1763523222793,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_inject_fixtures","time":{"start":1763523222793,"stop":1763523222793,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"postgres_status","time":{"start":1763523222794,"stop":1763523222794,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"shell_status","time":{"start":1763523222794,"stop":1763523222794,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"\n### Pre-conditions:\n- PostgreSQL app installed.\n- Shell app installed.\n\n### Steps:\n- Login with valid credentials.\n- Get Postgres Users.Postgres User Credentials[0].Uri from `output` API.\n- Open Shell app.\n- Run `psql {URI}` command in Shell app.\n\n### Verify that:\n\n- psql connection is successful.\n","descriptionHtml":"<div style='line-height:1.6;'><h3>Pre-conditions:</h3>\n<ul>\n<li>PostgreSQL app installed.</li>\n<li>Shell app installed.</li>\n</ul>\n<h3>Steps:</h3>\n<ul>\n<li>Login with valid credentials.</li>\n<li>Get Postgres Users.Postgres User Credentials[0].Uri from <span style='background-color:#D3D3D3; padding:2px 4px; border-radius:3px; font-family:monospace;'>output</span> API.</li>\n<li>Open Shell app.</li>\n<li>Run <span style='background-color:#D3D3D3; padding:2px 4px; border-radius:3px; font-family:monospace;'>psql {URI}</span> command in Shell app.</li>\n</ul>\n<h3>Verify that:</h3>\n<ul>\n<li>psql connection is successful.</li>\n</ul></div>","status":"failed","statusMessage":"AssertionError: [AssertionError] during step: Get PostgreSQL User URI endpoint via API\nMessage: PostgreSQL user URI not found in response. Error: 'uri'\nResponse: {'app_url': None, 'postgres_users': {'users': [{'__type__': 'CrunchyPostgresUserCredentials', 'pgbouncer_host': 'pg-9dc20af1c50a4c9a933f256d110f159b-pgbouncer.platform--regression-or--regression-p--49cb664c831410c05299be5e.svc', 'user': 'psql-regression-user-zpffk0f5', 'pgbouncer_uri': {'key': 'postgres-psql-regression-user-zpffk0f5-pgbouncer-uri-regression-org-2hxbaybq7jsy-regression-proj--9dc20af1', '__type__': 'ApoloSecret'}, 'port': 5432, 'password': {'key': 'postgres-psql-regression-user-zpffk0f5-password-regression-org-2hxbaybq7jsy-regression-proj--9dc20af1', '__type__': 'ApoloSecret'}, 'user_type': 'user', 'pgbouncer_port': 5432, 'postgres_uri': {'__type__': 'ApoloSecret', 'key': 'postgres-psql-regression-user-zpffk0f5-connection-uri-regression-org-2hxbaybq7jsy-regression-proj--9dc20af1'}, 'dbname': 'psql-db-regression-oly88k30', 'host': 'pg-9dc20af1c50a4c9a933f256d110f159b-primary.platform--regression-or--regression-p--49cb664c831410c05299be5e.svc'}], 'postgres_admin_user': {'host': 'pg-9dc20af1c50a4c9a933f256d110f159b-primary.platform--regression-or--regression-p--49cb664c831410c05299be5e.svc', 'password': {'key': 'postgres-postgres-password-regression-org-2hxbaybq7jsy-regression-proj--9dc20af1', '__type__': 'ApoloSecret'}, 'user': 'postgres', 'pgbouncer_port': 5432, '__type__': 'PostgresAdminUser', 'port': 5432, 'pgbouncer_host': 'pg-9dc20af1c50a4c9a933f256d110f159b-pgbouncer.platform--regression-or--regression-p--49cb664c831410c05299be5e.svc', 'user_type': 'admin'}, '__type__': 'PostgresUsers'}}","statusTrace":"tests/test_cases/steps/api_steps/api_steps.py:400: in get_postgres_user_uri_endpoint_api\n    uri = response[\"postgres_users\"][\"users\"][0][\"uri\"]\n          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nE   KeyError: 'uri'\n\nDuring handling of the above exception, another exception occurred:\ntests/reporting_hooks/reporting.py:49: in wrapper\n    result = await func(*args, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^\ntests/test_cases/steps/api_steps/api_steps.py:402: in get_postgres_user_uri_endpoint_api\n    raise AssertionError(\nE   AssertionError: PostgreSQL user URI not found in response. Error: 'uri'\nE   Response: {'app_url': None, 'postgres_users': {'users': [{'__type__': 'CrunchyPostgresUserCredentials', 'pgbouncer_host': 'pg-9dc20af1c50a4c9a933f256d110f159b-pgbouncer.platform--regression-or--regression-p--49cb664c831410c05299be5e.svc', 'user': 'psql-regression-user-zpffk0f5', 'pgbouncer_uri': {'key': 'postgres-psql-regression-user-zpffk0f5-pgbouncer-uri-regression-org-2hxbaybq7jsy-regression-proj--9dc20af1', '__type__': 'ApoloSecret'}, 'port': 5432, 'password': {'key': 'postgres-psql-regression-user-zpffk0f5-password-regression-org-2hxbaybq7jsy-regression-proj--9dc20af1', '__type__': 'ApoloSecret'}, 'user_type': 'user', 'pgbouncer_port': 5432, 'postgres_uri': {'__type__': 'ApoloSecret', 'key': 'postgres-psql-regression-user-zpffk0f5-connection-uri-regression-org-2hxbaybq7jsy-regression-proj--9dc20af1'}, 'dbname': 'psql-db-regression-oly88k30', 'host': 'pg-9dc20af1c50a4c9a933f256d110f159b-primary.platform--regression-or--regression-p--49cb664c831410c05299be5e.svc'}], 'postgres_admin_user': {'host': 'pg-9dc20af1c50a4c9a933f256d110f159b-primary.platform--regression-or--regression-p--49cb664c831410c05299be5e.svc', 'password': {'key': 'postgres-postgres-password-regression-org-2hxbaybq7jsy-regression-proj--9dc20af1', '__type__': 'ApoloSecret'}, 'user': 'postgres', 'pgbouncer_port': 5432, '__type__': 'PostgresAdminUser', 'port': 5432, 'pgbouncer_host': 'pg-9dc20af1c50a4c9a933f256d110f159b-pgbouncer.platform--regression-or--regression-p--49cb664c831410c05299be5e.svc', 'user_type': 'admin'}, '__type__': 'PostgresUsers'}}\n\nThe above exception was the direct cause of the following exception:\ntests/test_cases/tests_e2e/test_postgres_app.py:606: in test_postgres_connection_in_shell_vi_ui\n    postgre_uri = await api_steps.get_postgres_user_uri_endpoint_api(\ntests/reporting_hooks/reporting.py:58: in wrapper\n    raise AssertionError(formatted_msg) from e\nE   AssertionError: [AssertionError] during step: Get PostgreSQL User URI endpoint via API\nE   Message: PostgreSQL user URI not found in response. Error: 'uri'\nE   Response: {'app_url': None, 'postgres_users': {'users': [{'__type__': 'CrunchyPostgresUserCredentials', 'pgbouncer_host': 'pg-9dc20af1c50a4c9a933f256d110f159b-pgbouncer.platform--regression-or--regression-p--49cb664c831410c05299be5e.svc', 'user': 'psql-regression-user-zpffk0f5', 'pgbouncer_uri': {'key': 'postgres-psql-regression-user-zpffk0f5-pgbouncer-uri-regression-org-2hxbaybq7jsy-regression-proj--9dc20af1', '__type__': 'ApoloSecret'}, 'port': 5432, 'password': {'key': 'postgres-psql-regression-user-zpffk0f5-password-regression-org-2hxbaybq7jsy-regression-proj--9dc20af1', '__type__': 'ApoloSecret'}, 'user_type': 'user', 'pgbouncer_port': 5432, 'postgres_uri': {'__type__': 'ApoloSecret', 'key': 'postgres-psql-regression-user-zpffk0f5-connection-uri-regression-org-2hxbaybq7jsy-regression-proj--9dc20af1'}, 'dbname': 'psql-db-regression-oly88k30', 'host': 'pg-9dc20af1c50a4c9a933f256d110f159b-primary.platform--regression-or--regression-p--49cb664c831410c05299be5e.svc'}], 'postgres_admin_user': {'host': 'pg-9dc20af1c50a4c9a933f256d110f159b-primary.platform--regression-or--regression-p--49cb664c831410c05299be5e.svc', 'password': {'key': 'postgres-postgres-password-regression-org-2hxbaybq7jsy-regression-proj--9dc20af1', '__type__': 'ApoloSecret'}, 'user': 'postgres', 'pgbouncer_port': 5432, '__type__': 'PostgresAdminUser', 'port': 5432, 'pgbouncer_host': 'pg-9dc20af1c50a4c9a933f256d110f159b-pgbouncer.platform--regression-or--regression-p--49cb664c831410c05299be5e.svc', 'user_type': 'admin'}, '__type__': 'PostgresUsers'}}","steps":[{"name":"Login via UI","time":{"start":1763523222795,"stop":1763523238423,"duration":15628},"status":"passed","steps":[{"name":"Verify that Auth page displayed","time":{"start":1763523222795,"stop":1763523223877,"duration":1082},"status":"passed","steps":[],"attachments":[{"uid":"9e35d5d51e573e10","name":"Page URL","source":"9e35d5d51e573e10.txt","type":"text/plain","size":29},{"uid":"8308d5152ea5a3c","name":"HTTP 200 - GET config","source":"8308d5152ea5a3c.txt","type":"text/plain","size":673},{"uid":"241cd685d29d49b2","name":"Screenshot: Verify that Auth page displayed (success)","source":"241cd685d29d49b2.png","type":"image/png","size":88563}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":3,"hasContent":true,"attachmentStep":false},{"name":"Click login button","time":{"start":1763523223878,"stop":1763523225016,"duration":1138},"status":"passed","steps":[],"attachments":[{"uid":"73c77b316f1aa86b","name":"Page URL","source":"73c77b316f1aa86b.txt","type":"text/plain","size":33},{"uid":"5aabcfc9aca11caa","name":"Screenshot: Click login button (success)","source":"5aabcfc9aca11caa.png","type":"image/png","size":41524}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Verify that Login page displayed","time":{"start":1763523225016,"stop":1763523225114,"duration":98},"status":"passed","steps":[],"attachments":[{"uid":"1c566763425e8385","name":"Page URL","source":"1c566763425e8385.txt","type":"text/plain","size":215},{"uid":"e7d994f0ecbb3d13","name":"Screenshot: Verify that Login page displayed (success)","source":"e7d994f0ecbb3d13.png","type":"image/png","size":41637}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Enter email","time":{"start":1763523225114,"stop":1763523225433,"duration":319},"status":"passed","steps":[],"attachments":[{"uid":"988e594f211c5f1d","name":"Page URL","source":"988e594f211c5f1d.txt","type":"text/plain","size":215},{"uid":"1b1a9af54624eb39","name":"Screenshot: Enter email (success)","source":"1b1a9af54624eb39.png","type":"image/png","size":45379}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Enter password","time":{"start":1763523225433,"stop":1763523225750,"duration":317},"status":"passed","steps":[],"attachments":[{"uid":"f69c5d97cbd8724b","name":"Page URL","source":"f69c5d97cbd8724b.txt","type":"text/plain","size":215},{"uid":"14847ac981c415f","name":"Screenshot: Enter password (success)","source":"14847ac981c415f.png","type":"image/png","size":45507}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Click Continue button","time":{"start":1763523225750,"stop":1763523238220,"duration":12470},"status":"passed","steps":[],"attachments":[{"uid":"9ceed5f113a9ba75","name":"Page URL","source":"9ceed5f113a9ba75.txt","type":"text/plain","size":215},{"uid":"b35b3fd594bc8451","name":"HTTP 200 - GET config","source":"b35b3fd594bc8451.txt","type":"text/plain","size":2137},{"uid":"7691de9f2a437aee","name":"HTTP 200 - GET permissions?uri=blob:","source":"7691de9f2a437aee.txt","type":"text/plain","size":255},{"uid":"80ca24d591fb5aae","name":"HTTP 200 - GET regression-hpaspulkao?include=orgs","source":"80ca24d591fb5aae.txt","type":"text/plain","size":477},{"uid":"39b47a3aab0dd06a","name":"HTTP 200 - GET regression-org-2hxbaybq7jsy","source":"39b47a3aab0dd06a.txt","type":"text/plain","size":499},{"uid":"f44030fc8b880c51","name":"HTTP 200 - GET incoming","source":"f44030fc8b880c51.txt","type":"text/plain","size":156},{"uid":"a012a041b1cdfe67","name":"HTTP 200 - GET instances?org=regression-org-2hxbaybq7jsy&project=regression-proj-g29fkycjgw&cluster=default&size=100","source":"a012a041b1cdfe67.txt","type":"text/plain","size":1733},{"uid":"7b5f196db8294f17","name":"HTTP 200 - GET regression-hpaspulkao?include=clusters&include=system_role","source":"7b5f196db8294f17.txt","type":"text/plain","size":529},{"uid":"dbb4f9b092469c31","name":"HTTP 200 - GET templates","source":"dbb4f9b092469c31.txt","type":"text/plain","size":2146},{"uid":"b958768dafe66cb9","name":"HTTP 200 - GET tags","source":"b958768dafe66cb9.txt","type":"text/plain","size":864},{"uid":"f443ab91977d9af0","name":"HTTP 200 - GET templates?page=1&size=50","source":"f443ab91977d9af0.txt","type":"text/plain","size":2161},{"uid":"496038dd4c0451b","name":"Screenshot: Click Continue button (success)","source":"496038dd4c0451b.png","type":"image/png","size":155445}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":12,"hasContent":true,"attachmentStep":false},{"name":"Verify Apps page displayed","time":{"start":1763523238228,"stop":1763523238326,"duration":98},"status":"passed","steps":[],"attachments":[{"uid":"8a0b1a288b3b2362","name":"Page URL","source":"8a0b1a288b3b2362.txt","type":"text/plain","size":116},{"uid":"57665c8c4e3f1c44","name":"Screenshot: Verify Apps page displayed (success)","source":"57665c8c4e3f1c44.png","type":"image/png","size":155445}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"bb48fbadb39b04b0","name":"Page URL","source":"bb48fbadb39b04b0.txt","type":"text/plain","size":29},{"uid":"34117f3a886e39a8","name":"Screenshot: Login via UI (success)","source":"34117f3a886e39a8.png","type":"image/png","size":155445}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":7,"attachmentsCount":27,"hasContent":true,"attachmentStep":false},{"name":"Get PostgreSQL User URI endpoint via API","time":{"start":1763523238423,"stop":1763523238546,"duration":123},"status":"failed","statusMessage":"AssertionError: [AssertionError] during step: Get PostgreSQL User URI endpoint via API\nMessage: PostgreSQL user URI not found in response. Error: 'uri'\nResponse: {'app_url': None, 'postgres_users': {'users': [{'__type__': 'CrunchyPostgresUserCredentials', 'pgbouncer_host': 'pg-9dc20af1c50a4c9a933f256d110f159b-pgbouncer.platform--regression-or--regression-p--49cb664c831410c05299be5e.svc', 'user': 'psql-regression-user-zpffk0f5', 'pgbouncer_uri': {'key': 'postgres-psql-regression-user-zpffk0f5-pgbouncer-uri-regression-org-2hxbaybq7jsy-regression-proj--9dc20af1', '__type__': 'ApoloSecret'}, 'port': 5432, 'password': {'key': 'postgres-psql-regression-user-zpffk0f5-password-regression-org-2hxbaybq7jsy-regression-proj--9dc20af1', '__type__': 'ApoloSecret'}, 'user_type': 'user', 'pgbouncer_port': 5432, 'postgres_uri': {'__type__': 'ApoloSecret', 'key': 'postgres-psql-regression-user-zpffk0f5-connection-uri-regression-org-2hxbaybq7jsy-regression-proj--9dc20af1'}, 'dbname': 'psql-db-regression-oly88k30', 'host': 'pg-9dc20af1c50a4c9a933f256d110f159b-primary.platform--regression-or--regression-p--49cb664c831410c05299be5e.svc'}], 'postgres_admin_user': {'host': 'pg-9dc20af1c50a4c9a933f256d110f159b-primary.platform--regression-or--regression-p--49cb664c831410c05299be5e.svc', 'password': {'key': 'postgres-postgres-password-regression-org-2hxbaybq7jsy-regression-proj--9dc20af1', '__type__': 'ApoloSecret'}, 'user': 'postgres', 'pgbouncer_port': 5432, '__type__': 'PostgresAdminUser', 'port': 5432, 'pgbouncer_host': 'pg-9dc20af1c50a4c9a933f256d110f159b-pgbouncer.platform--regression-or--regression-p--49cb664c831410c05299be5e.svc', 'user_type': 'admin'}, '__type__': 'PostgresUsers'}}\n","statusTrace":"  File \"/home/runner/work/apolo-test-automation/apolo-test-automation/tests/reporting_hooks/reporting.py\", line 58, in wrapper\n    raise AssertionError(formatted_msg) from e\n","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"dd08275a23b2e515","name":"log","source":"dd08275a23b2e515.txt","type":"text/plain","size":21069}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":9,"attachmentsCount":28,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"add_page_manager::finalizer","time":{"start":1763523238574,"stop":1763523238575,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"api_helper::finalizer","time":{"start":1763523238575,"stop":1763523238576,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_cleanup::finalizer","time":{"start":1763523238575,"stop":1763523238575,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_cleanup::finalizer","time":{"start":1763523238575,"stop":1763523238575,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_function_scoped_runner::0","time":{"start":1763523238577,"stop":1763523238577,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"parentSuite","value":"E2E Tests"},{"name":"suite","value":"PostgreSQL App"},{"name":"tag","value":"asyncio"},{"name":"tag","value":"class_setup"},{"name":"subSuite","value":"TestE2EPostgresApp"},{"name":"host","value":"runnervmg1sw1"},{"name":"thread","value":"3007-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_cases.tests_e2e.test_postgres_app"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":8,"broken":1,"skipped":9,"passed":13,"unknown":0,"total":31},"items":[{"uid":"715c8043a5087b94","status":"failed","statusDetails":"AssertionError: [AssertionError] during step: Get PostgreSQL User URI endpoint via API\nMessage: PostgreSQL user URI not found in response. Error: 'uri'\nResponse: {'postgres_users': {'users': [{'password': {'key': 'postgres-psql-regression-user-lmh0tgdp-password-regression-org-29wh52ka0dpa-regression-proj--6abddf92', '__type__': 'ApoloSecret'}, 'postgres_uri': {'key': 'postgres-psql-regression-user-lmh0tgdp-connection-uri-regression-org-29wh52ka0dpa-regression-proj--6abddf92', '__type__': 'ApoloSecret'}, 'host': 'pg-6abddf926ac745498410f042b68169b3-primary.platform--regression-or--regression-p--020a20eebffbbf09df0c6551.svc', 'pgbouncer_host': 'pg-6abddf926ac745498410f042b68169b3-pgbouncer.platform--regression-or--regression-p--020a20eebffbbf09df0c6551.svc', 'user': 'psql-regression-user-lmh0tgdp', 'user_type': 'user', 'pgbouncer_port': 5432, 'port': 5432, 'dbname': 'psql-db-regression-0gq6u6a5', '__type__': 'CrunchyPostgresUserCredentials', 'pgbouncer_uri': {'__type__': 'ApoloSecret', 'key': 'postgres-psql-regression-user-lmh0tgdp-pgbouncer-uri-regression-org-29wh52ka0dpa-regression-proj--6abddf92'}}], '__type__': 'PostgresUsers', 'postgres_admin_user': {'pgbouncer_host': 'pg-6abddf926ac745498410f042b68169b3-pgbouncer.platform--regression-or--regression-p--020a20eebffbbf09df0c6551.svc', 'user': 'postgres', 'password': {'key': 'postgres-postgres-password-regression-org-29wh52ka0dpa-regression-proj--6abddf92', '__type__': 'ApoloSecret'}, 'pgbouncer_port': 5432, 'host': 'pg-6abddf926ac745498410f042b68169b3-primary.platform--regression-or--regression-p--020a20eebffbbf09df0c6551.svc', '__type__': 'PostgresAdminUser', 'port': 5432, 'user_type': 'admin'}}, 'app_url': None}","time":{"start":1763436743672,"stop":1763436749066,"duration":5394}},{"uid":"8483f4252a6783b6","status":"failed","statusDetails":"AssertionError: [AssertionError] during step: Get PostgreSQL User URI endpoint via API\nMessage: PostgreSQL user URI not found in response. Error: 'uri'\nResponse: {'app_url': None, 'postgres_users': {'__type__': 'PostgresUsers', 'postgres_admin_user': {'user_type': 'admin', 'host': 'pg-216df83bcd9743848797e3406446302e-primary.platform--regression-or--regression-p--3a4c486c7cf8138bb7faecd1.svc', '__type__': 'PostgresAdminUser', 'port': 5432, 'user': 'postgres', 'pgbouncer_port': 5432, 'pgbouncer_host': 'pg-216df83bcd9743848797e3406446302e-pgbouncer.platform--regression-or--regression-p--3a4c486c7cf8138bb7faecd1.svc', 'password': {'__type__': 'ApoloSecret', 'key': 'postgres-postgres-password-regression-org-knifn4qwi0oq-regression-proj--216df83b'}}, 'users': [{'dbname': 'psql-db-regression-9iwnitsx', 'pgbouncer_port': 5432, 'postgres_uri': {'key': 'postgres-psql-regression-user-otd8fthd-connection-uri-regression-org-knifn4qwi0oq-regression-proj--216df83b', '__type__': 'ApoloSecret'}, 'port': 5432, 'password': {'key': 'postgres-psql-regression-user-otd8fthd-password-regression-org-knifn4qwi0oq-regression-proj--216df83b', '__type__': 'ApoloSecret'}, '__type__': 'CrunchyPostgresUserCredentials', 'user_type': 'user', 'pgbouncer_uri': {'__type__': 'ApoloSecret', 'key': 'postgres-psql-regression-user-otd8fthd-pgbouncer-uri-regression-org-knifn4qwi0oq-regression-proj--216df83b'}, 'user': 'psql-regression-user-otd8fthd', 'pgbouncer_host': 'pg-216df83bcd9743848797e3406446302e-pgbouncer.platform--regression-or--regression-p--3a4c486c7cf8138bb7faecd1.svc', 'host': 'pg-216df83bcd9743848797e3406446302e-primary.platform--regression-or--regression-p--3a4c486c7cf8138bb7faecd1.svc'}]}}","time":{"start":1763350197872,"stop":1763350213649,"duration":15777}},{"uid":"e671d747ae625330","status":"failed","statusDetails":"AssertionError: [AssertionError] during step: Get PostgreSQL User URI endpoint via API\nMessage: PostgreSQL user URI not found in response. Error: 'uri'\nResponse: {'postgres_users': {'postgres_admin_user': {'user_type': 'admin', 'host': 'pg-b91894ea34a24f28bcd43c06cc3cb115-primary.platform--regression-or--regression-p--fb722e35a44ae94057310a77.svc', 'pgbouncer_host': 'pg-b91894ea34a24f28bcd43c06cc3cb115-pgbouncer.platform--regression-or--regression-p--fb722e35a44ae94057310a77.svc', 'user': 'postgres', 'port': 5432, 'pgbouncer_port': 5432, 'password': {'__type__': 'ApoloSecret', 'key': 'postgres-postgres-password-regression-org-zpt9kqoir4nn-regression-proj--b91894ea'}, '__type__': 'PostgresAdminUser'}, 'users': [{'pgbouncer_uri': {'key': 'postgres-psql-regression-user-ot4jz8m0-pgbouncer-uri-regression-org-zpt9kqoir4nn-regression-proj--b91894ea', '__type__': 'ApoloSecret'}, 'dbname': 'psql-db-regression-wm4vdgml', 'port': 5432, 'pgbouncer_host': 'pg-b91894ea34a24f28bcd43c06cc3cb115-pgbouncer.platform--regression-or--regression-p--fb722e35a44ae94057310a77.svc', 'pgbouncer_port': 5432, 'host': 'pg-b91894ea34a24f28bcd43c06cc3cb115-primary.platform--regression-or--regression-p--fb722e35a44ae94057310a77.svc', 'user': 'psql-regression-user-ot4jz8m0', 'postgres_uri': {'key': 'postgres-psql-regression-user-ot4jz8m0-connection-uri-regression-org-zpt9kqoir4nn-regression-proj--b91894ea', '__type__': 'ApoloSecret'}, 'user_type': 'user', 'password': {'key': 'postgres-psql-regression-user-ot4jz8m0-password-regression-org-zpt9kqoir4nn-regression-proj--b91894ea', '__type__': 'ApoloSecret'}, '__type__': 'CrunchyPostgresUserCredentials'}], '__type__': 'PostgresUsers'}, 'app_url': None}","time":{"start":1763263801016,"stop":1763263806815,"duration":5799}},{"uid":"7182ccf5ddca7f48","status":"failed","statusDetails":"AssertionError: [AssertionError] during step: Get PostgreSQL User URI endpoint via API\nMessage: PostgreSQL user URI not found in response. Error: 'uri'\nResponse: {'app_url': None, 'postgres_users': {'users': [{'user_type': 'user', '__type__': 'CrunchyPostgresUserCredentials', 'dbname': 'psql-db-regression-f9vet3rz', 'port': 5432, 'pgbouncer_host': 'pg-d5d28eb1aac64c57a039636bcf425ceb-pgbouncer.platform--regression-or--regression-p--9eb30f4ef90e4fc20111b7b0.svc', 'host': 'pg-d5d28eb1aac64c57a039636bcf425ceb-primary.platform--regression-or--regression-p--9eb30f4ef90e4fc20111b7b0.svc', 'pgbouncer_uri': {'__type__': 'ApoloSecret', 'key': 'postgres-psql-regression-user-a28f9l1n-pgbouncer-uri-regression-org-866ezezqix1z-regression-proj--d5d28eb1'}, 'postgres_uri': {'key': 'postgres-psql-regression-user-a28f9l1n-connection-uri-regression-org-866ezezqix1z-regression-proj--d5d28eb1', '__type__': 'ApoloSecret'}, 'pgbouncer_port': 5432, 'user': 'psql-regression-user-a28f9l1n', 'password': {'__type__': 'ApoloSecret', 'key': 'postgres-psql-regression-user-a28f9l1n-password-regression-org-866ezezqix1z-regression-proj--d5d28eb1'}}], '__type__': 'PostgresUsers', 'postgres_admin_user': {'user': 'postgres', 'password': {'key': 'postgres-postgres-password-regression-org-866ezezqix1z-regression-proj--d5d28eb1', '__type__': 'ApoloSecret'}, 'host': 'pg-d5d28eb1aac64c57a039636bcf425ceb-primary.platform--regression-or--regression-p--9eb30f4ef90e4fc20111b7b0.svc', 'pgbouncer_host': 'pg-d5d28eb1aac64c57a039636bcf425ceb-pgbouncer.platform--regression-or--regression-p--9eb30f4ef90e4fc20111b7b0.svc', 'user_type': 'admin', 'pgbouncer_port': 5432, 'port': 5432, '__type__': 'PostgresAdminUser'}}}","time":{"start":1763177308296,"stop":1763177323936,"duration":15640}},{"uid":"eb43ee5c6afdbf3d","status":"skipped","statusDetails":"Skipped: PostgreSQL app was not installed successfully","time":{"start":1763090854623,"stop":1763090854623,"duration":0}},{"uid":"fb032e88245531e8","status":"passed","time":{"start":1763004981606,"stop":1763005009408,"duration":27802}},{"uid":"a8b3a6e3f621a1ef","status":"passed","time":{"start":1762917998442,"stop":1762918029639,"duration":31197}},{"uid":"b7f17bb53f08128c","status":"passed","time":{"start":1762831333355,"stop":1762831354786,"duration":21431}},{"uid":"fa7704a00dd29478","status":"skipped","statusDetails":"Skipped: PostgreSQL app was not installed successfully","time":{"start":1762744698716,"stop":1762744698716,"duration":0}},{"uid":"98b9cbb182b6556f","status":"skipped","statusDetails":"Skipped: PostgreSQL app was not installed successfully","time":{"start":1762658158780,"stop":1762658158780,"duration":0}},{"uid":"2058e864ca1f20b9","status":"skipped","statusDetails":"Skipped: PostgreSQL app was not installed successfully","time":{"start":1762571719176,"stop":1762571719176,"duration":0}},{"uid":"47821d05ac4282fa","status":"skipped","statusDetails":"Skipped: PostgreSQL app was not installed successfully","time":{"start":1762485381893,"stop":1762485381893,"duration":0}},{"uid":"3c50eef68f1774c2","status":"passed","time":{"start":1762398688983,"stop":1762398709112,"duration":20129}},{"uid":"3bc5a52b0ddae5e9","status":"failed","statusDetails":"AssertionError: [Error] during step: Open Shell app page\nMessage: Page.goto: Protocol error (Page.navigate): Cannot navigate to invalid URL\nCall log:\n  - navigating to \"\", waiting until \"load\"","time":{"start":1762312240504,"stop":1762312256021,"duration":15517}},{"uid":"9ed7c554d4fd601b","status":"passed","time":{"start":1762226090550,"stop":1762226120389,"duration":29839}},{"uid":"aebd444aaa69eca1","status":"skipped","statusDetails":"Skipped: PostgreSQL app was not installed successfully","time":{"start":1762139112020,"stop":1762139112020,"duration":0}},{"uid":"7c0ec26359468003","status":"passed","time":{"start":1762053231220,"stop":1762053253271,"duration":22051}},{"uid":"e8536ecfe16deb40","status":"passed","time":{"start":1761967070158,"stop":1761967090001,"duration":19843}},{"uid":"84e670627a99f92f","status":"failed","statusDetails":"AssertionError: [Error] during step: Open Shell app page\nMessage: Page.goto: Protocol error (Page.navigate): Cannot navigate to invalid URL\nCall log:\n  - navigating to \"\", waiting until \"load\"","time":{"start":1761880649379,"stop":1761880657778,"duration":8399}},{"uid":"e0ffe0fb7e1e1849","status":"skipped","statusDetails":"Skipped: Shell app was not installed successfully","time":{"start":1761795438150,"stop":1761795438150,"duration":0}}]},"tags":["asyncio","class_setup"]},"source":"d346c97ec107a142.json","parameterValues":[]}