{"uid":"eb21125c8fd8479b","name":"Admin removes himself from project via CLI","fullName":"tests.test_cases.tests_cli.test_project_remove_members.TestCLIProjectStructureSetup#test_admin_remove_himself_from_proj_cli","historyId":"b1bebe671c380049e3a7c59719859792","time":{"start":1756951588840,"stop":1756951638190,"duration":49350},"description":"\n- Login with valid credentials via **UI**.\n- Get Bearer auth token from Playwright local storage.\n- Create new organization via **API**.\n- Login with Bearer auth token via **CLI**.\n- Create new project via **CLI**.\n\n### Verify that:\n\n- `Admin` **cannot** remove himself from project via **CLI**.\n","descriptionHtml":"<div style='line-height:1.6;'><ul>\n<li>Login with valid credentials via <strong>UI</strong>.</li>\n<li>Get Bearer auth token from Playwright local storage.</li>\n<li>Create new organization via <strong>API</strong>.</li>\n<li>Login with Bearer auth token via <strong>CLI</strong>.</li>\n<li>Create new project via <strong>CLI</strong>.</li>\n</ul>\n<h3>Verify that:</h3>\n<ul>\n<li><span style='background-color:#D3D3D3; padding:2px 4px; border-radius:3px; font-family:monospace;'>Admin</span> <strong>cannot</strong> remove himself from project via <strong>CLI</strong>.</li>\n</ul></div>","status":"failed","statusMessage":"AssertionError: [AssertionError] during step: Remove user from project via CLI\nMessage:  Expected: ERROR: Illegal argument(s) (Last project admin cannot be removed), got: You are using apolo-extras tool 24.10.0, however 25.8.0 is available.\nERROR: Illegal argument(s) (Last project admin cannot be removed)","statusTrace":"tests/reporting_hooks/reporting.py:49: in wrapper\n    result = await func(*args, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^\ntests/test_cases/steps/cli_steps/comonent_steps_impl/admin_steps.py:151: in cli_remove_user_from_proj\n    assert error_message == expected_error, (\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nE   AssertionError:  Expected: ERROR: Illegal argument(s) (Last project admin cannot be removed), got: You are using apolo-extras tool 24.10.0, however 25.8.0 is available.\nE   ERROR: Illegal argument(s) (Last project admin cannot be removed)\n\nThe above exception was the direct cause of the following exception:\ntests/test_cases/tests_cli/test_project_remove_members.py:306: in test_admin_remove_himself_from_proj_cli\n    await self._cli_steps.admin.cli_remove_user_from_proj(\ntests/reporting_hooks/reporting.py:58: in wrapper\n    raise AssertionError(formatted_msg) from e\nE   AssertionError: [AssertionError] during step: Remove user from project via CLI\nE   Message:  Expected: ERROR: Illegal argument(s) (Last project admin cannot be removed), got: You are using apolo-extras tool 24.10.0, however 25.8.0 is available.\nE   ERROR: Illegal argument(s) (Last project admin cannot be removed)","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"delay_worker_start","time":{"start":1756949479140,"stop":1756949509141,"duration":30001},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"attachmentStep":false},{"name":"delete_output_dir","time":{"start":1756949479140,"stop":1756949479140,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"attachmentStep":false},{"name":"pytestconfig","time":{"start":1756949479140,"stop":1756949479140,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"attachmentStep":false},{"name":"_verify_url","time":{"start":1756949479140,"stop":1756949479140,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"attachmentStep":false},{"name":"base_url","time":{"start":1756949479140,"stop":1756949479140,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"attachmentStep":false},{"name":"event_loop_policy","time":{"start":1756949479140,"stop":1756949479140,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"attachmentStep":false},{"name":"ensure_storage_directories","time":{"start":1756949509141,"stop":1756949509141,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"attachmentStep":false},{"name":"test_config","time":{"start":1756951586186,"stop":1756951586188,"duration":2},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"attachmentStep":false},{"name":"page_manager","time":{"start":1756951586188,"stop":1756951588236,"duration":2048},"status":"passed","steps":[],"attachments":[{"uid":"e4209bf3b607d1ad","name":"HTTP 200 - GET config","source":"e4209bf3b607d1ad.txt","type":"text/plain","size":654}],"parameters":[],"stepsCount":0,"attachmentsCount":1,"shouldDisplayMessage":false,"hasContent":true,"attachmentStep":false},{"name":"_function_scoped_runner","time":{"start":1756951586189,"stop":1756951586189,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"attachmentStep":false},{"name":"data_manager","time":{"start":1756951588236,"stop":1756951588237,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"attachmentStep":false},{"name":"api_helper","time":{"start":1756951588237,"stop":1756951588237,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"attachmentStep":false},{"name":"apolo_cli","time":{"start":1756951588237,"stop":1756951588237,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"attachmentStep":false},{"name":"setup_cleanup","time":{"start":1756951588237,"stop":1756951588238,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"attachmentStep":false},{"name":"users_manager","time":{"start":1756951588237,"stop":1756951588237,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"attachmentStep":false},{"name":"add_page_manager","time":{"start":1756951588239,"stop":1756951588239,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"attachmentStep":false},{"name":"setup","time":{"start":1756951588239,"stop":1756951588840,"duration":601},"status":"passed","steps":[{"name":"Verify Apolo CLI client is installed","time":{"start":1756951588239,"stop":1756951588840,"duration":601},"status":"passed","steps":[],"attachments":[{"uid":"b7f1890bf7f8ab4e","name":"Executed CLI command","source":"b7f1890bf7f8ab4e.txt","type":"text/plain","size":15},{"uid":"5f2ad2daec7017ed","name":"Executed CLI command output","source":"5f2ad2daec7017ed.txt","type":"text/plain","size":28}],"parameters":[],"stepsCount":0,"attachmentsCount":2,"shouldDisplayMessage":false,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"stepsCount":1,"attachmentsCount":2,"shouldDisplayMessage":false,"hasContent":true,"attachmentStep":false},{"name":"_inject_fixtures","time":{"start":1756951588239,"stop":1756951588239,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"\n- Login with valid credentials via **UI**.\n- Get Bearer auth token from Playwright local storage.\n- Create new organization via **API**.\n- Login with Bearer auth token via **CLI**.\n- Create new project via **CLI**.\n\n### Verify that:\n\n- `Admin` **cannot** remove himself from project via **CLI**.\n","descriptionHtml":"<div style='line-height:1.6;'><ul>\n<li>Login with valid credentials via <strong>UI</strong>.</li>\n<li>Get Bearer auth token from Playwright local storage.</li>\n<li>Create new organization via <strong>API</strong>.</li>\n<li>Login with Bearer auth token via <strong>CLI</strong>.</li>\n<li>Create new project via <strong>CLI</strong>.</li>\n</ul>\n<h3>Verify that:</h3>\n<ul>\n<li><span style='background-color:#D3D3D3; padding:2px 4px; border-radius:3px; font-family:monospace;'>Admin</span> <strong>cannot</strong> remove himself from project via <strong>CLI</strong>.</li>\n</ul></div>","status":"failed","statusMessage":"AssertionError: [AssertionError] during step: Remove user from project via CLI\nMessage:  Expected: ERROR: Illegal argument(s) (Last project admin cannot be removed), got: You are using apolo-extras tool 24.10.0, however 25.8.0 is available.\nERROR: Illegal argument(s) (Last project admin cannot be removed)","statusTrace":"tests/reporting_hooks/reporting.py:49: in wrapper\n    result = await func(*args, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^\ntests/test_cases/steps/cli_steps/comonent_steps_impl/admin_steps.py:151: in cli_remove_user_from_proj\n    assert error_message == expected_error, (\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nE   AssertionError:  Expected: ERROR: Illegal argument(s) (Last project admin cannot be removed), got: You are using apolo-extras tool 24.10.0, however 25.8.0 is available.\nE   ERROR: Illegal argument(s) (Last project admin cannot be removed)\n\nThe above exception was the direct cause of the following exception:\ntests/test_cases/tests_cli/test_project_remove_members.py:306: in test_admin_remove_himself_from_proj_cli\n    await self._cli_steps.admin.cli_remove_user_from_proj(\ntests/reporting_hooks/reporting.py:58: in wrapper\n    raise AssertionError(formatted_msg) from e\nE   AssertionError: [AssertionError] during step: Remove user from project via CLI\nE   Message:  Expected: ERROR: Illegal argument(s) (Last project admin cannot be removed), got: You are using apolo-extras tool 24.10.0, however 25.8.0 is available.\nE   ERROR: Illegal argument(s) (Last project admin cannot be removed)","steps":[{"name":"Login via UI","time":{"start":1756951588841,"stop":1756951594860,"duration":6019},"status":"passed","steps":[{"name":"Click login button","time":{"start":1756951588841,"stop":1756951589916,"duration":1075},"status":"passed","steps":[],"attachments":[{"uid":"1e3ace2631d9027e","name":"Page URL","source":"1e3ace2631d9027e.txt","type":"text/plain","size":33},{"uid":"e16aaa974a49e4f7","name":"Screenshot: Click login button (success)","source":"e16aaa974a49e4f7.png","type":"image/png","size":41902}],"parameters":[],"stepsCount":0,"attachmentsCount":2,"shouldDisplayMessage":false,"hasContent":true,"attachmentStep":false},{"name":"Enter email","time":{"start":1756951589916,"stop":1756951590112,"duration":196},"status":"passed","steps":[],"attachments":[{"uid":"7ecd15ab9c2de4ef","name":"Page URL","source":"7ecd15ab9c2de4ef.txt","type":"text/plain","size":215},{"uid":"38d7ef4d35d0b82c","name":"Screenshot: Enter email (success)","source":"38d7ef4d35d0b82c.png","type":"image/png","size":45368}],"parameters":[],"stepsCount":0,"attachmentsCount":2,"shouldDisplayMessage":false,"hasContent":true,"attachmentStep":false},{"name":"Enter password","time":{"start":1756951590112,"stop":1756951590262,"duration":150},"status":"passed","steps":[],"attachments":[{"uid":"429225a64074a9ec","name":"Page URL","source":"429225a64074a9ec.txt","type":"text/plain","size":215},{"uid":"45f15a1f89482b42","name":"Screenshot: Enter password (success)","source":"45f15a1f89482b42.png","type":"image/png","size":46182}],"parameters":[],"stepsCount":0,"attachmentsCount":2,"shouldDisplayMessage":false,"hasContent":true,"attachmentStep":false},{"name":"Click Continue button","time":{"start":1756951590262,"stop":1756951593626,"duration":3364},"status":"passed","steps":[],"attachments":[{"uid":"2f2046c255cfff78","name":"Page URL","source":"2f2046c255cfff78.txt","type":"text/plain","size":215},{"uid":"50e8a7d1ebb923d","name":"HTTP 200 - GET config","source":"50e8a7d1ebb923d.txt","type":"text/plain","size":752},{"uid":"a62e3f7748aba4b6","name":"HTTP 200 - GET permissions?uri=blob:","source":"a62e3f7748aba4b6.txt","type":"text/plain","size":163},{"uid":"98631424ef32e28f","name":"HTTP 200 - GET incoming","source":"98631424ef32e28f.txt","type":"text/plain","size":137},{"uid":"686ee6172dc00980","name":"HTTP 200 - GET regression-slakmuzlpr?include=orgs","source":"686ee6172dc00980.txt","type":"text/plain","size":360},{"uid":"be8b52d8c2f11558","name":"HTTP 200 - GET regression-slakmuzlpr?include=clusters&include=system_role","source":"be8b52d8c2f11558.txt","type":"text/plain","size":388},{"uid":"e8f96d4b71491ee7","name":"Screenshot: Click Continue button (success)","source":"e8f96d4b71491ee7.png","type":"image/png","size":158427}],"parameters":[],"stepsCount":0,"attachmentsCount":7,"shouldDisplayMessage":false,"hasContent":true,"attachmentStep":false},{"name":"Verify that Welcome new user page displayed","time":{"start":1756951593645,"stop":1756951594764,"duration":1119},"status":"passed","steps":[],"attachments":[{"uid":"da9b29b4d0e65be","name":"Page URL","source":"da9b29b4d0e65be.txt","type":"text/plain","size":44},{"uid":"daeb01d6ef7d0c11","name":"Screenshot: Verify that Welcome new user page displayed (success)","source":"daeb01d6ef7d0c11.png","type":"image/png","size":158427}],"parameters":[],"stepsCount":0,"attachmentsCount":2,"shouldDisplayMessage":false,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"ac66e424e75a0cea","name":"Page URL","source":"ac66e424e75a0cea.txt","type":"text/plain","size":33},{"uid":"d32a19cb246479e8","name":"Screenshot: Login via UI (success)","source":"d32a19cb246479e8.png","type":"image/png","size":158427}],"parameters":[],"stepsCount":5,"attachmentsCount":17,"shouldDisplayMessage":false,"hasContent":true,"attachmentStep":false},{"name":"Add organization via API and reload page","time":{"start":1756951594860,"stop":1756951611880,"duration":17020},"status":"passed","steps":[{"name":"Reload page","time":{"start":1756951604424,"stop":1756951611794,"duration":7370},"status":"passed","steps":[],"attachments":[{"uid":"5a5b4023e233c4bd","name":"Page URL","source":"5a5b4023e233c4bd.txt","type":"text/plain","size":44},{"uid":"4eb2b191b44a361a","name":"HTTP 200 - GET config","source":"4eb2b191b44a361a.txt","type":"text/plain","size":1118},{"uid":"6617756634f89d81","name":"HTTP 200 - GET permissions?uri=blob:","source":"6617756634f89d81.txt","type":"text/plain","size":236},{"uid":"dc667e1308d61669","name":"HTTP 200 - GET incoming","source":"dc667e1308d61669.txt","type":"text/plain","size":137},{"uid":"149924de91a13125","name":"HTTP 200 - GET regression-slakmuzlpr?include=orgs","source":"149924de91a13125.txt","type":"text/plain","size":455},{"uid":"46440d57edbc9c79","name":"HTTP 200 - GET regression-org-0lf5s3dcrfh7","source":"46440d57edbc9c79.txt","type":"text/plain","size":425},{"uid":"cba5b170eb239478","name":"HTTP 200 - GET regression-slakmuzlpr?include=clusters&include=system_role","source":"cba5b170eb239478.txt","type":"text/plain","size":510},{"uid":"dab158702b678d34","name":"Screenshot: Reload page (success)","source":"dab158702b678d34.png","type":"image/png","size":56405}],"parameters":[],"stepsCount":0,"attachmentsCount":8,"shouldDisplayMessage":false,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"e532eb910443ead2","name":"Page URL","source":"e532eb910443ead2.txt","type":"text/plain","size":44},{"uid":"8cb714bf2bdebc39","name":"Screenshot: Add organization via API and reload page (success)","source":"8cb714bf2bdebc39.png","type":"image/png","size":56405}],"parameters":[],"stepsCount":1,"attachmentsCount":10,"shouldDisplayMessage":false,"hasContent":true,"attachmentStep":false},{"name":"Login to apolo CLI with access token","time":{"start":1756951611880,"stop":1756951617245,"duration":5365},"status":"passed","steps":[],"attachments":[{"uid":"84a34d05a1805fba","name":"Executed CLI command","source":"84a34d05a1805fba.txt","type":"text/plain","size":1114},{"uid":"9ce6d67d5c68ccf3","name":"Executed CLI command output","source":"9ce6d67d5c68ccf3.txt","type":"text/plain","size":264}],"parameters":[],"stepsCount":0,"attachmentsCount":2,"shouldDisplayMessage":false,"hasContent":true,"attachmentStep":false},{"name":"Add new project via apolo CLI","time":{"start":1756951617245,"stop":1756951632250,"duration":15005},"status":"passed","steps":[],"attachments":[{"uid":"6f22350c8a199657","name":"Executed CLI command","source":"6f22350c8a199657.txt","type":"text/plain","size":114},{"uid":"4cf4902646610124","name":"Executed CLI command output","source":"4cf4902646610124.txt","type":"text/plain","size":304}],"parameters":[],"stepsCount":0,"attachmentsCount":2,"shouldDisplayMessage":false,"hasContent":true,"attachmentStep":false},{"name":"Get project users via CLI","time":{"start":1756951632250,"stop":1756951634940,"duration":2690},"status":"passed","steps":[],"attachments":[{"uid":"c68e00ca537baa54","name":"Executed CLI command","source":"c68e00ca537baa54.txt","type":"text/plain","size":98},{"uid":"fc4bb4090e796c48","name":"Executed CLI command output","source":"fc4bb4090e796c48.txt","type":"text/plain","size":768}],"parameters":[],"stepsCount":0,"attachmentsCount":2,"shouldDisplayMessage":false,"hasContent":true,"attachmentStep":false},{"name":"Verify user present in get-project-users output via CLI","time":{"start":1756951634940,"stop":1756951634941,"duration":1},"status":"passed","steps":[],"attachments":[{"uid":"fd9d8c1d194ef2de","name":"Executed CLI command","source":"fd9d8c1d194ef2de.txt","type":"text/plain","size":98},{"uid":"8ff5fc0dd369b799","name":"Executed CLI command output","source":"8ff5fc0dd369b799.txt","type":"text/plain","size":768}],"parameters":[],"stepsCount":0,"attachmentsCount":2,"shouldDisplayMessage":false,"hasContent":true,"attachmentStep":false},{"name":"Remove user from project via CLI","time":{"start":1756951634941,"stop":1756951638189,"duration":3248},"status":"failed","statusMessage":"AssertionError: [AssertionError] during step: Remove user from project via CLI\nMessage:  Expected: ERROR: Illegal argument(s) (Last project admin cannot be removed), got: You are using apolo-extras tool 24.10.0, however 25.8.0 is available.\nERROR: Illegal argument(s) (Last project admin cannot be removed)\n","statusTrace":"  File \"/home/runner/work/apolo-test-automation/apolo-test-automation/tests/reporting_hooks/reporting.py\", line 58, in wrapper\n    raise AssertionError(formatted_msg) from e\n","steps":[],"attachments":[{"uid":"629d9d6f61cff52b","name":"Executed CLI command","source":"629d9d6f61cff52b.txt","type":"text/plain","size":122},{"uid":"fc2f73f654e7f929","name":"Executed CLI command output","source":"fc2f73f654e7f929.txt","type":"text/plain","size":135}],"parameters":[],"stepsCount":0,"attachmentsCount":2,"shouldDisplayMessage":true,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"d9b879735aecfba1","name":"log","source":"d9b879735aecfba1.txt","type":"text/plain","size":39249}],"parameters":[],"stepsCount":13,"attachmentsCount":38,"shouldDisplayMessage":true,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"add_page_manager::finalizer","time":{"start":1756951638211,"stop":1756951638211,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"attachmentStep":false},{"name":"setup_cleanup::finalizer","time":{"start":1756951638211,"stop":1756951648828,"duration":10617},"status":"passed","steps":[{"name":"Post-test cleanup","time":{"start":1756951638211,"stop":1756951648828,"duration":10617},"status":"passed","steps":[{"name":"Delete organisation: regression-org-0lf5s3dcrfh7","time":{"start":1756951642958,"stop":1756951648794,"duration":5836},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"stepsCount":1,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"stepsCount":2,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":true,"attachmentStep":false},{"name":"api_helper::finalizer","time":{"start":1756951648828,"stop":1756951648829,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"attachmentStep":false},{"name":"_function_scoped_runner::0","time":{"start":1756951648830,"stop":1756951648830,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"suite","value":"CLI Project Remove Members"},{"name":"parentSuite","value":"CLI Tests"},{"name":"tag","value":"asyncio"},{"name":"subSuite","value":"TestCLIProjectStructureSetup"},{"name":"host","value":"pkrvm7jw40e0xgp"},{"name":"thread","value":"6005-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_cases.tests_cli.test_project_remove_members"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":true,"retry":true,"extra":{"categories":[],"tags":["asyncio"]},"source":"eb21125c8fd8479b.json","parameterValues":[]}