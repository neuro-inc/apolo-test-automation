{"uid":"cf9f052971e8333d","name":"Admin create first disk via CLI","fullName":"tests.test_cases.tests_cli.test_disks.TestCLIDisks#test_admin_create_first_disk_cli","historyId":"de4dde504b2f3f9c84ded3a7a503cb06","time":{"start":1761067284120,"stop":1761067327522,"duration":43402},"description":"\n- Login with valid credentials via **UI**.\n- Get Bearer auth token from Playwright local storage.\n- Create new organization via **API**.\n- Create new project via **API**.\n- Login with Bearer auth token via **CLI**.\n\n### Verify that:\n\n- User can create disk via **CLI**.\n","descriptionHtml":"<div style='line-height:1.6;'><ul>\n<li>Login with valid credentials via <strong>UI</strong>.</li>\n<li>Get Bearer auth token from Playwright local storage.</li>\n<li>Create new organization via <strong>API</strong>.</li>\n<li>Create new project via <strong>API</strong>.</li>\n<li>Login with Bearer auth token via <strong>CLI</strong>.</li>\n</ul>\n<h3>Verify that:</h3>\n<ul>\n<li>User can create disk via <strong>CLI</strong>.</li>\n</ul></div>","status":"failed","statusMessage":"AssertionError: [AssertionError] during step: Add new project via apolo CLI\nMessage: ERROR: Not enough permissions ({\"missing\": [{\"uri\": \"cluster://default/orgs/regression-org-47vmheb7igrc/add-project\", \"action\": \"write\"}]})","statusTrace":"tests/reporting_hooks/reporting.py:49: in wrapper\n    result = await func(*args, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^\ntests/test_cases/steps/cli_steps/comonent_steps_impl/admin_steps.py:58: in cli_add_new_project\n    assert result, error_message\n           ^^^^^^\nE   AssertionError: ERROR: Not enough permissions ({\"missing\": [{\"uri\": \"cluster://default/orgs/regression-org-47vmheb7igrc/add-project\", \"action\": \"write\"}]})\n\nThe above exception was the direct cause of the following exception:\ntests/test_cases/tests_cli/test_disks.py:74: in test_admin_create_first_disk_cli\n    await self._cli_steps.admin.cli_add_new_project(\ntests/reporting_hooks/reporting.py:58: in wrapper\n    raise AssertionError(formatted_msg) from e\nE   AssertionError: [AssertionError] during step: Add new project via apolo CLI\nE   Message: ERROR: Not enough permissions ({\"missing\": [{\"uri\": \"cluster://default/orgs/regression-org-47vmheb7igrc/add-project\", \"action\": \"write\"}]})","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"base_url","time":{"start":1761049876290,"stop":1761049876290,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_verify_url","time":{"start":1761049876291,"stop":1761049876291,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"pytestconfig","time":{"start":1761049876291,"stop":1761049876291,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delay_worker_start","time":{"start":1761049876291,"stop":1761049906292,"duration":30001},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop_policy","time":{"start":1761049876291,"stop":1761049876291,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_output_dir","time":{"start":1761049876291,"stop":1761049876291,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ensure_storage_directories","time":{"start":1761049906292,"stop":1761049906292,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_config","time":{"start":1761067223172,"stop":1761067223175,"duration":3},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"page_manager","time":{"start":1761067223175,"stop":1761067283584,"duration":60409},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_function_scoped_runner","time":{"start":1761067223175,"stop":1761067223175,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"data_manager","time":{"start":1761067283584,"stop":1761067283584,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"apolo_cli","time":{"start":1761067283585,"stop":1761067283585,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"users_manager","time":{"start":1761067283585,"stop":1761067283585,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_cleanup","time":{"start":1761067283585,"stop":1761067283587,"duration":2},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"api_helper","time":{"start":1761067283585,"stop":1761067283585,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup","time":{"start":1761067283587,"stop":1761067284119,"duration":532},"status":"passed","steps":[{"name":"Verify Apolo CLI client is installed","time":{"start":1761067283587,"stop":1761067284119,"duration":532},"status":"passed","steps":[],"attachments":[{"uid":"fb5953041c41c161","name":"Executed CLI command","source":"fb5953041c41c161.txt","type":"text/plain","size":15},{"uid":"e81697882b0bd4c7","name":"Executed CLI command output","source":"e81697882b0bd4c7.txt","type":"text/plain","size":28}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"add_page_manager","time":{"start":1761067283587,"stop":1761067283587,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_inject_fixtures","time":{"start":1761067283587,"stop":1761067283587,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"\n- Login with valid credentials via **UI**.\n- Get Bearer auth token from Playwright local storage.\n- Create new organization via **API**.\n- Create new project via **API**.\n- Login with Bearer auth token via **CLI**.\n\n### Verify that:\n\n- User can create disk via **CLI**.\n","descriptionHtml":"<div style='line-height:1.6;'><ul>\n<li>Login with valid credentials via <strong>UI</strong>.</li>\n<li>Get Bearer auth token from Playwright local storage.</li>\n<li>Create new organization via <strong>API</strong>.</li>\n<li>Create new project via <strong>API</strong>.</li>\n<li>Login with Bearer auth token via <strong>CLI</strong>.</li>\n</ul>\n<h3>Verify that:</h3>\n<ul>\n<li>User can create disk via <strong>CLI</strong>.</li>\n</ul></div>","status":"failed","statusMessage":"AssertionError: [AssertionError] during step: Add new project via apolo CLI\nMessage: ERROR: Not enough permissions ({\"missing\": [{\"uri\": \"cluster://default/orgs/regression-org-47vmheb7igrc/add-project\", \"action\": \"write\"}]})","statusTrace":"tests/reporting_hooks/reporting.py:49: in wrapper\n    result = await func(*args, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^\ntests/test_cases/steps/cli_steps/comonent_steps_impl/admin_steps.py:58: in cli_add_new_project\n    assert result, error_message\n           ^^^^^^\nE   AssertionError: ERROR: Not enough permissions ({\"missing\": [{\"uri\": \"cluster://default/orgs/regression-org-47vmheb7igrc/add-project\", \"action\": \"write\"}]})\n\nThe above exception was the direct cause of the following exception:\ntests/test_cases/tests_cli/test_disks.py:74: in test_admin_create_first_disk_cli\n    await self._cli_steps.admin.cli_add_new_project(\ntests/reporting_hooks/reporting.py:58: in wrapper\n    raise AssertionError(formatted_msg) from e\nE   AssertionError: [AssertionError] during step: Add new project via apolo CLI\nE   Message: ERROR: Not enough permissions ({\"missing\": [{\"uri\": \"cluster://default/orgs/regression-org-47vmheb7igrc/add-project\", \"action\": \"write\"}]})","steps":[{"name":"Login via UI","time":{"start":1761067284120,"stop":1761067298500,"duration":14380},"status":"passed","steps":[{"name":"Click login button","time":{"start":1761067284120,"stop":1761067294110,"duration":9990},"status":"passed","steps":[],"attachments":[{"uid":"5cb929edd7f5797f","name":"Page URL","source":"5cb929edd7f5797f.txt","type":"text/plain","size":11},{"uid":"5a8b04132cf17257","name":"HTTP 200 - GET config","source":"5a8b04132cf17257.txt","type":"text/plain","size":673},{"uid":"df2de393ad4b794d","name":"Screenshot: Click login button (success)","source":"df2de393ad4b794d.png","type":"image/png","size":41537}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":3,"hasContent":true,"attachmentStep":false},{"name":"Enter email","time":{"start":1761067294110,"stop":1761067294451,"duration":341},"status":"passed","steps":[],"attachments":[{"uid":"bdaa1329ec4bf950","name":"Page URL","source":"bdaa1329ec4bf950.txt","type":"text/plain","size":215},{"uid":"6c5cd2292547546","name":"Screenshot: Enter email (success)","source":"6c5cd2292547546.png","type":"image/png","size":46188}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Enter password","time":{"start":1761067294451,"stop":1761067294800,"duration":349},"status":"passed","steps":[],"attachments":[{"uid":"b758c0b8b24e8738","name":"Page URL","source":"b758c0b8b24e8738.txt","type":"text/plain","size":215},{"uid":"34976d75e3a8f3e8","name":"Screenshot: Enter password (success)","source":"34976d75e3a8f3e8.png","type":"image/png","size":46322}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Click Continue button","time":{"start":1761067294801,"stop":1761067297302,"duration":2501},"status":"passed","steps":[],"attachments":[{"uid":"ef0744cbc9d240f2","name":"Page URL","source":"ef0744cbc9d240f2.txt","type":"text/plain","size":215},{"uid":"47026320fa1ae05d","name":"HTTP 200 - GET config","source":"47026320fa1ae05d.txt","type":"text/plain","size":771},{"uid":"c557aacfcc9bf294","name":"HTTP 200 - GET regression-4no9dzr6zb?include=clusters&include=system_role","source":"c557aacfcc9bf294.txt","type":"text/plain","size":407},{"uid":"debe1e53961e38ea","name":"HTTP 200 - GET permissions?uri=blob:","source":"debe1e53961e38ea.txt","type":"text/plain","size":182},{"uid":"f56f46c6ce3a0a6d","name":"HTTP 200 - GET incoming","source":"f56f46c6ce3a0a6d.txt","type":"text/plain","size":156},{"uid":"eb8d172414d1ed","name":"HTTP 200 - GET regression-4no9dzr6zb?include=orgs","source":"eb8d172414d1ed.txt","type":"text/plain","size":379},{"uid":"2d40089d50a6dc04","name":"Screenshot: Click Continue button (success)","source":"2d40089d50a6dc04.png","type":"image/png","size":160513}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":7,"hasContent":true,"attachmentStep":false},{"name":"Verify that Welcome new user page displayed","time":{"start":1761067297313,"stop":1761067298415,"duration":1102},"status":"passed","steps":[],"attachments":[{"uid":"19288070f56cbad1","name":"Page URL","source":"19288070f56cbad1.txt","type":"text/plain","size":44},{"uid":"8b1bcbb7d706e378","name":"Screenshot: Verify that Welcome new user page displayed (success)","source":"8b1bcbb7d706e378.png","type":"image/png","size":160513}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"6cc17f0847567d31","name":"Page URL","source":"6cc17f0847567d31.txt","type":"text/plain","size":11},{"uid":"9274e2b54a58ec","name":"Screenshot: Login via UI (success)","source":"9274e2b54a58ec.png","type":"image/png","size":160513}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":5,"attachmentsCount":18,"hasContent":true,"attachmentStep":false},{"name":"Add organization via API and reload page","time":{"start":1761067298500,"stop":1761067325884,"duration":27384},"status":"passed","steps":[{"name":"Reload page","time":{"start":1761067318616,"stop":1761067325801,"duration":7185},"status":"passed","steps":[],"attachments":[{"uid":"b8609ee38ab52caa","name":"Page URL","source":"b8609ee38ab52caa.txt","type":"text/plain","size":44},{"uid":"5329307dda6f6aef","name":"HTTP 200 - GET config","source":"5329307dda6f6aef.txt","type":"text/plain","size":2137},{"uid":"37433053c45b967a","name":"HTTP 200 - GET permissions?uri=blob:","source":"37433053c45b967a.txt","type":"text/plain","size":255},{"uid":"b3c7463ec50f45af","name":"HTTP 200 - GET regression-org-47vmheb7igrc","source":"b3c7463ec50f45af.txt","type":"text/plain","size":444},{"uid":"d8e6fb259ede0d39","name":"HTTP 200 - GET regression-4no9dzr6zb?include=orgs","source":"d8e6fb259ede0d39.txt","type":"text/plain","size":474},{"uid":"59e9c5e573febac9","name":"HTTP 200 - GET incoming","source":"59e9c5e573febac9.txt","type":"text/plain","size":156},{"uid":"917f18f9f125c151","name":"HTTP 200 - GET regression-4no9dzr6zb?include=clusters&include=system_role","source":"917f18f9f125c151.txt","type":"text/plain","size":529},{"uid":"76729522137e5933","name":"HTTP 200 - GET tags","source":"76729522137e5933.txt","type":"text/plain","size":867},{"uid":"13927022ddd21997","name":"Screenshot: Reload page (success)","source":"13927022ddd21997.png","type":"image/png","size":56920}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":9,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"89501ac3da2905c4","name":"Page URL","source":"89501ac3da2905c4.txt","type":"text/plain","size":44},{"uid":"99cb5d669cd34849","name":"Screenshot: Add organization via API and reload page (success)","source":"99cb5d669cd34849.png","type":"image/png","size":56920}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":11,"hasContent":true,"attachmentStep":false},{"name":"Login to apolo CLI with access token","time":{"start":1761067325885,"stop":1761067326739,"duration":854},"status":"passed","steps":[],"attachments":[{"uid":"bbd0506e94c00d2b","name":"Executed CLI command","source":"bbd0506e94c00d2b.txt","type":"text/plain","size":1114},{"uid":"3b866acb23121f43","name":"Executed CLI command output","source":"3b866acb23121f43.txt","type":"text/plain","size":264}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Add new project via apolo CLI","time":{"start":1761067326739,"stop":1761067327521,"duration":782},"status":"failed","statusMessage":"AssertionError: [AssertionError] during step: Add new project via apolo CLI\nMessage: ERROR: Not enough permissions ({\"missing\": [{\"uri\": \"cluster://default/orgs/regression-org-47vmheb7igrc/add-project\", \"action\": \"write\"}]})\n","statusTrace":"  File \"/home/runner/work/apolo-test-automation/apolo-test-automation/tests/reporting_hooks/reporting.py\", line 58, in wrapper\n    raise AssertionError(formatted_msg) from e\n","steps":[],"attachments":[{"uid":"b6735dbeb4dcd4f8","name":"Executed CLI command","source":"b6735dbeb4dcd4f8.txt","type":"text/plain","size":114},{"uid":"70c4d16b28f6fe97","name":"Executed CLI command output","source":"70c4d16b28f6fe97.txt","type":"text/plain","size":139}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"c2227b88ac32a59","name":"log","source":"c2227b88ac32a59.txt","type":"text/plain","size":19367}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":10,"attachmentsCount":34,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"add_page_manager::finalizer","time":{"start":1761067327537,"stop":1761067327537,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_cleanup::finalizer","time":{"start":1761067327537,"stop":1761067327537,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_cleanup::finalizer","time":{"start":1761067327537,"stop":1761067331258,"duration":3721},"status":"passed","steps":[{"name":"Post-test cleanup","time":{"start":1761067327537,"stop":1761067331258,"duration":3721},"status":"passed","steps":[{"name":"Delete organisation: regression-org-47vmheb7igrc","time":{"start":1761067330781,"stop":1761067331207,"duration":426},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"api_helper::finalizer","time":{"start":1761067331259,"stop":1761067331259,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_function_scoped_runner::0","time":{"start":1761067331260,"stop":1761067331261,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"parentSuite","value":"CLI Tests"},{"name":"suite","value":"CLI Disks"},{"name":"tag","value":"asyncio"},{"name":"subSuite","value":"TestCLIDisks"},{"name":"host","value":"runnervmwhb2z"},{"name":"thread","value":"3578-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_cases.tests_cli.test_disks"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":true,"retry":true,"extra":{"categories":[],"tags":["asyncio"]},"source":"cf9f052971e8333d.json","parameterValues":[]}