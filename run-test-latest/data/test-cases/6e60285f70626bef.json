{"uid":"6e60285f70626bef","name":"Invite user to org via CLI","fullName":"tests.test_cases.tests_cli.test_organization_structure_setup.TestCLIOrganizationStructureSetup#test_invite_user_to_org_cli","historyId":"aeb71106684a233241baa8027553df85","time":{"start":1767838300561,"stop":1767838333953,"duration":33392},"description":"\n- Login with valid credentials via **UI**.\n- Get Bearer auth token from Playwright local storage.\n- Signup `second` user via **UI**.\n- Login with Bearer auth token via **CLI**.\n- Create first organization via **CLI**.\n\n### Verify that:\n\n- User can invite registered user to organization via **CLI**.\n","descriptionHtml":"<div style='line-height:1.6;'><ul>\n<li>Login with valid credentials via <strong>UI</strong>.</li>\n<li>Get Bearer auth token from Playwright local storage.</li>\n<li>Signup <span style='background-color:#D3D3D3; padding:2px 4px; border-radius:3px; font-family:monospace;'>second</span> user via <strong>UI</strong>.</li>\n<li>Login with Bearer auth token via <strong>CLI</strong>.</li>\n<li>Create first organization via <strong>CLI</strong>.</li>\n</ul>\n<h3>Verify that:</h3>\n<ul>\n<li>User can invite registered user to organization via <strong>CLI</strong>.</li>\n</ul></div>","status":"failed","statusMessage":"AssertionError: [AssertionError] during step: Login to apolo CLI with access token\nMessage: ERROR: No clusters configured","statusTrace":"tests/reporting_hooks/reporting.py:49: in wrapper\n    result = await func(*args, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^\ntests/test_cases/steps/cli_steps/comonent_steps_impl/config_steps.py:26: in cli_login_with_token\n    assert result, error_message\n           ^^^^^^\nE   AssertionError: ERROR: No clusters configured\n\nThe above exception was the direct cause of the following exception:\ntests/test_cases/tests_cli/test_organization_structure_setup.py:174: in test_invite_user_to_org_cli\n    await self._cli_steps.config.cli_login_with_token(token=user.token)\ntests/reporting_hooks/reporting.py:58: in wrapper\n    raise AssertionError(formatted_msg) from e\nE   AssertionError: [AssertionError] during step: Login to apolo CLI with access token\nE   Message: ERROR: No clusters configured","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"test_config","time":{"start":1767838299376,"stop":1767838299379,"duration":3},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_function_scoped_runner","time":{"start":1767838299379,"stop":1767838299379,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"page_manager","time":{"start":1767838299379,"stop":1767838300054,"duration":675},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"users_manager","time":{"start":1767838300054,"stop":1767838300054,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"api_helper","time":{"start":1767838300054,"stop":1767838300055,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"data_manager","time":{"start":1767838300054,"stop":1767838300054,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"apolo_cli","time":{"start":1767838300055,"stop":1767838300055,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_cleanup","time":{"start":1767838300055,"stop":1767838300056,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"add_page_manager","time":{"start":1767838300056,"stop":1767838300056,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup","time":{"start":1767838300057,"stop":1767838300560,"duration":503},"status":"passed","steps":[{"name":"Verify Apolo CLI client is installed","time":{"start":1767838300057,"stop":1767838300560,"duration":503},"status":"passed","steps":[],"attachments":[{"uid":"f12db62c62f90553","name":"HTTP 200 - GET config","source":"f12db62c62f90553.txt","type":"text/plain","size":673},{"uid":"f248848af3d95ed8","name":"Executed CLI command","source":"f248848af3d95ed8.txt","type":"text/plain","size":15},{"uid":"77edbc78e766d316","name":"Executed CLI command output","source":"77edbc78e766d316.txt","type":"text/plain","size":28}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":3,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":3,"hasContent":true,"attachmentStep":false},{"name":"_inject_fixtures","time":{"start":1767838300057,"stop":1767838300057,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"\n- Login with valid credentials via **UI**.\n- Get Bearer auth token from Playwright local storage.\n- Signup `second` user via **UI**.\n- Login with Bearer auth token via **CLI**.\n- Create first organization via **CLI**.\n\n### Verify that:\n\n- User can invite registered user to organization via **CLI**.\n","descriptionHtml":"<div style='line-height:1.6;'><ul>\n<li>Login with valid credentials via <strong>UI</strong>.</li>\n<li>Get Bearer auth token from Playwright local storage.</li>\n<li>Signup <span style='background-color:#D3D3D3; padding:2px 4px; border-radius:3px; font-family:monospace;'>second</span> user via <strong>UI</strong>.</li>\n<li>Login with Bearer auth token via <strong>CLI</strong>.</li>\n<li>Create first organization via <strong>CLI</strong>.</li>\n</ul>\n<h3>Verify that:</h3>\n<ul>\n<li>User can invite registered user to organization via <strong>CLI</strong>.</li>\n</ul></div>","status":"failed","statusMessage":"AssertionError: [AssertionError] during step: Login to apolo CLI with access token\nMessage: ERROR: No clusters configured","statusTrace":"tests/reporting_hooks/reporting.py:49: in wrapper\n    result = await func(*args, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^\ntests/test_cases/steps/cli_steps/comonent_steps_impl/config_steps.py:26: in cli_login_with_token\n    assert result, error_message\n           ^^^^^^\nE   AssertionError: ERROR: No clusters configured\n\nThe above exception was the direct cause of the following exception:\ntests/test_cases/tests_cli/test_organization_structure_setup.py:174: in test_invite_user_to_org_cli\n    await self._cli_steps.config.cli_login_with_token(token=user.token)\ntests/reporting_hooks/reporting.py:58: in wrapper\n    raise AssertionError(formatted_msg) from e\nE   AssertionError: [AssertionError] during step: Login to apolo CLI with access token\nE   Message: ERROR: No clusters configured","steps":[{"name":"Login via UI","time":{"start":1767838300562,"stop":1767838315791,"duration":15229},"status":"passed","steps":[{"name":"Verify that Auth page displayed","time":{"start":1767838300562,"stop":1767838300663,"duration":101},"status":"passed","steps":[],"attachments":[{"uid":"223a4fb490181e4d","name":"Page URL","source":"223a4fb490181e4d.txt","type":"text/plain","size":33},{"uid":"f781d06b97d7836d","name":"Screenshot: Verify that Auth page displayed (success)","source":"f781d06b97d7836d.png","type":"image/png","size":88563}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Click login button","time":{"start":1767838300663,"stop":1767838301724,"duration":1061},"status":"passed","steps":[],"attachments":[{"uid":"8b21cf6c6f02a951","name":"Page URL","source":"8b21cf6c6f02a951.txt","type":"text/plain","size":33},{"uid":"19c20e10e08d59bd","name":"Screenshot: Click login button (success)","source":"19c20e10e08d59bd.png","type":"image/png","size":41524}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Verify that Login page displayed","time":{"start":1767838301724,"stop":1767838301803,"duration":79},"status":"passed","steps":[],"attachments":[{"uid":"78550035e0bce0aa","name":"Page URL","source":"78550035e0bce0aa.txt","type":"text/plain","size":215},{"uid":"579f790aa3961f4","name":"Screenshot: Verify that Login page displayed (success)","source":"579f790aa3961f4.png","type":"image/png","size":41524}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Enter email","time":{"start":1767838301803,"stop":1767838302108,"duration":305},"status":"passed","steps":[],"attachments":[{"uid":"e1a2caf72fbffb37","name":"Page URL","source":"e1a2caf72fbffb37.txt","type":"text/plain","size":215},{"uid":"54efcfd0a73d19ee","name":"Screenshot: Enter email (success)","source":"54efcfd0a73d19ee.png","type":"image/png","size":45248}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Enter password","time":{"start":1767838302108,"stop":1767838302425,"duration":317},"status":"passed","steps":[],"attachments":[{"uid":"629b4012b7db5e6b","name":"Page URL","source":"629b4012b7db5e6b.txt","type":"text/plain","size":215},{"uid":"e5666873eaef8c72","name":"Screenshot: Enter password (success)","source":"e5666873eaef8c72.png","type":"image/png","size":45409}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Click Continue button","time":{"start":1767838302425,"stop":1767838314612,"duration":12187},"status":"passed","steps":[],"attachments":[{"uid":"bbc58b8c971fa095","name":"Page URL","source":"bbc58b8c971fa095.txt","type":"text/plain","size":215},{"uid":"e3f16fd1f46e65a2","name":"HTTP 200 - GET config","source":"e3f16fd1f46e65a2.txt","type":"text/plain","size":832},{"uid":"b613e78951c8ca4d","name":"HTTP 200 - GET permissions?uri=blob:","source":"b613e78951c8ca4d.txt","type":"text/plain","size":182},{"uid":"c7eee0bb9a8b2c96","name":"HTTP 200 - GET incoming","source":"c7eee0bb9a8b2c96.txt","type":"text/plain","size":156},{"uid":"e5e4836708da1746","name":"HTTP 200 - GET regression-zokdt77o7j?include=orgs","source":"e5e4836708da1746.txt","type":"text/plain","size":379},{"uid":"36414d0bb1d5365e","name":"HTTP 200 - GET regression-zokdt77o7j?include=clusters&include=system_role","source":"36414d0bb1d5365e.txt","type":"text/plain","size":407},{"uid":"c6cd6d8ac23cc611","name":"Screenshot: Click Continue button (success)","source":"c6cd6d8ac23cc611.png","type":"image/png","size":159419}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":7,"hasContent":true,"attachmentStep":false},{"name":"Verify that Welcome new user page displayed","time":{"start":1767838314621,"stop":1767838315706,"duration":1085},"status":"passed","steps":[],"attachments":[{"uid":"2bc153818ffe6045","name":"Page URL","source":"2bc153818ffe6045.txt","type":"text/plain","size":44},{"uid":"99e4d4f664f209cc","name":"Screenshot: Verify that Welcome new user page displayed (success)","source":"99e4d4f664f209cc.png","type":"image/png","size":159419}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"f8f1f6cefdfb0387","name":"Page URL","source":"f8f1f6cefdfb0387.txt","type":"text/plain","size":33},{"uid":"1372a8507da563af","name":"Screenshot: Login via UI (success)","source":"1372a8507da563af.png","type":"image/png","size":159419}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":7,"attachmentsCount":21,"hasContent":true,"attachmentStep":false},{"name":"<<User2>> :: Get second user","time":{"start":1767838316491,"stop":1767838316582,"duration":91},"status":"passed","steps":[],"attachments":[{"uid":"d41efeb40fc5082d","name":"Page URL","source":"d41efeb40fc5082d.txt","type":"text/plain","size":29},{"uid":"920a97c5b6ca1f09","name":"Screenshot: <<User2>> :: Get second user (success)","source":"920a97c5b6ca1f09.png","type":"image/png","size":11162}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"<<User2>> :: Login via UI","time":{"start":1767838316582,"stop":1767838332538,"duration":15956},"status":"passed","steps":[{"name":"<<User2>> :: Verify that Auth page displayed","time":{"start":1767838316583,"stop":1767838317026,"duration":443},"status":"passed","steps":[],"attachments":[{"uid":"168cf8e93a7daab5","name":"Page URL","source":"168cf8e93a7daab5.txt","type":"text/plain","size":29},{"uid":"1358ed887a6f756f","name":"HTTP 200 - GET config","source":"1358ed887a6f756f.txt","type":"text/plain","size":673},{"uid":"9453841f7e46b7af","name":"Screenshot: <<User2>> :: Verify that Auth page displayed (success)","source":"9453841f7e46b7af.png","type":"image/png","size":88563}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":3,"hasContent":true,"attachmentStep":false},{"name":"<<User2>> :: Click login button","time":{"start":1767838317026,"stop":1767838318240,"duration":1214},"status":"passed","steps":[],"attachments":[{"uid":"9dff633073004f1e","name":"Page URL","source":"9dff633073004f1e.txt","type":"text/plain","size":33},{"uid":"34bd62bb09425697","name":"Screenshot: <<User2>> :: Click login button (success)","source":"34bd62bb09425697.png","type":"image/png","size":41947}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"<<User2>> :: Verify that Login page displayed","time":{"start":1767838318240,"stop":1767838318322,"duration":82},"status":"passed","steps":[],"attachments":[{"uid":"1b7fa9278e6688b3","name":"Page URL","source":"1b7fa9278e6688b3.txt","type":"text/plain","size":215},{"uid":"a7af8fedc9f2b13c","name":"Screenshot: <<User2>> :: Verify that Login page displayed (success)","source":"a7af8fedc9f2b13c.png","type":"image/png","size":41706}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"<<User2>> :: Enter email","time":{"start":1767838318322,"stop":1767838318641,"duration":319},"status":"passed","steps":[],"attachments":[{"uid":"9a790bf05dab4d76","name":"Page URL","source":"9a790bf05dab4d76.txt","type":"text/plain","size":215},{"uid":"4657a9b348d432c8","name":"Screenshot: <<User2>> :: Enter email (success)","source":"4657a9b348d432c8.png","type":"image/png","size":45963}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"<<User2>> :: Enter password","time":{"start":1767838318641,"stop":1767838318955,"duration":314},"status":"passed","steps":[],"attachments":[{"uid":"86e0b8c45dbd82f5","name":"Page URL","source":"86e0b8c45dbd82f5.txt","type":"text/plain","size":215},{"uid":"e5da818228141438","name":"Screenshot: <<User2>> :: Enter password (success)","source":"e5da818228141438.png","type":"image/png","size":46088}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"<<User2>> :: Click Continue button","time":{"start":1767838318956,"stop":1767838331377,"duration":12421},"status":"passed","steps":[],"attachments":[{"uid":"e7f14fa56458b13f","name":"Page URL","source":"e7f14fa56458b13f.txt","type":"text/plain","size":215},{"uid":"fa23c2ba722c0111","name":"HTTP 200 - GET config","source":"fa23c2ba722c0111.txt","type":"text/plain","size":832},{"uid":"f9e4921cb484979d","name":"HTTP 200 - GET permissions?uri=blob:","source":"f9e4921cb484979d.txt","type":"text/plain","size":182},{"uid":"c4394982b7a31aba","name":"HTTP 200 - GET incoming","source":"c4394982b7a31aba.txt","type":"text/plain","size":156},{"uid":"abe4ff115b21153a","name":"HTTP 200 - GET regression-sxnlyrbdmy?include=clusters&include=system_role","source":"abe4ff115b21153a.txt","type":"text/plain","size":407},{"uid":"abf4330479f7d356","name":"HTTP 200 - GET regression-sxnlyrbdmy?include=orgs","source":"abf4330479f7d356.txt","type":"text/plain","size":379},{"uid":"645cf80f2b1beafd","name":"Screenshot: <<User2>> :: Click Continue button (success)","source":"645cf80f2b1beafd.png","type":"image/png","size":159381}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":7,"hasContent":true,"attachmentStep":false},{"name":"<<User2>> :: Verify that Welcome new user page displayed","time":{"start":1767838331384,"stop":1767838332470,"duration":1086},"status":"passed","steps":[],"attachments":[{"uid":"b73ec75862a0c598","name":"Page URL","source":"b73ec75862a0c598.txt","type":"text/plain","size":44},{"uid":"301998ca5e71ebf4","name":"Screenshot: <<User2>> :: Verify that Welcome new user page displayed (success)","source":"301998ca5e71ebf4.png","type":"image/png","size":159381}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"85d7c06358557db6","name":"Page URL","source":"85d7c06358557db6.txt","type":"text/plain","size":29},{"uid":"9b462b28fe54e259","name":"Screenshot: <<User2>> :: Login via UI (success)","source":"9b462b28fe54e259.png","type":"image/png","size":159381}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":7,"attachmentsCount":22,"hasContent":true,"attachmentStep":false},{"name":"Login to apolo CLI with access token","time":{"start":1767838332538,"stop":1767838333953,"duration":1415},"status":"failed","statusMessage":"AssertionError: [AssertionError] during step: Login to apolo CLI with access token\nMessage: ERROR: No clusters configured\n","statusTrace":"  File \"/home/runner/work/apolo-test-automation/apolo-test-automation/tests/reporting_hooks/reporting.py\", line 58, in wrapper\n    raise AssertionError(formatted_msg) from e\n","steps":[],"attachments":[{"uid":"5f9b067cd2a69b08","name":"Executed CLI command","source":"5f9b067cd2a69b08.txt","type":"text/plain","size":1114},{"uid":"a8a5982c7b853e44","name":"Executed CLI command output","source":"a8a5982c7b853e44.txt","type":"text/plain","size":29}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"454c6da6a6a77c79","name":"log","source":"454c6da6a6a77c79.txt","type":"text/plain","size":18849}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":18,"attachmentsCount":48,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"add_page_manager::finalizer","time":{"start":1767838333965,"stop":1767838333965,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_cleanup::finalizer","time":{"start":1767838333965,"stop":1767838333965,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_cleanup::finalizer","time":{"start":1767838333965,"stop":1767838337263,"duration":3298},"status":"passed","steps":[{"name":"Post-test cleanup","time":{"start":1767838333965,"stop":1767838337263,"duration":3298},"status":"passed","steps":[],"attachments":[{"uid":"fb118986349955fa","name":"Cleanup note","source":"fb118986349955fa.txt","type":"text/plain","size":29}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},{"name":"api_helper::finalizer","time":{"start":1767838337264,"stop":1767838337264,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_function_scoped_runner::0","time":{"start":1767838337265,"stop":1767838337265,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"parentSuite","value":"CLI Tests"},{"name":"suite","value":"CLI Organization Structure Setup"},{"name":"tag","value":"asyncio"},{"name":"subSuite","value":"TestCLIOrganizationStructureSetup"},{"name":"host","value":"runnervmh13bl"},{"name":"thread","value":"3019-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_cases.tests_cli.test_organization_structure_setup"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":true,"retry":true,"extra":{"categories":[],"tags":["asyncio"]},"source":"6e60285f70626bef.json","parameterValues":[]}