{"uid":"20e7b8f44bbedb6b","name":"User switch organization via CLI","fullName":"tests.test_cases.tests_cli.test_organization_structure_setup.TestCLIOrganizationStructureSetup#test_switch_org_cli","historyId":"6d9a96c974d0ffc10b372ad7c4a9cdc5","time":{"start":1758106140175,"stop":1758106182438,"duration":42263},"description":"\n- Login with valid credentials via **UI**.\n- Get Bearer auth token from Playwright local storage.\n- Login with Bearer auth token via **CLI**.\n- Create first organization via **CLI**.\n- Create second organization via **CLI**.\n\n### Verify that:\n\n- User can switch between organizations via **CLI**.\n","descriptionHtml":"<div style='line-height:1.6;'><ul>\n<li>Login with valid credentials via <strong>UI</strong>.</li>\n<li>Get Bearer auth token from Playwright local storage.</li>\n<li>Login with Bearer auth token via <strong>CLI</strong>.</li>\n<li>Create first organization via <strong>CLI</strong>.</li>\n<li>Create second organization via <strong>CLI</strong>.</li>\n</ul>\n<h3>Verify that:</h3>\n<ul>\n<li>User can switch between organizations via <strong>CLI</strong>.</li>\n</ul></div>","status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"delete_output_dir","time":{"start":1758102806618,"stop":1758102806618,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_verify_url","time":{"start":1758102806618,"stop":1758102806618,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop_policy","time":{"start":1758102806618,"stop":1758102806618,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delay_worker_start","time":{"start":1758102806618,"stop":1758102821619,"duration":15001},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"base_url","time":{"start":1758102806618,"stop":1758102806618,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"pytestconfig","time":{"start":1758102806618,"stop":1758102806618,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ensure_storage_directories","time":{"start":1758102821619,"stop":1758102821619,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_config","time":{"start":1758106137621,"stop":1758106137624,"duration":3},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_function_scoped_runner","time":{"start":1758106137624,"stop":1758106137624,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"page_manager","time":{"start":1758106137624,"stop":1758106139632,"duration":2008},"status":"passed","steps":[],"attachments":[{"uid":"fb7b9b6f9eebfd5e","name":"HTTP 200 - GET config","source":"fb7b9b6f9eebfd5e.txt","type":"text/plain","size":654}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},{"name":"apolo_cli","time":{"start":1758106139633,"stop":1758106139634,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"users_manager","time":{"start":1758106139633,"stop":1758106139633,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"api_helper","time":{"start":1758106139633,"stop":1758106139633,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"data_manager","time":{"start":1758106139633,"stop":1758106139633,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"add_page_manager","time":{"start":1758106139634,"stop":1758106139634,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_inject_fixtures","time":{"start":1758106139634,"stop":1758106139635,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_cleanup","time":{"start":1758106139634,"stop":1758106139634,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup","time":{"start":1758106139635,"stop":1758106140174,"duration":539},"status":"passed","steps":[{"name":"Verify Apolo CLI client is installed","time":{"start":1758106139635,"stop":1758106140174,"duration":539},"status":"passed","steps":[],"attachments":[{"uid":"28b91c9f1c636bda","name":"Executed CLI command","source":"28b91c9f1c636bda.txt","type":"text/plain","size":15},{"uid":"287d6be0920ae67b","name":"Executed CLI command output","source":"287d6be0920ae67b.txt","type":"text/plain","size":28}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":2,"hasContent":true,"attachmentStep":false}],"testStage":{"description":"\n- Login with valid credentials via **UI**.\n- Get Bearer auth token from Playwright local storage.\n- Login with Bearer auth token via **CLI**.\n- Create first organization via **CLI**.\n- Create second organization via **CLI**.\n\n### Verify that:\n\n- User can switch between organizations via **CLI**.\n","descriptionHtml":"<div style='line-height:1.6;'><ul>\n<li>Login with valid credentials via <strong>UI</strong>.</li>\n<li>Get Bearer auth token from Playwright local storage.</li>\n<li>Login with Bearer auth token via <strong>CLI</strong>.</li>\n<li>Create first organization via <strong>CLI</strong>.</li>\n<li>Create second organization via <strong>CLI</strong>.</li>\n</ul>\n<h3>Verify that:</h3>\n<ul>\n<li>User can switch between organizations via <strong>CLI</strong>.</li>\n</ul></div>","status":"passed","steps":[{"name":"Login via UI","time":{"start":1758106140175,"stop":1758106150833,"duration":10658},"status":"passed","steps":[{"name":"Click login button","time":{"start":1758106140175,"stop":1758106141287,"duration":1112},"status":"passed","steps":[],"attachments":[{"uid":"f427b9e428972fe1","name":"Page URL","source":"f427b9e428972fe1.txt","type":"text/plain","size":33},{"uid":"fbc96f6d5967dce7","name":"Screenshot: Click login button (success)","source":"fbc96f6d5967dce7.png","type":"image/png","size":41538}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Enter email","time":{"start":1758106141288,"stop":1758106141419,"duration":131},"status":"passed","steps":[],"attachments":[{"uid":"5f9769a46de83e6b","name":"Page URL","source":"5f9769a46de83e6b.txt","type":"text/plain","size":215},{"uid":"48d691ad17889dc1","name":"Screenshot: Enter email (success)","source":"48d691ad17889dc1.png","type":"image/png","size":45189}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Enter password","time":{"start":1758106141419,"stop":1758106141571,"duration":152},"status":"passed","steps":[],"attachments":[{"uid":"61883aeb611e4dd1","name":"Page URL","source":"61883aeb611e4dd1.txt","type":"text/plain","size":215},{"uid":"b3ea92cb66e777e7","name":"Screenshot: Enter password (success)","source":"b3ea92cb66e777e7.png","type":"image/png","size":45713}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Click Continue button","time":{"start":1758106141571,"stop":1758106149634,"duration":8063},"status":"passed","steps":[],"attachments":[{"uid":"5d96a6ca0fa46dd","name":"Page URL","source":"5d96a6ca0fa46dd.txt","type":"text/plain","size":215},{"uid":"99ea1eb8c23dfaf8","name":"HTTP 200 - GET config","source":"99ea1eb8c23dfaf8.txt","type":"text/plain","size":752},{"uid":"e1f41e403e95e7e","name":"HTTP 200 - GET permissions?uri=blob:","source":"e1f41e403e95e7e.txt","type":"text/plain","size":163},{"uid":"2a9f202472b7a9bd","name":"HTTP 200 - GET regression-ljzcrlojtv?include=orgs","source":"2a9f202472b7a9bd.txt","type":"text/plain","size":360},{"uid":"9f5eba1a61d239c4","name":"HTTP 200 - GET regression-ljzcrlojtv?include=clusters&include=system_role","source":"9f5eba1a61d239c4.txt","type":"text/plain","size":388},{"uid":"23e4575a8d0e1c94","name":"HTTP 200 - GET incoming","source":"23e4575a8d0e1c94.txt","type":"text/plain","size":137},{"uid":"b41b5cd00c8c6bf3","name":"Screenshot: Click Continue button (success)","source":"b41b5cd00c8c6bf3.png","type":"image/png","size":158779}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":7,"hasContent":true,"attachmentStep":false},{"name":"Verify that Welcome new user page displayed","time":{"start":1758106149645,"stop":1758106150750,"duration":1105},"status":"passed","steps":[],"attachments":[{"uid":"9ec77cd78dc4f4c1","name":"Page URL","source":"9ec77cd78dc4f4c1.txt","type":"text/plain","size":44},{"uid":"cb2e0fb3cff1a1aa","name":"Screenshot: Verify that Welcome new user page displayed (success)","source":"cb2e0fb3cff1a1aa.png","type":"image/png","size":158779}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"e5b5378ef82e48f5","name":"Page URL","source":"e5b5378ef82e48f5.txt","type":"text/plain","size":33},{"uid":"adb468c72caebbe8","name":"Screenshot: Login via UI (success)","source":"adb468c72caebbe8.png","type":"image/png","size":158779}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":5,"attachmentsCount":17,"hasContent":true,"attachmentStep":false},{"name":"Login to apolo CLI with access token","time":{"start":1758106150833,"stop":1758106151743,"duration":910},"status":"passed","steps":[],"attachments":[{"uid":"a7246a21f3036b9e","name":"Executed CLI command","source":"a7246a21f3036b9e.txt","type":"text/plain","size":1114},{"uid":"39d6fb437254a85e","name":"Executed CLI command output","source":"39d6fb437254a85e.txt","type":"text/plain","size":184}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Add new organization via apolo CLI","time":{"start":1758106151743,"stop":1758106163090,"duration":11347},"status":"passed","steps":[],"attachments":[{"uid":"5f459c91d4f81fc2","name":"Executed CLI command","source":"5f459c91d4f81fc2.txt","type":"text/plain","size":1114},{"uid":"995a3cbc07884bef","name":"Executed CLI command output","source":"995a3cbc07884bef.txt","type":"text/plain","size":264}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Add new organization via apolo CLI","time":{"start":1758106163090,"stop":1758106179785,"duration":16695},"status":"passed","steps":[],"attachments":[{"uid":"386d9ba710f4c3a","name":"Executed CLI command","source":"386d9ba710f4c3a.txt","type":"text/plain","size":47},{"uid":"bb49bcd248e4d48b","name":"Executed CLI command output","source":"bb49bcd248e4d48b.txt","type":"text/plain","size":0}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Switch organization via CLI","time":{"start":1758106179785,"stop":1758106180605,"duration":820},"status":"passed","steps":[],"attachments":[{"uid":"a61b95946c5725d7","name":"Executed CLI command","source":"a61b95946c5725d7.txt","type":"text/plain","size":51},{"uid":"75e555c3e75cf05","name":"Executed CLI command output","source":"75e555c3e75cf05.txt","type":"text/plain","size":51}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Run config show command via CLI","time":{"start":1758106180605,"stop":1758106182437,"duration":1832},"status":"passed","steps":[],"attachments":[{"uid":"27859936516bf93e","name":"Executed CLI command","source":"27859936516bf93e.txt","type":"text/plain","size":17},{"uid":"233264e9a83d8e07","name":"Executed CLI command output","source":"233264e9a83d8e07.txt","type":"text/plain","size":3487}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Verify config show command output","time":{"start":1758106182437,"stop":1758106182437,"duration":0},"status":"passed","steps":[],"attachments":[{"uid":"30a2651320165700","name":"Executed CLI command","source":"30a2651320165700.txt","type":"text/plain","size":17},{"uid":"862a1c66084bdfa8","name":"Executed CLI command output","source":"862a1c66084bdfa8.txt","type":"text/plain","size":3487}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"53380587bff5efa","name":"log","source":"53380587bff5efa.txt","type":"text/plain","size":19803}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":12,"attachmentsCount":30,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"add_page_manager::finalizer","time":{"start":1758106182439,"stop":1758106182439,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_cleanup::finalizer","time":{"start":1758106182440,"stop":1758106182440,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_cleanup::finalizer","time":{"start":1758106182440,"stop":1758106186921,"duration":4481},"status":"passed","steps":[{"name":"Post-test cleanup","time":{"start":1758106182440,"stop":1758106186921,"duration":4481},"status":"passed","steps":[{"name":"Delete organisation: regression-org-wk0g4a36v4dv","time":{"start":1758106185590,"stop":1758106186188,"duration":598},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Delete organisation: regression-org-fcy3zm1ctb80","time":{"start":1758106186188,"stop":1758106186875,"duration":687},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":3,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"api_helper::finalizer","time":{"start":1758106186922,"stop":1758106186922,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_function_scoped_runner::0","time":{"start":1758106186923,"stop":1758106186923,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"suite","value":"CLI Organization Structure Setup"},{"name":"parentSuite","value":"CLI Tests"},{"name":"tag","value":"asyncio"},{"name":"subSuite","value":"TestCLIOrganizationStructureSetup"},{"name":"host","value":"runnervmf4ws1"},{"name":"thread","value":"3601-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_cases.tests_cli.test_organization_structure_setup"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[],"history":{"statistic":{"failed":6,"broken":0,"skipped":0,"passed":36,"unknown":0,"total":42},"items":[{"uid":"2d8d4da169070cc3","status":"passed","time":{"start":1758083596322,"stop":1758083646530,"duration":50208}},{"uid":"a81cc72d61e1cddf","status":"failed","statusDetails":"AssertionError: [AssertionError] during step: Verify config show command output\nMessage: Config show verification failed:\nExpected user name 'regression-ceadr7jsak', got 'regression-b3ava4qwop'","time":{"start":1757990729952,"stop":1757990793782,"duration":63830}},{"uid":"9117e1d6cfb0a1f1","status":"passed","time":{"start":1757904648071,"stop":1757904676559,"duration":28488}},{"uid":"e00c73bf889c8c00","status":"passed","time":{"start":1757817144343,"stop":1757817175141,"duration":30798}},{"uid":"7e9a3ce02dcad37c","status":"passed","time":{"start":1757730689831,"stop":1757730718356,"duration":28525}},{"uid":"715b1bc4dd1db863","status":"passed","time":{"start":1757644107028,"stop":1757644140742,"duration":33714}},{"uid":"c33f099ea428c38a","status":"passed","time":{"start":1757557355699,"stop":1757557394722,"duration":39023}},{"uid":"a06ce07a82a0baba","status":"passed","time":{"start":1757471319576,"stop":1757471355800,"duration":36224}},{"uid":"5d83b348b21a1239","status":"passed","time":{"start":1757419456679,"stop":1757419489749,"duration":33070}},{"uid":"2ed6cc777e8a4f63","status":"passed","time":{"start":1757385082208,"stop":1757385148397,"duration":66189}},{"uid":"c79bf66305918da2","status":"passed","time":{"start":1757298594591,"stop":1757298625717,"duration":31126}},{"uid":"958138a04da9c3f8","status":"passed","time":{"start":1757212570604,"stop":1757212604779,"duration":34175}},{"uid":"214e759ed7a898d4","status":"passed","time":{"start":1757141750956,"stop":1757141784510,"duration":33554}},{"uid":"df266174b5291030","status":"failed","statusDetails":"AssertionError: [AssertionError] during step: Add new organization via apolo CLI\nMessage: ERROR: There are no clusters available. Please run 'apolo logout' and then 'apolo login'.","time":{"start":1757126136603,"stop":1757126152041,"duration":15438}},{"uid":"691bbdac8103194c","status":"failed","statusDetails":"AssertionError: [AssertionError] during step: Add new organization via apolo CLI\nMessage: ERROR: There are no clusters available. Please run 'apolo logout' and then 'apolo login'.","time":{"start":1757039492016,"stop":1757039507951,"duration":15935}},{"uid":"d5289783aa4c5184","status":"failed","statusDetails":"AssertionError: [AssertionError] during step: Add new organization via apolo CLI\nMessage: ERROR: There are no clusters available. Please run 'apolo logout' and then 'apolo login'.","time":{"start":1756953062596,"stop":1756953078156,"duration":15560}},{"uid":"9a628b7d6d006e5c","status":"failed","statusDetails":"AssertionError: [AssertionError] during step: Login via UI\nMessage: [AssertionError] during step: Verify that Welcome new user page displayed\nMessage: Locator expected to be visible\nActual value: <element(s) not found> \nCall log:\n  - Expect \"to_be_visible\" with timeout 5000ms\n  - waiting for locator(\"h3.truncate.text-h3\").filter(has_text=\"Welcome, regression-7bo0jzv2ck@apolo.us\")","time":{"start":1756866416992,"stop":1756866432989,"duration":15997}},{"uid":"3e1d8e29289e600f","status":"passed","time":{"start":1756803788442,"stop":1756803824543,"duration":36101}},{"uid":"ac5de2beef2e4575","status":"passed","time":{"start":1756607084151,"stop":1756607115722,"duration":31571}},{"uid":"569928e6275cea31","status":"passed","time":{"start":1756520891410,"stop":1756520918202,"duration":26792}}]},"tags":["asyncio"]},"source":"20e7b8f44bbedb6b.json","parameterValues":[]}